var Qn=Object.defineProperty;var Jn=(e,i,n)=>i in e?Qn(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n;var ne=(e,i,n)=>Jn(e,typeof i!="symbol"?i+"":i,n);import"./chunks/B5Qt9EMX.js";import"./chunks/BCTBTwm7.js";import"./chunks/msN89aGx.js";import{$ as gi,r as zt}from"./chunks/B7pRgGH2.js";import{r as Zn,D as es,c as ts,d as is,f as fn,g as Ot,M as ns,T as ss,h as rs,N as dn,j as hn,k as as,l as os,m as ls,n as ci,o as cs}from"./chunks/uQtLU_rD.js";import{R as F}from"./chunks/CCX1OJQL.js";import{a as us,R as fs,r as ds}from"./chunks/Dmo1RC_c.js";import{L as hs,C as ps,b as ms,a as gs}from"./chunks/cJddhJlf.js";import{P as vs,W as bs,B as Xt}from"./chunks/DEJ7MDlh.js";import"./chunks/B9fb8Bne.js";import{a as vi,e as pn,g as Li,j as Gt,b as ui,k as ji,c as bi,o as Wt,s as yi,l as wi,f as Bt,h as mn,i as ys,r as Ri}from"./chunks/CXZooSEu.js";import{d as Ni,g as ws,a as xs,b as Pe,p as gn,S as Ss,c as Hi,e as _s}from"./chunks/CwFwcukf.js";import"./chunks/C0D7dfi8.js";import{r as Cs,a as ks,S as Ts,N as Es}from"./chunks/DRICrfwH.js";import{r as Fi}from"./chunks/B4SrOr3T.js";import{r as Kt}from"./chunks/BhibFcxs.js";import{r as Is}from"./chunks/RTvrqW77.js";import{g as As}from"./chunks/D6-XlEtG.js";import{d as Ae}from"./chunks/DcZ-q2nA.js";import{a as Ps,g as Ds}from"./chunks/JlwcKcEW.js";import"./chunks/DWF73c6K.js";import{d as zi,m as Os}from"./chunks/D0HwSrzf.js";import{M as Ce}from"./chunks/wdngpc7v.js";import"./chunks/Cc6V9pT1.js";import"./chunks/CZWCxuiO.js";import{p as xi}from"./chunks/DPeCBLXW.js";import"./chunks/Drwgqic4.js";import{g as Ms}from"./chunks/DX6PdSv4.js";import{D as vn}from"./chunks/CnLYH8eu.js";import{t as Ls}from"./chunks/D80r1iO4.js";import"./chunks/D3phq4LA.js";import{N as qt,A as $t}from"./chunks/Ck6DbinA.js";import{o as Si}from"./chunks/BTEnm7ee.js";import{M as js}from"./chunks/DzqXzT7Z.js";import{g as bn}from"./chunks/CWswDIAa.js";import{E as Wi,a as Rs,c as Ns}from"./chunks/C3Ay1Ke8.js";import{C as Hs}from"./chunks/qt9y7WI1.js";import{m as yn}from"./chunks/DWNyosfN.js";import{h as Fs}from"./chunks/BmMBI0RZ.js";import{d as wn}from"./chunks/Duz0x7wZ.js";import{E as zs}from"./chunks/BLpqPwTf.js";import{g as _i,C as Ci,T as pt,E as Ye,B as Ws}from"./chunks/JpiB-byr.js";import{S as Bs}from"./chunks/D0CRiLCf.js";import{T as qs}from"./chunks/BnElP6sD.js";import{t as $s}from"./chunks/BUuBzXGE.js";import{P as Us}from"./chunks/CzAAnZkG.js";import{p as Ys,F as Vs}from"./chunks/COF81Ss-.js";import{c as Xs}from"./chunks/nZmv-elc.js";import{o as Gs}from"./chunks/Du0ccf5p.js";import{R as xn}from"./chunks/CqrmcGl6.js";import{A as Ks}from"./chunks/D9BCH68g.js";import{s as Qs}from"./chunks/B8XGFczX.js";import{d as et}from"./chunks/iq6l9D7b.js";import"./chunks/CkEEJX_R.js";import"./chunks/03U_i1H8.js";import"./chunks/CkhgB9_0.js";import"./chunks/DbkyL-rk.js";import"./chunks/CNJCn1L1.js";import"./chunks/Cu5hmW1B.js";import"./chunks/avz1yegn.js";import"./chunks/CMMPhZm8.js";import"./chunks/BBVjT85o.js";import"./chunks/_RochNgE.js";import"./chunks/MQkqja_L.js";import"./chunks/CNOENfyM.js";import"./chunks/B0bByq0p.js";import"./chunks/AxRaG6ks.js";import"./chunks/BGVqBqED.js";import"./chunks/DwfP9SC5.js";import"./chunks/CTIZUcqP.js";import"./chunks/C3e4t58V.js";import"./chunks/BIa8E6MJ.js";import"./chunks/DZEHBdoo.js";import"./chunks/D2nGpDRe.js";import"./chunks/CUcMfv5U.js";import"./chunks/C-OWhFtv.js";import"./chunks/Dw2-ifts.js";import"./chunks/CbXmRM-a.js";import"./chunks/DKEljbTo.js";import"./chunks/DOHxIiFh.js";import"./chunks/CCPv9W2X.js";import"./chunks/tCl-Ehz6.js";function _a(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}var Js=function(e,i,n){s();function a(u,f){var w=null;return function(){var b=this,m=arguments;window.clearTimeout(w),w=window.setTimeout(function(){u.apply(b,m)},f)}}window.addEventListener("resize",a(s,50)),e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style["-webkit-transform"]="translate(-50%, -50%)",e.style["-ms-transform"]="translate(-50%, -50%)",e.style.transform="translate(-50%, -50%)",e.parentNode.style.overflow="hidden";var t=e.getAttribute("poster");e.removeAttribute("poster"),e.parentNode.style.backgroundImage="url("./t.html")",e.parentNode.style.backgroundSize="cover",e.parentNode.style.backgroundPosition="center center";function s(){var u=e.parentNode.offsetHeight,f=e.parentNode.offsetWidth,w=i,b=n,m=u/b,p=f/w;p>m?(e.style.height="auto",e.style.width=f+"px"):(e.style.height=u+"px",e.style.width="auto")}var r=typeof e.canPlayType<"u",o=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(o=!0),(!r||o)&&e&&e.parentNode&&e.parentNode.removeChild(e)};window.jQuery&&jQuery.fn.extend({coverVid:function(){return Js(this[0],arguments[0],arguments[1]),this}});/**
 * @author  Mudit Ameta
 * @license https://github.com/zeusdeux/isInViewport/blob/master/license.md MIT
 */(function(e){e.fn.isInViewport=function i(n){var a=this.get(0),t=a.getBoundingClientRect(),s=t.top,r=t.bottom,o=e(window).scrollTop()===e(document).height()-e(window).height(),u=""+a.offsetLeft+a.offsetTop+t.height+t.width,f=e.extend({tolerance:0,debug:!1},n),w=!1;return i.elementsAfterCurrent=i.elementsAfterCurrent||{},i.elementsAfterCurrent[u]=i.elementsAfterCurrent[u]||this.nextAll(),f.debug&&(console.log("---------------------------------------"),console.log("index: "+u),console.log("div: "+this.text().trim()),console.log("top: "+s),console.log("bottom: "+r),console.log("tolerance: "+f.tolerance),console.log("end of page: "+o),console.log("scrollTop: "+e(window).scrollTop()),console.log("doc height:"+e(document).height()),console.log("windowHeight using $(window).height(): "+e(window).height())),f.tolerance?s>=0?s<=f.tolerance?w=!0:w=!1:r>f.tolerance?w=!0:w=!1:s>=0&&s<=e(window).height()?w=!0:w=!1,o&&(i.elementsAfterCurrent[u].length===1||!i.elementsAfterCurrent[u].length)&&(s<0?w=!1:w=!0),w}})(jQuery);(function(e){var i=e.ajax,n={},a=[],t=[];e.ajax=function(s,r){typeof s=="string"?typeof r=="object"&&r!==null?r.url=s:r={url:s}:r=s,r=jQuery.extend(r,jQuery.extend({},jQuery.ajaxSettings,r));var o=r.port;switch(r.mode){case"abort":return n[o]&&n[o].abort(),n[o]=i.apply(this,arguments);case"queue":var u=r.complete;r.complete=function(){u&&u.apply(this,arguments),jQuery([i]).dequeue("ajax"+o)},jQuery([i]).queue("ajax"+o,function(){i(r)});return;case"sync":var f=a.length;a[f]={error:r.error,success:r.success,complete:r.complete,done:!1},t[f]={error:[],success:[],complete:[]},r.error=function(){t[f].error=arguments},r.success=function(){t[f].success=arguments},r.complete=function(){if(t[f].complete=arguments,a[f].done=!0,f==0||!a[f-1])for(var w=f;w<a.length&&a[w].done;w++)a[w].error&&a[w].error.apply(jQuery,t[w].error),a[w].success&&a[w].success.apply(jQuery,t[w].success),a[w].complete&&a[w].complete.apply(jQuery,t[w].complete),a[w]=null,t[w]=null}}return i.apply(this,arguments)}})(jQuery);(function(e){e.fn.extend({autocomplete:function(i,n){var a=typeof i=="string";return n=e.extend({},e.Autocompleter.defaults,{url:a?i:null,data:a?null:i,delay:a?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n),n.highlight=n.highlight||function(t){return t},n.formatMatch=n.formatMatch||n.formatItem,this.each(function(){new e.Autocompleter(this,n)})},result:function(i){return this.bind("result",i)},search:function(i){return this.trigger("search",[i])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(i){return this.trigger("setOptions",[i])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(i,n){var a={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},t=e(i).attr("autocomplete","off").addClass(n.inputClass),s=null,r="",o=e.Autocompleter.Cache(n),u=0,f=null,w={},b=e.Autocompleter.Select(n,i,p,w),m=!1;navigator.userAgent.match(/opera/i)&&e(i.form).bind("submit.autocomplete",function(){if(m)return m=!1,!1}),t.bind((navigator.userAgent.match(/opera/i)?"keypress":"keydown")+".autocomplete",function(x){switch(u=1,f=x.keyCode,x.keyCode){case a.UP:x.preventDefault(),b.visible()?b.prev():g(null,!0);break;case a.DOWN:x.preventDefault(),b.visible()?b.next():g(null,!0);break;case a.PAGEUP:x.preventDefault(),b.visible()?b.pageUp():g(null,!0);break;case a.PAGEDOWN:x.preventDefault(),b.visible()?b.pageDown():g(null,!0);break;case a.TAB:case a.RETURN:if(p())return x.preventDefault(),m=!0,!1;break;case a.ESC:b.hide();break;default:clearTimeout(s),s=setTimeout(g,n.delay),typeof n.keyPress=="function"&&n.keyPress(x.keyCode);break}}).focus(function(){u++}).blur(function(){u=0}).click(function(){u++>1&&!b.visible()&&g(null,!0)}).bind("search",function(){var x=arguments.length>1?arguments[1]:null;function _(k,y){var C=null;if(y&&y.length){for(var S=0;S<y.length;S++)if(y[S].id==k.id){C=y[S];break}}typeof x=="function"?x(C):t.trigger("result",C)}e.each(c(t.val()),function(k,y){l(y,_)})}).bind("flushCache",function(){r="",o.flush()}).bind("reveal",function(){clearTimeout(s),d(),b.show()}).bind("close",function(){clearTimeout(s),d(),b.hide()}).bind("setOptions",function(){e.extend(n,arguments[1]),"data"in arguments[1]&&o.populate()}).bind("unautocomplete",function(){b.unbind(),t.unbind(),e(i.form).unbind(".autocomplete")});function p(){var x=b.getSelectedItem();if(!x)return!1;var _=t.val();return r=_,t.trigger("result",x),b.hide(),!0}function g(x,_){if(f==a.DEL){b.hide();return}var k=t.val();!_&&k==r||(r=k,v(),k.length>=n.minChars?(t.addClass(n.loadingClass),n.matchCase||(k=k.toLowerCase()),l(k,h)):(typeof n.valueTooShort=="function"&&n.valueTooShort(k),d(),b.hide()))}function c(x){return x?[e.trim(x)]:[""]}function v(){b.hide(),clearTimeout(s),d(),n.mustMatch&&t.search(function(x){x||(t.val(""),t.trigger("result",null))})}function h(x,_){u?(d(),_||(_=[]),b.display(_,x),b.show()):v()}function l(x,_,k){n.matchCase||(x=x.toLowerCase());var y=o.load(x);if(y)typeof n.beforeSend=="function"&&n.beforeSend(t,x),typeof n.afterSend=="function"&&n.afterSend(t,y),_(x,y);else{var C={timestamp:+new Date};e.each(n.extraParams,function(S,T){C[S]=typeof T=="function"?T():T}),e.ajax({mode:"abort",port:"autocomplete"+i.name,dataType:n.dataType,url:n.url,data:e.extend({q:x,limit:n.max},C),beforeSend:function(S,T){typeof n.beforeSend=="function"&&n.beforeSend(t,x)},error:function(S,T,E){typeof n.error=="function"&&n.error(t,S,T,E)},success:function(S,T,E){S.result&&(typeof n.afterSend=="function"&&n.afterSend(t,S.data,T,E),o.add(x,S.data),_(x,S.data))}})}}function d(){t.removeClass(n.loadingClass)}},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",showAsDropDown:!0,minChars:1,delay:400,matchCase:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(i){return i[0]},formatMatch:null,width:0,highlight:function(i,n){return i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+n.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(i){var n={},a=0;function t(o,u){a>i.cacheLength&&r(),n[o]||a++,n[o]=u}function s(){if(!i.data)return!1;var o={},u=0;i.url||(i.cacheLength=1),o[""]=[];for(var f=0,w=i.data.length;f<w;f++){var b=i.data[f];b=typeof b=="string"?[b]:b;var m=i.formatMatch(b,f+1,i.data.length);if(m!==!1){var p=m.charAt(0).toLowerCase();o[p]||(o[p]=[]);var g={value:m,data:b,result:i.formatResult&&i.formatResult(b)||m};o[p].push(g),u++<i.max&&o[""].push(g)}}e.each(o,function(c,v){i.cacheLength++,t(c,v)})}setTimeout(s,25);function r(){n={},a=0}return{flush:r,add:t,populate:s,load:function(o){return!i.cacheLength||!a?null:n[o]?n[o]:null}}},e.Autocompleter.Select=function(i,n,a,t){var s={ACTIVE:"ac_over"},r=null,o=-1,u=null,f="",w=!0,b=null,m=null;function p(){if(w){if(i.showAsDropDown){b=e("<div/>").hide().addClass(i.resultsClass).css("position","absolute").appendTo(document.body),m=e("<ul/>").appendTo(b);var l="li";m.on("mouseover",l,function(d){o=e(l).removeClass(s.ACTIVE).index(e(this)),e(this).addClass(s.ACTIVE)}).on("click",l,function(d){return e(l).not(this).removeClass(s.ACTIVE),e(this).addClass(s.ACTIVE),setTimeout(function(){a(),n.focus()},50),!1}),i.width>0&&b.css("width",i.width)}typeof i.postInitCallback=="function"&&i.postInitCallback(b),w=!1}}function g(l){r.slice(o,o+1).removeClass(s.ACTIVE),c(l);var d=r.slice(o,o+1).addClass(s.ACTIVE);if(i.scroll){var x=0;r.slice(0,o).each(function(){x+=this.offsetHeight}),x+d[0].offsetHeight-m.scrollTop()>m[0].clientHeight?m.scrollTop(x+d[0].offsetHeight-m.innerHeight()):x<m.scrollTop()&&m.scrollTop(x)}}function c(l){o+=l,o<0?o=r.length-1:o>=r.length&&(o=0)}function v(l){return i.max&&i.max<l?i.max:l}function h(){if(m&&m.empty(),u.length){for(var l=v(u.length),d=0;d<l;d++)if(u[d]){var x=i.formatItem(u[d],d+1,l,f);if(x!==!1){var _=e("<li/>").html(i.highlight(x,f)).addClass(d%2===0?"ac_even":"ac_odd").appendTo(m)[0];e.data(_,"ac_data",u[d])}}r=m.find("li"),i.selectFirst&&(r.slice(0,1).addClass(s.ACTIVE),o=0)}else if(i.handleNoResults){var k="No matches";typeof i.formatNoResultsMessage=="function"&&(k=i.formatNoResultsMessage(f)),e("<li class='ac_even ac_error'>"+k+"</li>").appendTo(m)}e.fn.bgiframe&&m.bgiframe()}return{display:function(l,d){p(),u=l,f=d,h()},next:function(){g(1)},prev:function(){g(-1)},pageUp:function(){o!==0&&o-8<0?g(-o):g(-8)},pageDown:function(){o!=r.length-1&&o+8>r.length?g(r.length-1-o):g(8)},hide:function(){b&&b.hide(),o=-1},visible:function(){return b&&b.is(":visible")},current:function(){return this.visible()&&(r.filter("."+s.ACTIVE)[0]||i.selectFirst&&r[0])},show:function(){if(i.showAsDropDown){var l=e(n).offset();if(b.css({width:typeof i.width=="string"||i.width>0?i.width:e(n).width(),top:l.top+n.offsetHeight,left:l.left}).show(),i.scroll&&(m.scrollTop(0),m.css({maxHeight:i.scrollHeight,overflow:"auto"}),navigator.userAgent.match(/msie/i)&&typeof document.body.style.maxHeight>"u")){var d=0;r.each(function(){d+=this.offsetHeight});var x=d>i.scrollHeight;m.css("height",x?i.scrollHeight:d),x||r.width(m.width()-parseInt(r.css("padding-left"),10)-parseInt(r.css("padding-right"),10))}}},getSelectedItem:function(){var l=null;r&&(l=r.filter("."+s.ACTIVE),r.removeClass(s.ACTIVE));var d=null;return l&&l.length&&(d=e.data(l[0],"ac_data")),d},emptyList:function(){m&&m.empty()},unbind:function(){b&&b.remove()}}},e.fn.selection=function(i,n){if(i!==void 0)return this.each(function(){if(this.createTextRange){var f=this.createTextRange();n===void 0||i==n?(f.move("character",i),f.select()):(f.collapse(!0),f.moveStart("character",i),f.moveEnd("character",n),f.select())}else this.setSelectionRange?this.setSelectionRange(i,n):this.selectionStart&&(this.selectionStart=i,this.selectionEnd=n)});var a=this[0];if(a.createTextRange){var t=document.selection.createRange(),s=a.value,r="<->",o=t.text.length;t.text=r;var u=a.value.indexOf(r);return a.value=s,this.selection(u,u+o),{start:u,end:u+o}}else if(a.selectionStart!==void 0)return{start:a.selectionStart,end:a.selectionEnd}}})(jQuery);(function(e){e.fn.autogrow=function(i){return this.filter("textarea").each(function(){var n=e(this),a=n.height();n.css("lineHeight");var t=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:e(this).width()-parseInt(n.css("paddingLeft"))-parseInt(n.css("paddingRight")),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),lineHeight:n.css("lineHeight"),resize:"none"}).appendTo(document.body),s=function(){var r=function(u,f){for(var w=0,b="";w<f;w++)b+=u;return b},o=this.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(u){return r("&nbsp;",u.length-1)+" "});t.html(o),e(this).css("height",Math.max(t.height()+20,a))};e(this).change(s).keyup(s).keydown(s),s.apply(this)}),this}})(jQuery);/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */(function(e,i){"$:nomunge";var n=e.jQuery||e.Cowboy||(e.Cowboy={}),a;n.throttle=a=function(t,s,r,o){var u,f=0;typeof s!="boolean"&&(o=r,r=s,s=i);function w(){var b=this,m=+new Date-f,p=arguments;function g(){f=+new Date,r.apply(b,p)}function c(){u=i}o&&!u&&g(),u&&clearTimeout(u),o===i&&m>t?g():s!==!0&&(u=setTimeout(o?c:g,o===i?t-m:t))}return n.guid&&(w.guid=r.guid=r.guid||n.guid++),w},n.debounce=function(t,s,r){return r===i?a(t,s,!1):a(t,r,s!==!1)}})(window);(function(e){var i=Array.prototype.slice;function n(){}function a(t){if(!t)return;function s(u){u.prototype.option||(u.prototype.option=function(f){t.isPlainObject(f)&&(this.options=t.extend(!0,this.options,f))})}var r=typeof console>"u"?n:function(u){console.error(u)};function o(u,f){t.fn[u]=function(w){if(typeof w=="string"){for(var b=i.call(arguments,1),m=0,p=this.length;m<p;m++){var g=this[m],c=t.data(g,u);if(!c){r("cannot call methods on "+u+" prior to initialization; attempted to call '"+w+"'");continue}if(!t.isFunction(c[w])||w.charAt(0)==="_"){r("no such method '"+w+"' for "+u+" instance");continue}var v=c[w].apply(c,b);if(v!==void 0)return v}return this}else return this.each(function(){var h=t.data(this,u);h?(h.option(w),h._init()):(h=new f(this,w),t.data(this,u,h))})}}return t.bridget=function(u,f){s(f),o(u,f)},t.bridget}typeof define=="function"&&define.amd?define(["jquery"],a):a(e.jQuery)})(window);(function(e){e.fx.step.clip=function(i){if(i.state==0){var n=/rect\(([0-9]{1,})(px|em)[,\s]+([0-9]{1,})(px|em)[,\s]+([0-9]{1,})(px|em)[,\s]+([0-9]{1,})(px|em)\)/;$elem=$(i.elem);var a=n.test(i.elem.style.clip)?i.elem.style.clip:"rect(0px "+$elem.width()+"px "+$elem.height()+"px 0px)";i.start=n.exec(a.replace(/,/g," "));try{i.end=n.exec(i.end.replace(/,/g,""))}catch(b){return!1}}for(var t=new Array,s=new Array,r=i.start.length,o=i.end.length,u=i.start[f+1]=="em"?parseInt($(i.elem).css("fontSize"))*1.333*parseInt(i.start[f]):1,f=1;f<r;f+=2)t.push(parseInt(u*i.start[f]));for(var w=1;w<o;w+=2)s.push(parseInt(u*i.end[w]));i.elem.style.clip="rect("+parseInt(i.pos*(s[0]-t[0])+t[0])+"px "+parseInt(i.pos*(s[1]-t[1])+t[1])+"px "+parseInt(i.pos*(s[2]-t[2])+t[2])+"px "+parseInt(i.pos*(s[3]-t[3])+t[3])+"px)"}})(jQuery);/*!
 * jQuery Color Animations v@VERSION
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: @DATE
 */(function(e,i){var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(c){return[c[1],c[2],c[3],c[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(c){return[c[1]*2.55,c[2]*2.55,c[3]*2.55,c[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(c){return[c[1],c[2]/100,c[3]/100,c[4]]}}],s=e.Color=function(c,v,h,l){return new e.Color.fn.parse(c,v,h,l)},r={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},o={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=s.support={},f=e("<p>")[0],w,b=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=f.style.backgroundColor.indexOf("rgba")>-1,b(r,function(c,v){v.cache="_"+c,v.props.alpha={idx:3,type:"percent",def:1}});function m(c,v,h){var l=o[v.type]||{};return c==null?h||!v.def?null:v.def:(c=l.floor?~~c:parseFloat(c),isNaN(c)?v.def:l.mod?(c+l.mod)%l.mod:0>c?0:l.max<c?l.max:c)}function p(c){var v=s(),h=v._rgba=[];return c=c.toLowerCase(),b(t,function(l,d){var x,_=d.re.exec(c),k=_&&d.parse(_),y=d.space||"rgba";if(k)return x=v[y](k),v[r[y].cache]=x[r[y].cache],h=v._rgba=x._rgba,!1}),h.length?(h.join()==="0,0,0,0"&&e.extend(h,w.transparent),v):w[c]}s.fn=e.extend(s.prototype,{parse:function(c,v,h,l){if(c===i)return this._rgba=[null,null,null,null],this;(c.jquery||c.nodeType)&&(c=e(c).css(v),v=i);var d=this,x=e.type(c),_=this._rgba=[];if(v!==i&&(c=[c,v,h,l],x="array"),x==="string")return this.parse(p(c)||w._default);if(x==="array")return b(r.rgba.props,function(k,y){_[y.idx]=m(c[y.idx],y)}),this;if(x==="object")return c instanceof s?b(r,function(k,y){c[y.cache]&&(d[y.cache]=c[y.cache].slice())}):b(r,function(k,y){var C=y.cache;b(y.props,function(S,T){if(!d[C]&&y.to){if(S==="alpha"||c[S]==null)return;d[C]=y.to(d._rgba)}d[C][T.idx]=m(c[S],T,!0)}),d[C]&&e.inArray(null,d[C].slice(0,3))<0&&(d[C][3]=1,y.from&&(d._rgba=y.from(d[C])))}),this},is:function(c){var v=s(c),h=!0,l=this;return b(r,function(d,x){var _,k=v[x.cache];return k&&(_=l[x.cache]||x.to&&x.to(l._rgba)||[],b(x.props,function(y,C){if(k[C.idx]!=null)return h=k[C.idx]===_[C.idx],h})),h}),h},_space:function(){var c=[],v=this;return b(r,function(h,l){v[l.cache]&&c.push(h)}),c.pop()},transition:function(c,v){var h=s(c),l=h._space(),d=r[l],x=this.alpha()===0?s("transparent"):this,_=x[d.cache]||d.to(x._rgba),k=_.slice();return h=h[d.cache],b(d.props,function(y,C){var S=C.idx,T=_[S],E=h[S],A=o[C.type]||{};E!==null&&(T===null?k[S]=E:(A.mod&&(E-T>A.mod/2?T+=A.mod:T-E>A.mod/2&&(T-=A.mod)),k[S]=m((E-T)*v+T,C)))}),this[l](k)},blend:function(c){if(this._rgba[3]===1)return this;var v=this._rgba.slice(),h=v.pop(),l=s(c)._rgba;return s(e.map(v,function(d,x){return(1-h)*l[x]+h*d}))},toRgbaString:function(){var c="rgba(",v=e.map(this._rgba,function(h,l){return h==null?l>2?1:0:h});return v[3]===1&&(v.pop(),c="rgb("),c+v.join()+")"},toHslaString:function(){var c="hsla(",v=e.map(this.hsla(),function(h,l){return h==null&&(h=l>2?1:0),l&&l<3&&(h=Math.round(h*100)+"%"),h});return v[3]===1&&(v.pop(),c="hsl("),c+v.join()+")"},toHexString:function(c){var v=this._rgba.slice(),h=v.pop();return c&&v.push(~~(h*255)),"#"+e.map(v,function(l,d){return l=(l||0).toString(16),l.length===1?"0"+l:l}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn;function g(c,v,h){return h=(h+1)%1,h*6<1?c+(v-c)*h*6:h*2<1?v:h*3<2?c+(v-c)*(2/3-h)*6:c}r.hsla.to=function(c){if(c[0]==null||c[1]==null||c[2]==null)return[null,null,null,c[3]];var v=c[0]/255,h=c[1]/255,l=c[2]/255,d=c[3],x=Math.max(v,h,l),_=Math.min(v,h,l),k=x-_,y=x+_,C=y*.5,S,T;return _===x?S=0:v===x?S=60*(h-l)/k+360:h===x?S=60*(l-v)/k+120:S=60*(v-h)/k+240,C===0||C===1?T=C:C<=.5?T=k/y:T=k/(2-y),[Math.round(S)%360,T,C,d==null?1:d]},r.hsla.from=function(c){if(c[0]==null||c[1]==null||c[2]==null)return[null,null,null,c[3]];var v=c[0]/360,h=c[1],l=c[2],d=c[3],x=l<=.5?l*(1+h):l+h-l*h,_=2*l-x;return[Math.round(g(_,x,v+1/3)*255),Math.round(g(_,x,v)*255),Math.round(g(_,x,v-1/3)*255),d]},b(r,function(c,v){var h=v.props,l=v.cache,d=v.to,x=v.from;s.fn[c]=function(_){if(d&&!this[l]&&(this[l]=d(this._rgba)),_===i)return this[l].slice();var k,y=e.type(_),C=y==="array"||y==="object"?_:arguments,S=this[l].slice();return b(h,function(T,E){var A=C[y==="object"?T:E.idx];A==null&&(A=S[E.idx]),S[E.idx]=m(A,E)}),x?(k=s(x(S)),k[l]=S,k):s(S)},b(h,function(_,k){s.fn[_]||(s.fn[_]=function(y){var C=e.type(y),S=_==="alpha"?this._hsla?"hsla":"rgba":c,T=this[S](),E=T[k.idx],A;return C==="undefined"?E:(C==="function"&&(y=y.call(this,E),C=e.type(y)),y==null&&k.empty?this:(C==="string"&&(A=a.exec(y),A&&(y=E+parseFloat(A[2])*(A[1]==="+"?1:-1))),T[k.idx]=y,this[S](T)))})})}),s.hook=function(c){var v=c.split(" ");b(v,function(h,l){e.cssHooks[l]={set:function(d,x){var _,k,y="";if(e.type(x)!=="string"||(_=p(x))){if(x=s(_||x),!u.rgba&&x._rgba[3]!==1){for(k=l==="backgroundColor"?d.parentNode:d;(y===""||y==="transparent")&&k&&k.style;)try{y=e.css(k,"backgroundColor"),k=k.parentNode}catch(C){}x=x.blend(y&&y!=="transparent"?y:"_default")}x=x.toRgbaString()}try{d.style[l]=x}catch(C){}}},e.fx.step[l]=function(d){d.colorInit||(d.start=s(d.elem,l),d.end=s(d.end),d.colorInit=!0),e.cssHooks[l].set(d.elem,d.start.transition(d.end,d.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(c){var v={};return b(["Top","Right","Bottom","Left"],function(h,l){v["border"+l+"Color"]=c}),v}},w=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(e,i,n){var a={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},t="colorbox",s="cbox",r=s+"Element",o=s+"_open",u=s+"_load",f=s+"_complete",w=s+"_cleanup",b=s+"_closed",m=s+"_purge",p=s+"_IE6",g,c,v,h,l,d,x,_,k,y,C,S,T,E,A,P,D,O,M,L,I,z,j,B,N,X,V,te,he,Ee,we,Ve,J,Z="div",Fe,nt;function ee(H,W,G){var re=i.createElement(H);return W&&(re.id=s+W),G&&(re.style.cssText=G),e(re)}function vt(H){var W=k.length,G=(V+H)%W;return G<0?W+G:G}function fe(H,W){return Math.round((/%/.test(H)?(W==="x"?y.width():y.height())/100:1)*parseInt(H,10))}function Ai(H){return I.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(H)}function Pi(){var H,W=e.data(X,t);W==null?(I=e.extend({},a),console&&console.log&&console.log("Error: cboxElement missing settings object")):I=e.extend({},W);for(H in I)e.isFunction(I[H])&&H.slice(0,2)!=="on"&&(I[H]=I[H].call(X));I.rel=I.rel||X.rel||e(X).data("rel")||"nofollow",I.href=I.href||e(X).attr("href"),I.title=I.title||X.title,typeof I.href=="string"&&(I.href=e.trim(I.href))}function ze(H,W){e(i).trigger(H),e("*",c).trigger(H),W&&W.call(X)}function Xn(){var H,W=s+"Slideshow_",G="click."+s,re,ge;I.slideshow&&k[1]?(re=function(){P.html(I.slideshowStop).unbind(G).bind(f,function(){(I.loop||k[V+1])&&(H=setTimeout(J.next,I.slideshowSpeed))}).bind(u,function(){clearTimeout(H)}).one(G+" "+w,ge),c.removeClass(W+"off").addClass(W+"on"),H=setTimeout(J.next,I.slideshowSpeed)},ge=function(){clearTimeout(H),P.html(I.slideshowStart).unbind([f,u,w,G].join(" ")).one(G,function(){J.next(),re()}),c.removeClass(W+"on").addClass(W+"off")},I.slideshowAuto?re():ge()):c.removeClass(W+"off "+W+"on")}function Di(H){we||(X=H,Pi(),k=e(X),V=0,I.rel!=="nofollow"&&(k=e("."+r).filter(function(){var W=e.data(this,t),G;return W&&(G=e(this).data("rel")||W.rel||this.rel),G===I.rel}),V=k.index(X),V===-1&&(k=k.add(X),V=k.length-1)),he||(he=Ee=!0,c.css({visibility:"hidden",display:"block"}),C=ee(Z,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(h),z=l.height()+_.height()+h.outerHeight(!0)-h.height(),j=d.width()+x.width()+h.outerWidth(!0)-h.width(),B=C.outerHeight(!0),N=C.outerWidth(!0),I.returnFocus&&(e(X).blur(),e(i).one(b,function(){e(X).focus()})),g.css({opacity:parseFloat(I.opacity),cursor:I.overlayClose?"pointer":"auto",visibility:"visible"}).show(),I.w=fe(I.initialWidth,"x"),I.h=fe(I.initialHeight,"y"),J.position(),ze(o,I.onOpen),L.add(E).hide(),M.html(I.close).show()),J.load(!0))}function Oi(){!c&&i.body&&(nt=!1,y=e(n),c=ee(Z).attr({id:t,class:""}).hide(),g=ee(Z,"Overlay","").hide(),T=ee(Z,"LoadingOverlay").add(ee(Z,"LoadingGraphic")),v=ee(Z,"Wrapper"),h=ee(Z,"Content").append(E=ee(Z,"Title"),A=ee(Z,"Current"),D=ee(Z,"Next"),O=ee(Z,"Previous"),P=ee(Z,"Slideshow").bind(o,Xn),M=ee(Z,"Close")),v.append(ee(Z).append(ee(Z,"TopLeft"),l=ee(Z,"TopCenter"),ee(Z,"TopRight")),ee(Z,!1,"clear:left").append(d=ee(Z,"MiddleLeft"),h,x=ee(Z,"MiddleRight")),ee(Z,!1,"clear:left").append(ee(Z,"BottomLeft"),_=ee(Z,"BottomCenter"),ee(Z,"BottomRight"))).find("div div").css({float:"left"}),S=ee(Z,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),L=D.add(O).add(A).add(P),e(i.body).append(g,c.append(v,S)))}function Gn(){function H(W){W.which>1||W.shiftKey||W.altKey||W.metaKey||(W.preventDefault(),Di(this))}return c?(nt||(nt=!0,D.click(function(){J.next()}),O.click(function(){J.prev()}),M.click(function(){J.close()}),g.click(function(){I.overlayClose&&J.close()}),e(i).bind("keydown."+s,function(W){var G=W.keyCode;he&&I.escKey&&G===27&&(W.preventDefault(),J.close()),he&&I.arrowKey&&k[1]&&(G===37?(W.preventDefault(),O.click()):G===39&&(W.preventDefault(),D.click()))}),e.isFunction(e.fn.on)?e(i).on("click."+s,"."+r,H):e("."+r).live("click."+s,H)),!0):!1}e.colorbox||(e(Oi),J=e.fn[t]=e[t]=function(H,W){var G=this;if(H=H||{},Oi(),Gn()){if(e.isFunction(G))G=e("<a/>"),H.open=!0;else if(!G[0])return G;W&&(H.onComplete=W),G.each(function(){e.data(this,t,e.extend({},e.data(this,t)||a,H))}).addClass(r),(e.isFunction(H.open)&&H.open.call(G)||H.open)&&Di(G[0])}return G},J.position=function(H,W){var G,re=0,ge=0,ve=c.offset(),pe,Xe;y.unbind("resize."+s),c.css({top:-9e4,left:-9e4}),pe=y.scrollTop(),Xe=y.scrollLeft(),I.fixed?(ve.top-=pe,ve.left-=Xe,c.css({position:"fixed"})):(re=pe,ge=Xe,c.css({position:"absolute"})),I.right!==!1?ge+=Math.max(y.width()-I.w-N-j-fe(I.right,"x"),0):I.left!==!1?ge+=fe(I.left,"x"):ge+=Math.round(Math.max(y.width()-I.w-N-j,0)/2),I.bottom!==!1?re+=Math.max(y.height()-I.h-B-z-fe(I.bottom,"y"),0):I.top!==!1?re+=fe(I.top,"y"):re+=Math.round(Math.max(y.height()-I.h-B-z,0)/2),c.css({top:ve.top,left:ve.left,visibility:"visible"}),H=c.width()===I.w+N&&c.height()===I.h+B?0:H||0,v[0].style.width=v[0].style.height="9999px";function st(Ge){l[0].style.width=_[0].style.width=h[0].style.width=parseInt(Ge.style.width,10)-j+"px",h[0].style.height=d[0].style.height=x[0].style.height=parseInt(Ge.style.height,10)-z+"px"}G={width:I.w+N+j,height:I.h+B+z,top:re,left:ge},H===0&&c.css(G),c.dequeue().animate(G,{duration:H,complete:function(){st(this),Ee=!1,v[0].style.width=I.w+N+j+"px",v[0].style.height=I.h+B+z+"px",I.reposition&&setTimeout(function(){y.bind("resize."+s,J.position)},1),W&&W()},step:function(){st(this)}})},J.resize=function(H,W){he&&(H=H||{},H.width&&(I.w=fe(H.width,"x")-N-j),H.innerWidth&&(I.w=fe(H.innerWidth,"x")),C.css({width:I.w}),H.height&&(I.h=fe(H.height,"y")-B-z),H.innerHeight&&(I.h=fe(H.innerHeight,"y")),!H.innerHeight&&!H.height&&(C.css({height:"auto"}),I.h=C.height()),C.css({height:I.h}),J.position(I.transition==="none"?0:I.speed,W))},J.prep=function(H){if(!he)return;var W,G=I.transition==="none"?0:I.speed;C.empty().remove(),C=ee(Z,"LoadedContent").append(H);function re(){return I.w=I.w||C.width(),I.w=I.mw&&I.mw<I.w?I.mw:I.w,I.w}function ge(){return I.h=I.h||C.height(),I.h=I.mh&&I.mh<I.h?I.mh:I.h,I.h}C.hide().appendTo(S.show()).css({width:re(),overflow:I.scrolling?"auto":"hidden"}).css({height:ge()}).prependTo(h),S.hide(),e(te).css({float:"none"}),W=function(){var ve=k.length,pe,Xe="frameBorder",st="allowTransparency",Ge;if(!he)return;function Kn(){}Ge=function(){clearTimeout(Ve),T.remove(),ze(f,I.onComplete)},E.html(I.title).add(C).show(),ve>1?(typeof I.current=="string"&&A.html(I.current.replace("{current}",V+1).replace("{total}",ve)).show(),D[I.loop||V<ve-1?"show":"hide"]().html(I.next),O[I.loop||V?"show":"hide"]().html(I.previous),I.slideshow&&P.show(),I.preloading&&e.each([vt(-1),vt(1)],function(){var We,Mi,Yt=k[this],Vt=e.data(Yt,t);Vt&&Vt.href?(We=Vt.href,e.isFunction(We)&&(We=We.call(Yt))):We=Yt.href,Ai(We)&&(Mi=new Image,Mi.src=We)})):L.hide(),I.iframe?(pe=ee("iframe")[0],Xe in pe&&(pe[Xe]=0),st in pe&&(pe[st]="true"),I.scrolling||(pe.scrolling="no"),e(pe).attr({src:I.href,name:new Date().getTime(),class:s+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",Ge).appendTo(C),e(i).one(m,function(){pe.src="//about:blank"}),I.fastIframe&&e(pe).trigger("load")):Ge(),I.transition==="fade"&&c.fadeTo(G,1,Kn)},I.transition==="fade"?c.fadeTo(G,0,function(){J.position(0,W)}):J.position(G,W)},J.load=function(H){var W,G,re=J.prep,ge;Ee=!0,te=!1,X=k[V],H||Pi(),Fe&&c.add(g).removeClass(Fe),I.className&&c.add(g).addClass(I.className),Fe=I.className,ze(m),ze(u,I.onLoad),I.h=I.height?fe(I.height,"y")-B-z:I.innerHeight&&fe(I.innerHeight,"y"),I.w=I.width?fe(I.width,"x")-N-j:I.innerWidth&&fe(I.innerWidth,"x"),I.mw=I.w,I.mh=I.h,I.maxWidth&&(I.mw=fe(I.maxWidth,"x")-N-j,I.mw=I.w&&I.w<I.mw?I.w:I.mw),I.maxHeight&&(I.mh=fe(I.maxHeight,"y")-B-z,I.mh=I.h&&I.h<I.mh?I.h:I.mh),W=I.href,Ve=setTimeout(function(){T.appendTo(h)},100),I.inline?(ge=ee(Z).hide().insertBefore(e(W)[0]),e(i).one(m,function(){ge.replaceWith(C.children())}),re(e(W))):I.iframe?re(" "):I.html?re(I.html):Ai(W)?(e(te=new Image).addClass(s+"Photo").bind("error",function(){I.title=!1,re(ee(Z,"Error").html(I.imgError))}).one("load",function(){var ve;I.scalePhotos&&(G=function(){te.height-=te.height*ve,te.width-=te.width*ve},I.mw&&te.width>I.mw&&(ve=(te.width-I.mw)/te.width,G()),I.mh&&te.height>I.mh&&(ve=(te.height-I.mh)/te.height,G())),I.h&&(te.style.marginTop=Math.max(I.h-te.height,0)/2+"px"),k[1]&&(I.loop||k[V+1])&&(te.style.cursor="pointer",te.onclick=function(){J.next()}),setTimeout(function(){re(te)},1)}),setTimeout(function(){te.src=W},1)):W&&S.load(W,I.data,function(ve,pe){re(pe==="error"?ee(Z,"Error").html(I.xhrError):e(this).contents())})},J.next=function(){!Ee&&k[1]&&(I.loop||k[V+1])&&(V=vt(1),J.load())},J.prev=function(){!Ee&&k[1]&&(I.loop||V)&&(V=vt(-1),J.load())},J.close=function(){he&&!we&&(we=!0,he=!1,ze(w,I.onCleanup),y.unbind("."+s+" ."+p),g.fadeTo(200,0),c.stop().fadeTo(300,0,function(){c.add(g).css({opacity:1,cursor:"auto"}).hide(),ze(m),C.empty().remove(),setTimeout(function(){we=!1,ze(b,I.onClosed)},1)}))},J.remove=function(){e([]).add(c).add(g).remove(),c=null,e("."+r).removeData(t).removeClass(r),e(i).unbind("click."+s)},J.element=function(){return e(X)},J.settings=a)})(jQuery,document,window);(function(e){e.fn.condense=function(r){var o=e.extend({},e.fn.condense.defaults,r);return this.each(function(){var u=e(this),f=e.metadata?e.extend({},o,u.metadata()):o,w=i(u,f);if(w){u.attr("id")&&u.attr("id","condensed_"+u.attr("id")),u.addClass("condenseable");var b=w,m=u;o.inline&&(b=b.children().last(),m=m.children().last());var p=" <span class='condense_control condense_control_more' style='cursor:pointer;'>"+f.moreText+"</span>",g=" <span class='condense_control condense_control_less' style='cursor:pointer;'>"+f.lessText+"</span>";b.append(f.ellipsis+p),u.after(w).hide(),m.append(g),e(".condense_control_more",w).click(function(){s(e(this),f)}),e(".condense_control_less",u).click(function(){t(e(this),f)})}})};function i(r,o){if(e.trim(r.text()).length<=o.condensedLength+o.minTrail)return!1;var u=e.trim(r.html()),f=e.trim(r.text()),w=r.clone(),b=0;do{var m=n(u,o.delim,o.condensedLength+b),p=e.trim(u.substring(0,m+1));w.html(p),w.addClass("condensed");var g=w.text().length;w.html().length,b=w.html().length-g}while(b&&w.text().length<o.condensedLength);return f.length-g<o.minTrail?!1:w}function n(r,o,u){var f=!1,w=u;do{if(w=r.indexOf(o,w),w<0)return r.length;for(f=!0;a(r,w);)w++,f=!1}while(!f);return w}function a(r,o){return r.indexOf(">",o)<r.indexOf("<",o)}function t(r,o){var u=r.closest(".condenseable"),f=u.next();f.show();var w=f.width(),b=f.height();f.hide();var m=u.width(),p=u.height();u.animate({height:b,width:w,opacity:1},o.lessSpeed,o.easing,function(){u.height(p).width(m).hide(),f.show()})}function s(r,o){var u=r.closest(".condensed"),f=u.prev();o.expandedWidth&&f.width(o.expandedWidth),f.show();var w=f.width(),b=f.height();if(f.width(u.width()+"px").height(u.height()+"px"),u.hide(),f.animate({height:b,width:w,opacity:1},o.moreSpeed,o.easing),u.attr("id")){var m=u.attr("id");u.attr("id","condensed_"+m),f.attr("id",m)}}e.fn.condense.defaults={condensedLength:200,minTrail:20,delim:" ",moreText:"[more]",lessText:"[less]",ellipsis:" ( ... )",inline:!0,moreSpeed:"normal",lessSpeed:"normal",easing:"linear"}})(jQuery);jQuery.cookie=function(e,i,n){if(typeof i<"u"){n=n||{},i===null&&(i="",n.expires=-1);var a="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var t;typeof n.expires=="number"?(t=new Date,t.setTime(t.getTime()+n.expires*24*60*60*1e3)):t=n.expires,a="; expires="+t.toUTCString()}var s=n.path?"; path="+n.path:"",r=n.domain?"; domain="+n.domain:"",o=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(i),a,s,r,o].join("")}else{var u=null;if(document.cookie&&document.cookie!="")for(var f=document.cookie.split(";"),w=0;w<f.length;w++){var b=jQuery.trim(f[w]);if(b.substring(0,e.length+1)==e+"="){u=decodeURIComponent(b.substring(e.length+1));break}}return u}};(function(e){var i=function(){var n={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},a={wrapper:'<div class="datepicker"><div class="datepickerBorderT" ></div><div class="datepickerBorderB" ></div><div class="datepickerBorderL" ></div><div class="datepickerBorderR" ></div><div class="datepickerBorderTL" ></div><div class="datepickerBorderTR" ></div><div class="datepickerBorderBL" ></div><div class="datepickerBorderBR" ></div><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',head:["<td>",'<table cellspacing="0" cellpadding="0">',"<thead>",'<tr class="datepickerHeader">','<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="5" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},t={flat:!1,insertionTarget:null,starts:1,prev:"&larr;",next:"&rarr;",lastSel:!1,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",eventName:"click",onRender:function(){return{}},onChange:function(){return!0},onShow:function(){return!0},onBeforeShow:function(){return!0},onHide:function(){return!0},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},s=function(y){var C=new Date(Date.parse(y)),S=28,T;for(T=C.getMonth(),S=28;C.getMonth()==T;)S++,C.setDate(S);return S-1},r=function(y,C){return i.getLocale(C?"months":"monthsShort")[y.getMonth()]},o=function(y,C){return i.getLocale(C?"days":"daysShort")[y.getDay()]},u=function(y){var C=new Date(y);C.setDate(C.getDate()-(C.getDay()+6)%7+3);var S=C.valueOf();return C.setMonth(0),C.setDate(4),Math.round((S-C.valueOf())/6048e5)+1},f=function(y){var C=new Date(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0),S=new Date(y.getFullYear(),0,0,0,0,0),T=C-S;return Math.floor(T/24*60*60*1e3)},w=function(y,C){y.setDate(y.getDate()+C)},b=function(y,C){var S=y.getDate();y.setDate(1),y.setMonth(y.getMonth()+C),y.setDate(Math.min(S,s(y)))},m=function(y,C){var S=y.getDate();y.setDate(1),y.setFullYear(y.getFullYear()+C),y.setDate(Math.min(S,s(y)))},p=function(y){var C=e(y).data("datepicker"),S=e(y),T=Math.floor(C.calendars/2),E,A,P,D,O=0,M,L,I,z,j;S.find("td>table tbody").remove();for(var B=0;B<C.calendars;B++){switch(E=new Date(C.current),b(E,-T+B),j=S.find("table").eq(B+1),j[0].className){case"datepickerViewDays":P=c(E,"B, Y");break;case"datepickerViewMonths":P=E.getFullYear();break;case"datepickerViewYears":P=E.getFullYear()-6+" - "+(E.getFullYear()+5);break}j.find("thead tr:first th:eq(1) span").text(P),P=E.getFullYear()-6,A={data:[],className:"datepickerYears"};for(var N=0;N<12;N++)A.data.push(P+N);z=rt(a.months.join(""),A),E.setDate(1),A={weeks:[],test:10},D=E.getMonth();var P=(E.getDay()-C.starts)%7;for(w(E,-(P+(P<0?7:0))),M=-1,O=0;O<42;){L=parseInt(O/7,10),I=O%7,A.weeks[L]||(M=u(E),A.weeks[L]={week:M,days:[]}),A.weeks[L].days[I]={text:E.getDate(),classname:[]},D!=E.getMonth()&&A.weeks[L].days[I].classname.push("datepickerNotInMonth"),E.getDay()==0&&A.weeks[L].days[I].classname.push("datepickerSunday"),E.getDay()==6&&A.weeks[L].days[I].classname.push("datepickerSaturday");var X=C.onRender(E),V=E.valueOf();(X.selected||C.date==V||e.inArray(V,C.date)>-1||C.mode=="range"&&V>=C.date[0]&&V<=C.date[1])&&A.weeks[L].days[I].classname.push("datepickerSelected"),X.disabled&&A.weeks[L].days[I].classname.push("datepickerDisabled"),X.className&&A.weeks[L].days[I].classname.push(X.className),A.weeks[L].days[I].classname=A.weeks[L].days[I].classname.join(" "),O++,w(E,1)}z=rt(a.days.join(""),A)+z,A={data:C.locale.monthsShort,className:"datepickerMonths"},z=rt(a.months.join(""),A)+z,j.append(z)}},g=function(y,C){if(y.constructor==Date)return new Date(y);for(var S=y.split(/\W+/),T=C.split(/\W+/),E,A,P,D,O,M=new Date,L=0;L<S.length;L++)switch(T[L]){case"d":case"e":E=parseInt(S[L],10);break;case"b":for(var L,A=0;A<i.getLocale("monthsShort").length&&i.getLocale("monthsShort")[A]!=S[L];A++);break;case"B":for(var L,A=0;A<i.getLocale("months").length&&i.getLocale("months")[A]!=S[L];A++);break;case"m":A=parseInt(S[L],10)-1;break;case"Y":case"y":P=parseInt(S[L],10),P+=P>100?0:P<29?2e3:1900;break;case"H":case"I":case"k":case"l":D=parseInt(S[L],10);break;case"P":case"p":/pm/i.test(S[L])&&D<12?D+=12:/am/i.test(S[L])&&D>=12&&(D-=12);break;case"M":O=parseInt(S[L],10);break}return new Date(P===void 0?M.getFullYear():P,A===void 0?M.getMonth():A,E===void 0?M.getDate():E,D===void 0?M.getHours():D,O===void 0?M.getMinutes():O,0)},c=function(y,C){var S=y.getMonth(),T=y.getDate(),E=y.getFullYear();u(y);var A=y.getDay(),P=y.getHours(),D=P>=12,O=D?P-12:P,M=f(y);O==0&&(O=12);for(var L=y.getMinutes(),I=y.getSeconds(),z=C.split(""),j,B=0;B<z.length;B++){switch(j=z[B],z[B]){case"a":j=o(y);break;case"A":j=o(y,!0);break;case"b":j=r(y);break;case"B":j=r(y,!0);break;case"C":j=1+Math.floor(E/100);break;case"d":j=T<10?"0"+T:T;break;case"e":j=T;break;case"H":j=P<10?"0"+P:P;break;case"I":j=O<10?"0"+O:O;break;case"j":j=M<100?M<10?"00"+M:"0"+M:M;break;case"k":j=P;break;case"l":j=O;break;case"m":j=S<9?"0"+(1+S):1+S;break;case"M":j=L<10?"0"+L:L;break;case"p":case"P":j=D?"PM":"AM";break;case"s":j=Math.floor(y.getTime()/1e3);break;case"S":j=I<10?"0"+I:I;break;case"u":j=A+1;break;case"w":j=A;break;case"y":j=(""+E).substr(2,2);break;case"Y":j=E;break}z[B]=j}return z.join("")},v=function(y){var C=e(y).data("datepicker"),S=e("#"+C.id);if(!C.extraHeight){var T=e(y).find("div");C.extraHeight=T.get(0).offsetHeight+T.get(1).offsetHeight,C.extraWidth=T.get(2).offsetWidth+T.get(3).offsetWidth}var E=S.find("table:first").get(0),A=E.offsetWidth,P=E.offsetHeight;S.css({width:A+C.extraWidth+"px",height:P+C.extraHeight+"px"}).find("div.datepickerContainer").css({width:A+"px",height:P+"px"})},h=function(y){e(y.target).is("span")&&(y.target=y.target.parentNode);var C=e(y.target);if(C.is("a")){if(y.target.blur(),C.hasClass("datepickerDisabled"))return!1;var S=e(this).data("datepicker"),T=C.parent(),E=T.parent().parent().parent(),A=e("table",this).index(E.get(0))-1,P=new Date(S.current),D=!1,O=!1;if(T.is("th")){if(T.hasClass("datepickerWeek")&&S.mode=="range"&&!T.next().hasClass("datepickerDisabled")){var M=parseInt(T.next().text(),10);b(P,A-Math.floor(S.calendars/2)),T.next().hasClass("datepickerNotInMonth")&&b(P,M>15?-1:1),P.setDate(M),S.date[0]=P.setHours(0,0,0,0).valueOf(),P.setHours(23,59,59,0),w(P,6),S.date[1]=P.valueOf(),O=!0,D=!0,S.lastSel=!1}else if(T.hasClass("datepickerMonth"))switch(b(P,A-Math.floor(S.calendars/2)),E.get(0).className){case"datepickerViewDays":E.get(0).className="datepickerViewMonths",C.find("span").text(P.getFullYear());break;case"datepickerViewMonths":E.get(0).className="datepickerViewYears",C.find("span").text(P.getFullYear()-6+" - "+(P.getFullYear()+5));break;case"datepickerViewYears":E.get(0).className="datepickerViewDays",C.find("span").text(c(P,"B, Y"));break}else if(T.parent().parent().is("thead")){switch(E.get(0).className){case"datepickerViewDays":b(S.current,T.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewMonths":m(S.current,T.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewYears":m(S.current,T.hasClass("datepickerGoPrev")?-12:12);break}O=!0}}else if(T.is("td")&&!T.hasClass("datepickerDisabled")){switch(E.get(0).className){case"datepickerViewMonths":var L=E.find("tbody.datepickerMonths td").index(T);S.current.setMonth(L),S.current.setFullYear(parseInt(E.find("thead th.datepickerMonth span").text(),10)),b(S.current,Math.floor(S.calendars/2)-A),E.get(0).className="datepickerViewDays";for(var I=0;I<3&&S.current.getMonth()!=L;I++)w(S.current,-1);break;case"datepickerViewYears":S.current.setFullYear(parseInt(C.text(),10)),E.get(0).className="datepickerViewMonths";break;default:var M=parseInt(C.text(),10);switch(b(P,A-Math.floor(S.calendars/2)),T.hasClass("datepickerNotInMonth")&&b(P,M>15?-1:1),P.setDate(M),S.mode){case"multiple":M=P.setHours(0,0,0,0).valueOf(),e.inArray(M,S.date)>-1?e.each(S.date,function(j,B){if(B==M)return S.date.splice(j,1),!1}):S.date.push(M);break;case"range":S.lastSel||(S.date[0]=P.setHours(0,0,0,0).valueOf()),M=P.setHours(23,59,59,0).valueOf(),M<S.date[0]?(S.date[1]=S.date[0]+86399e3,S.date[0]=M-86399e3):S.date[1]=M,S.lastSel=!S.lastSel;break;default:S.date=P.valueOf();break}break}O=!0,D=!0}O&&p(this),D&&e(y.target).closest("tbody").attr("class")=="datepickerDays"&&S.onChange.apply(this,l(S))}return!1},l=function(y){var C;return y.mode=="single"?(C=new Date(y.date),[c(C,y.format),C,y.el]):(C=[[],[],y.el],e.each(y.date,function(S,T){var E=new Date(T);C[0].push(c(E,y.format)),C[1].push(E)}),C)},d=function(){var y=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(y?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(y?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(y?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(y?document.documentElement.clientHeight:document.body.clientHeight)}},x=function(y,C,S){if(y==C)return!0;if(y.contains)return y.contains(C);if(y.compareDocumentPosition)return!!(y.compareDocumentPosition(C)&16);for(var T=C.parentNode;T&&T!=S;){if(T==y)return!0;T=T.parentNode}return!1},_=function(y){var C=e("#"+e(this).data("datepickerId"));if(!C.is(":visible")){var S=C.get(0);p(S);var T=C.data("datepicker");T.onBeforeShow.apply(this,[C.get(0)]),e.css(S,"display"),C.css({visibility:"hidden",display:"block"});var E=e(S).offsetParent().offset(),A=e(this).offset(),P={top:A.top-E.top,left:A.left-E.left},D=d(),O=P.top,M=P.left;switch(v(S),T.position){case"top":O-=S.offsetHeight;break;case"left":M-=S.offsetWidth;break;case"right":M+=this.offsetWidth;break;case"bottom":O+=this.offsetHeight;break}T.insertionTarget==null&&(O+S.offsetHeight>D.t+D.h&&(O=P.top-S.offsetHeight),O<D.t&&(O=P.top+this.offsetHeight+S.offsetHeight),M+S.offsetWidth>D.l+D.w&&(M=P.left-S.offsetWidth),M<D.l&&(T.position=="bottom"?M=D.l:M=P.left+this.offsetWidth)),C.css({visibility:"visible",display:"block",top:O+"px",left:M+"px"}),T.onShow.apply(this,[C.get(0)])!=!1&&C.show(),e(document).bind("mousedown",{cal:C,trigger:this},k)}return!1},k=function(y){y.target!=y.data.trigger&&!x(y.data.cal.get(0),y.target,y.data.cal.get(0))&&(y.data.cal.data("datepicker").onHide.apply(this,[y.data.cal.get(0)])!=!1&&y.data.cal.hide(),e(document).unbind("mousedown",k))};return{setLocale:function(y){this.locale=y},getLocale:function(y){return this.locale[y]},init:function(y){return y=e.extend({},t,y||{}),i.setLocale(y.locale),y.calendars=Math.max(1,parseInt(y.calendars,10)||1),y.mode=/single|multiple|range/.test(y.mode)?y.mode:"single",this.each(function(){if(!e(this).data("datepicker")){if(y.el=this,y.date.constructor==String&&(y.date=g(y.date,y.format),y.date.setHours(0,0,0,0)),y.mode!="single")if(y.date.constructor!=Array)y.date=[y.date.valueOf()],y.mode=="range"&&y.date.push(new Date(y.date[0]).setHours(23,59,59,0).valueOf());else{for(var C=0;C<y.date.length;C++)y.date[C]=g(y.date[C],y.format).setHours(0,0,0,0).valueOf();y.mode=="range"&&(y.date[1]=new Date(y.date[1]).setHours(23,59,59,0).valueOf())}else y.date=y.date.valueOf();y.current?y.current=g(y.current,y.format):y.current=new Date,y.current.setDate(1),y.current.setHours(0,0,0,0);var S="datepicker_"+parseInt(Math.random()*1e3),T;y.id=S,e(this).data("datepickerId",y.id);var E=e(a.wrapper).attr("id",S).bind("click",h).data("datepicker",y);y.className&&E.addClass(y.className);for(var A="",C=0;C<y.calendars;C++)T=y.starts,C>0&&(A+=a.space),A+=rt(a.head.join(""),{week:y.locale.weekMin,prev:y.prev,next:y.next,day1:y.locale.daysMin[T++%7],day2:y.locale.daysMin[T++%7],day3:y.locale.daysMin[T++%7],day4:y.locale.daysMin[T++%7],day5:y.locale.daysMin[T++%7],day6:y.locale.daysMin[T++%7],day7:y.locale.daysMin[T++%7]});E.find("tr:first").append(A).find("table").addClass(n[y.view]),p(E.get(0)),y.flat?(E.appendTo(this).show().css("position","relative"),v(E.get(0))):y.insertionTarget instanceof HTMLElement?(E.appendTo(y.insertionTarget),e(this).bind(y.eventName,_)):(E.appendTo(document.body),e(this).bind(y.eventName,_))}})},showPicker:function(){return this.each(function(){e(this).data("datepickerId")&&_.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("datepickerId")&&(e("#"+e(this).data("datepickerId")).hide(),e("#add-date").trigger("change")),e(this).focus()})},setDate:function(y,C){return this.each(function(){if(e(this).data("datepickerId")){var S=e("#"+e(this).data("datepickerId")),T=S.data("datepicker");if(T.date=y,T.date.constructor==String&&(T.date=g(T.date,T.format),T.date.setHours(0,0,0,0)),T.mode!="single")if(T.date.constructor!=Array)T.date=[T.date.valueOf()],T.mode=="range"&&T.date.push(new Date(T.date[0]).setHours(23,59,59,0).valueOf());else{for(var E=0;E<T.date.length;E++)T.date[E]=g(T.date[E],T.format).setHours(0,0,0,0).valueOf();T.mode=="range"&&(T.date[1]=new Date(T.date[1]).setHours(23,59,59,0).valueOf())}else T.date=T.date.valueOf();C&&(T.current=new Date(T.mode!="single"?T.date[0]:T.date)),p(S.get(0))}})},getDate:function(y){if(this.length>0)return l(e("#"+e(this).data("datepickerId")).data("datepicker"))[y?0:1]},clear:function(){return this.each(function(){if(e(this).data("datepickerId")){var y=e("#"+e(this).data("datepickerId")),C=y.data("datepicker");C.mode!="single"&&(C.date=[],p(y.get(0)))}})},fixLayout:function(){return this.each(function(){if(e(this).data("datepickerId")){var y=e("#"+e(this).data("datepickerId")),C=y.data("datepicker");C.flat&&v(y.get(0))}})}}}();e.fn.extend({DatePicker:i.init,DatePickerHide:i.hidePicker,DatePickerShow:i.showPicker,DatePickerSetDate:i.setDate,DatePickerGetDate:i.getDate,DatePickerClear:i.clear,DatePickerLayout:i.fixLayout})})(window.jQuery);var rt;(function(){var e={};rt=function i(n,a){var t=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[n]=e[n]||i(document.getElementById(n).innerHTML);return a?t(a):t}})();(function(e){var i=e.event,n,a;n=i.special.debouncedresize={setup:function(){e(this).on("resize",n.handler)},teardown:function(){e(this).off("resize",n.handler)},handler:function(t,s){var r=this,o=arguments,u=function(){t.type="debouncedresize",i.dispatch.apply(r,o)};a&&clearTimeout(a),s?u():a=setTimeout(u,n.threshold)},threshold:150}})(jQuery);(function(e){typeof e.easing<"u"&&(e.easing.jswing=e.easing.swing);var i=Math.pow,n=Math.sqrt,a=Math.sin,t=Math.cos,s=Math.PI,r=1.70158,o=r*1.525,u=r+1,f=2*s/3,w=2*s/4.5;function b(m){var p=7.5625,g=2.75;return m<1/g?p*m*m:m<2/g?p*(m-=1.5/g)*m+.75:m<2.5/g?p*(m-=2.25/g)*m+.9375:p*(m-=2.625/g)*m+.984375}return e.extend(e.easing,{def:"easeOutQuad",swing:function(m){return e.easing[e.easing.def](m)},easeInQuad:function(m){return m*m},easeOutQuad:function(m){return 1-(1-m)*(1-m)},easeInOutQuad:function(m){return m<.5?2*m*m:1-i(-2*m+2,2)/2},easeInCubic:function(m){return m*m*m},easeOutCubic:function(m){return 1-i(1-m,3)},easeInOutCubic:function(m){return m<.5?4*m*m*m:1-i(-2*m+2,3)/2},easeInQuart:function(m){return m*m*m*m},easeOutQuart:function(m){return 1-i(1-m,4)},easeInOutQuart:function(m){return m<.5?8*m*m*m*m:1-i(-2*m+2,4)/2},easeInQuint:function(m){return m*m*m*m*m},easeOutQuint:function(m){return 1-i(1-m,5)},easeInOutQuint:function(m){return m<.5?16*m*m*m*m*m:1-i(-2*m+2,5)/2},easeInSine:function(m){return 1-t(m*s/2)},easeOutSine:function(m){return a(m*s/2)},easeInOutSine:function(m){return-(t(s*m)-1)/2},easeInExpo:function(m){return m===0?0:i(2,10*m-10)},easeOutExpo:function(m){return m===1?1:1-i(2,-10*m)},easeInOutExpo:function(m){return m===0?0:m===1?1:m<.5?i(2,20*m-10)/2:(2-i(2,-20*m+10))/2},easeInCirc:function(m){return 1-n(1-i(m,2))},easeOutCirc:function(m){return n(1-i(m-1,2))},easeInOutCirc:function(m){return m<.5?(1-n(1-i(2*m,2)))/2:(n(1-i(-2*m+2,2))+1)/2},easeInElastic:function(m){return m===0?0:m===1?1:-i(2,10*m-10)*a((m*10-10.75)*f)},easeOutElastic:function(m){return m===0?0:m===1?1:i(2,-10*m)*a((m*10-.75)*f)+1},easeInOutElastic:function(m){return m===0?0:m===1?1:m<.5?-(i(2,20*m-10)*a((20*m-11.125)*w))/2:i(2,-20*m+10)*a((20*m-11.125)*w)/2+1},easeInBack:function(m){return u*m*m*m-r*m*m},easeOutBack:function(m){return 1+u*i(m-1,3)+r*i(m-1,2)},easeInOutBack:function(m){return m<.5?i(2*m,2)*((o+1)*2*m-o)/2:(i(2*m-2,2)*((o+1)*(m*2-2)+o)+2)/2},easeInBounce:function(m){return 1-b(1-m)},easeOutBounce:b,easeInOutBounce:function(m){return m<.5?(1-b(1-2*m))/2:(1+b(2*m-1))/2}}),e})(gi);/*!
 * jNotify jQuery Plug-in
 *
 * Copyright 2010 Giva, Inc. (http://www.givainc.com/labs/) 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * 	http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2010-09-30
 * Rev:  1.1.00
 */(function(e){e.jnotify=function(w,b,m){return new f(w,b,m)},e.jnotify.version="1.1.00";var i,n=[],a=0,t=!1,s=!1,r,o,u={type:"",delay:2e3,sticky:!1,closeLabel:"&times;",showClose:!0,fadeSpeed:1e3,slideSpeed:250,classContainer:"jnotify-container",classNotification:"jnotify-notification",classBackground:"jnotify-background",classClose:"jnotify-close",classMessage:"jnotify-message",init:null,create:null,beforeRemove:null,remove:null,transition:null};e.jnotify.setup=function(w){u=e.extend({},u,w)},e.jnotify.play=function(w,b){if(!(t&&w!==!0||n.length==0)){t=!0;var m=n.shift();o=m;var p=arguments.length>=2?parseInt(b,10):m.options.delay;r=setTimeout(function(){r=0,m.remove(function(){n.length==0?t=!1:s||e.jnotify.play(!0)})},p)}},e.jnotify.pause=function(){clearTimeout(r),r&&n.unshift(o),s=t=!0},e.jnotify.resume=function(){s=!1,e.jnotify.play(!0,0)},e.jnotify.clear=function(w){for(t&&e.jnotify.pause();n.length>1;){var b=n.shift();b.remove()}e.jnotify.resume(),e.isFunction(w)&&w.apply(self,[i])};function f(w,b){var m=this,p=typeof b;p=="number"?b=e.extend({},u,{delay:b}):p=="boolean"?b=e.extend({},u,{sticky:!0}):p=="string"?b=e.extend({},u,{type:b,delay:arguments.length>2&&typeof arguments[2]=="number"?arguments[2]:u.delay,sticky:arguments.length>2&&typeof arguments[2]=="boolean"?arguments[2]:u.sticky}):b=e.extend({},u,b),this.options=b,i||(i=e('<div class="'+u.classContainer+'" />').appendTo("body"),e.isFunction(b.init)&&b.init.apply(m,[i]));function g(v){var h='<div class="'+b.classNotification+(b.type.length?" "+b.classNotification+"-"+b.type:"")+'"><div class="'+b.classBackground+'"></div>'+(b.showClose?'<a class="'+b.classClose+'">'+b.closeLabel+"</a>":"")+'<div class="'+b.classMessage+'"><div>'+v+"</div></div></div>";a++;var l=e(h);return b.showClose&&l.find("a."+b.classClose).bind("click.jnotify",function(){m.remove()}),e.isFunction(b.create)&&b.create.apply(m,[l]),window.isTouchOnly?l.hide().appendTo(i).fadeIn():l.hide().appendTo(i).slideDown("fast")}this.remove=function(v){var h=c.find("."+b.classMessage),l=h.parent(),d=a--;e.isFunction(b.beforeRemove)&&b.beforeRemove.apply(m,[h]);function x(){window.isTouchOnly?l.fadeOut(function(){e(this).remove()}):l.slideUp(b.slideSpeed,function(){e(this).remove()}),e.isFunction(v)&&v.apply(m,[h]),e.isFunction(b.remove)&&b.remove.apply(m,[h])}e.isFunction(b.transition)?b.transition.apply(m,[l,h,d,x,b]):(h.fadeTo(b.fadeSpeed,.01,function(){d<=1?x():window.isTouchOnly?l.fadeOut(function(){x()}):l.slideUp(b.slideSpeed,x)}),a<=0&&(window.isTouchOnly?l.fadeOut():l.slideUp(b.slideSpeed)))};var c=g(w);return b.sticky||(n.push(this),e.jnotify.play()),this}})(jQuery);(function(e,i,n,a){var t=e(i);e.fn.lazyload=function(s){var r=this,o,u={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",data_srcset:"srcset",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUHAAAALAAAAAABAAEAAAICRAEAOw=="};function f(){var w=0;r.each(function(){var b=e(this);if(!(u.skip_invisible&&!b.is(":visible"))&&!(e.abovethetop(this,u)||e.leftofbegin(this,u))){if(!e.belowthefold(this,u)&&!e.rightoffold(this,u))b.trigger("appear"),w=0;else if(++w>u.failure_limit)return!1}})}return s&&(a!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),a!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(u,s)),o=u.container===a||u.container===i?t:e(u.container),u.event.indexOf("scroll")===0&&o.bind(u.event,function(){return f()}),this.each(function(){var w=this,b=e(w);w.loaded=!1,(b.attr("src")===a||b.attr("src")===!1)&&b.is("img")&&b.attr("src",u.placeholder),b.one("appear",function(){if(!this.loaded){if(u.appear){var m=r.length;u.appear.call(w,m,u)}e("<img />").bind("load",function(){var p=b.attr("data-"+u.data_attribute),g=b.attr("data-"+u.data_srcset);b.hide(),b.is("img")?(b.attr("src",p),b.attr("srcset",g)):(b.css("background-image","url("./p.html")"),b.show()),b[u.effect](u.effect_speed),w.loaded=!0;var c=e.grep(r,function(h){return!h.loaded});if(r=e(c),u.load){var v=r.length;u.load.call(w,v,u)}}).attr("src",b.attr("data-"+u.data_attribute)).attr("srcset",b.attr("data-"+u.data_srcset))}}),u.event.indexOf("scroll")!==0&&b.bind(u.event,function(){w.loaded||b.trigger("appear")})}),t.bind("resize",function(){f()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&t.bind("pageshow",function(w){w.originalEvent&&w.originalEvent.persisted&&r.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){f()}),this},e.belowthefold=function(s,r){var o;return r.container===a||r.container===i?o=(i.innerHeight?i.innerHeight:t.height())+t.scrollTop():o=e(r.container).offset().top+e(r.container).height(),o<=e(s).offset().top-r.threshold},e.rightoffold=function(s,r){var o;return r.container===a||r.container===i?o=t.width()+t.scrollLeft():o=e(r.container).offset().left+e(r.container).width(),o<=e(s).offset().left-r.threshold},e.abovethetop=function(s,r){var o;return r.container===a||r.container===i?o=t.scrollTop():o=e(r.container).offset().top,o>=e(s).offset().top+r.threshold+e(s).height()},e.leftofbegin=function(s,r){var o;return r.container===a||r.container===i?o=t.scrollLeft():o=e(r.container).offset().left,o>=e(s).offset().left+r.threshold+e(s).width()},e.inviewport=function(s,r){return!e.rightoffold(s,r)&&!e.leftofbegin(s,r)&&!e.belowthefold(s,r)&&!e.abovethetop(s,r)},e.extend(e.expr[":"],{"below-the-fold":function(s){return e.belowthefold(s,{threshold:0})},"above-the-top":function(s){return!e.belowthefold(s,{threshold:0})},"right-of-screen":function(s){return e.rightoffold(s,{threshold:0})},"left-of-screen":function(s){return!e.rightoffold(s,{threshold:0})},"in-viewport":function(s){return e.inviewport(s,{threshold:0})},"above-the-fold":function(s){return!e.belowthefold(s,{threshold:0})},"right-of-fold":function(s){return e.rightoffold(s,{threshold:0})},"left-of-fold":function(s){return!e.rightoffold(s,{threshold:0})}})})(jQuery,window,document);/*!
 * jQuery.localScroll
 * Copyright (c) 2007-2013 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html
 * @author Ariel Flesler
 * @version 1.3.1
 */(function(e){var i=location.href.replace(/#.*/,""),n=e.localScroll=function(t){e("body").localScroll(t)};n.defaults={duration:1e3,axis:"y",event:"click",stop:!0,target:window},e.fn.localScroll=function(t){return t=e.extend({},n.defaults,t),t.hash&&location.hash&&(t.target&&window.scrollTo(0,0),a(0,location,t)),t.lazy?this.bind(t.event,function(r){var o=e([r.target,r.target.parentNode]).filter(s)[0];o&&a(r,o,t)}):this.find("a,area").filter(s).bind(t.event,function(r){a(r,this,t)}).end().end();function s(){return!!this.href&&!!this.hash&&this.href.replace(this.hash,"")==i&&(!t.filter||e(this).is(t.filter))}},n.hash=function(){};function a(t,s,r){var o=s.hash.slice(1),u=document.getElementById(o)||document.getElementsByName(o)[0];if(u){t&&t.preventDefault();var f=e(r.target);if(!(r.lock&&f.is(":animated")||r.onBefore&&r.onBefore(t,u,f)===!1)){if(r.stop&&f._scrollable().stop(!0),r.hash){var w=r.offset;w=w&&w.top||w||0;var b=u.id==o?"id":"name",m=e("<a> </a>").attr(b,o).css({position:"absolute",top:e(window).scrollTop()+w,left:e(window).scrollLeft()});u[b]="",e("body").prepend(m),location=s.hash,m.remove(),u[b]=o}f.scrollTo(u,r).trigger("notify.serialScroll",[u])}}}})(jQuery);(function(e){var i="overthrow",n=typeof console>"u"?function(){}:function(t){console.error(t)};e.easing.easeOutQuart=function(t,s,r,o,u){return-o*((s=s/u-1)*s*s*s-1)+r},e.support.transition=function(){var t=document.body||document.documentElement,s=t.style,r=s.transition!==void 0||s.WebkitTransition!==void 0||s.MozTransition!==void 0||s.MsTransition!==void 0||s.OTransition!==void 0;return r}();var a=function(t,s){this.$el=e(t),this.options=e.extend(!0,{},this.defaults,s),this.options.nestCloseButton?this.container='<div class="overthrow"><div class="overthrow-shield"></div><div class="overthrow-shim"></div><div class="overthrow-wrapper"><div class="overthrow-outer"><div class="overthrow-inner"><div class="overthrow-content"></div><a href="#" class="overthrow-close">Close</a></div></div></div></div>':this.container='<div class="overthrow"><div class="overthrow-shield"></div><div class="overthrow-shim"></div><div class="overthrow-wrapper"><div class="overthrow-outer"><div class="overthrow-inner"><div class="overthrow-content"></div></div></div></div><a href="#" class="overthrow-close">Close</a></div>',this.hasTransitions=e.support.transition,this.transitionDuration=200,this._init()};a.prototype={defaults:{customClass:null,afterLoad:null,youtubeEmbed:!1,disableForTouch:!1,duration:200,aspect:.65,targetAttribute:"href",nestCloseButton:!1,lazyLoad:!1},_init:function(){var t=this;t.$window=e(window),t.$document=e(document),t.$body=e("body"),t.touch=t._touchEnabled(),t.$container=e(t.container),t.$content=t.$container.find(".overthrow-content"),t.$close=t.$container.find(".overthrow-close"),t.options.customClass=t.$el.data("overthrow-class")||t.options.customClass,t.options.target=t.$el.attr(t.options.targetAttribute),t.hasTransitions&&e("html").addClass("overthrow-transitions"),t._bindings()},_bindings:function(){var t=this;t.$el.on("click."+i,function(s){if(!(t.options.disableForTouch&&t.touch)){if(s.preventDefault(),t.options.customClass&&t.$container.addClass(t.options.customClass),t.$body.addClass("overthrow-open"),t.options.target.substring(0,1)==="#"||t.options.target.substring(0,1)===".")return t.loadInline();if(t._checkImageExtensions()){if(typeof imagesLoaded<"u")return t.loadImage();console.warn("Overthrow requires the imagesLoaded plugin for showing images");return}else return t.loadAjax()}})},loadInline:function(){var t=this;t.$content.html(e(""+t.options.target).html()),t.showOverthrow()},loadImage:function(){var t=this,s=t.$el.data("srcset"),r=t.$el.data("sizes"),o=t.$el.data("aspect-ratio"),u;t.options.lazyLoad?u='<img srcset="'+s+'" sizes="'+r+'" alt="" class="lazyload">':u='<img src="'+t.options.target+'" srcset="'+s+'" sizes="'+r+'" alt="" class="lazyload">';var f='<div class="overthrow-image-container">'+u+"</div>";t.$content.addClass("-image").html(f),t.image={$el:t.$content.find("img")};var w=imagesLoaded(t.$content);w.on("always",function(){var b=w.images[0];t.image.width=b.img.width,t.image.height=b.img.height,typeof o<"u"?t.image.aspect=o:t.image.aspect=b.img.width/b.img.height}),t.showOverthrow("image")},_checkImageExtensions:function(){var t=this,s=t.options.target.substr(t.options.target.lastIndexOf("."),4),r=[".jpe",".jpg",".gif",".png"];return e.inArray(s,r)>-1},_resizeImage:function(){var t=this;if(t.image){var s=!1,r=t.$content.innerWidth()/t.$content.innerHeight();r>t.image.aspect&&(s=!0),s?t.$content.removeClass("-landscape").addClass("-portrait"):t.$content.removeClass("-portrait").addClass("-landscape")}},loadAjax:function(){var t=this,s=t.getVideourl("./main-CFwKiP02.js.mjs");if(t.options.youtubeEmbed||s)if(s){var r='<div class="overthrow-video-container"><iframe src="'+s+'" allowfullscreen  allow="autoplay; fullscreen"></iframe></div>';t.$content.html(r),t.showOverthrow()}else return alert("Sorry, that video link seems to be invalid."),!1;else e.ajax({url:t.options.target,dataType:"html",success:function(o,u,f){t.$content.html(o),t.showOverthrow()},error:function(o,u,f){alert("Error: "+f),t.closeOverthrow()}})},loadNewAjaxContent:function(t,s){var r=this;e.ajax({url:t,dataType:"html",success:function(o,u,f){r.$content.html(o),s&&s(r)},error:function(o,u,f){alert("Error: "+f),r.closeOverthrow()}})},getVideoUrl:function(){var t=this,s=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,r=/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/,o=t.options.target.match(s),u=t.options.target.match(r),f;return o&&(f="//www.youtube.com/embed/"+o[1],o.indexOf("autoplay=1")===-1&&o.indexOf("?")>-1?f+="&rel=0&playsinline=1&autoplay=1":o.indexOf("autoplay=1")===-1&&(f+="?rel=0&playsinline=1&autoplay=1")),u&&(f="//player.vimeo.com/video/"+u[4],f+="?autoplay=1&title=0&byline=0&portrait=0"),o||u?f:!1},showOverthrow:function(t){var s=this,r=s.$window.height()/s.$window.width();r<s.options.aspect&&s.$body.addClass("overthrow-switch-aspect"),s.$body.append(s.$container),s.$body.addClass("overthrow-enable"),s.$close.on("click",function(o){o.preventDefault(),event.stopPropagation(),s.closeOverthrow()}),s.$container.on("click",".overthrow-wrapper",function(o){e(o.target).hasClass("overthrow-wrapper")&&s.closeOverthrow()}),s.hasTransitions?(setTimeout(function(){s.$body.addClass("overthrow-trans-in")},10),setTimeout(function(){s.$close.addClass("overthrow-close-active"),t==="image"&&s.image&&(s._resizeImage(),s.$content.addClass("-visible"))},s.options.duration)):(s.$body.addClass("overthrow-show"),s.$close.addClass("overthrow-close-active")),s.$document.on("keyup",function(o){o.which===27&&s.closeOverthrow()}),s.options.afterLoad&&s.options.afterLoad(s),s.$container.trigger("ajaxload")},_touchEnabled:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},option:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))},closeOverthrow:function(){var t=this;t.hasTransitions?(t.$body.removeClass("overthrow-trans-in").addClass("overthrow-trans-out"),setTimeout(function(){t.$body.removeClass("overthrow-trans-out"),t.$close.removeClass("overthrow-close-active"),t.$content.removeClass("-visible -landscape -portrait").html(""),t.$body.addClass("overthrow-hide"),setTimeout(function(){t.$body.removeClass("overthrow-enable"),t.$body.removeClass("overthrow-hide"),t.$body.removeClass("overthrow-open"),t.$body.removeClass("overthrow-switch-aspect"),t.$container.remove()},t.transitionDuration)},t.transitionDuration)):(t.$close.removeClass("overthrow-close-active"),t.$body.removeClass("overthrow-show"),t.$content.removeClass("-visible -landscape -portrait").html(""),t.$body.addClass("overthrow-hide"),t.$body.removeClass("overthrow-enable"),t.$body.removeClass("overthrow-hide"),t.$body.removeClass("overthrow-open"),t.$body.removeClass("overthrow-switch-aspect"),t.$container.remove())}},e.fn[i]=function(t){if(typeof t=="string"){for(var s=Array.prototype.slice.call(arguments,1),r=0,o=this.length;r<o;r++){var u=this[r],f=e.data(u,i);if(!f){n("cannot call methods on "+i+" prior to initialization; attempted to call '"+t+"'");continue}if(!e.isFunction(f[t])||t.charAt(0)==="_"){n("no such method '"+t+"' for "+i+" instance");continue}var w=f[t].apply(f,s);if(w!==void 0)return w}return this}else return this.each(function(){var b=e.data(this,i);b?(b.option(t||{}),b._init()):(b=new a(this,t),e.data(this,i,b))})}})(jQuery);(function(e){e.fn.padme=function(i){var n=e.extend({},e.fn.padme.defaults,i);function a(s,r){if(s>0){for(var o="",u=0;u<r.cols-s;u++)o+=" "+r.placeholder;r.$group.append(o)}}function t(s){s.$group.find("."+n.placeholderClass).each(function(){e(this).position().top>s.top&&e(this).remove()})}return this.each(function(){var s=e(this).data("padme-cols"),r={$group:e(this),cols:n.cols?n.cols:s};if(r.cols!==null&&r.cols>1&&(n.children?r.$items=r.$group.children(n.children).not("."+n.placeholderClass):r.$items=r.$group.children().not("."+n.placeholderClass),r.$items.length>0)){var o;n.placeholderEl?o=n.placeholderEl:o=r.$items.eq(0).prop("tagName"),r.placeholder="<"+o+' class="'+n.placeholderClass+'"></'+o+">",r.$group.find("."+n.placeholderClass).remove();var u=1;if(n.allowExtras){var f=r.$items.length-1;r.top=r.$items.eq(f).position().top;for(var u=1,w=r.top,b=!1;u<r.cols&&!b&&f>0;){f--;var m=r.$items.eq(f);m.length?(w=m.position().top,w>=r.top?u++:b=!0):b=!0}}else u=r.$items.length%r.cols;a(u,r),n.removeOverflow&&t(r)}})},e.fn.padme.defaults={cols:null,children:null,placeholderEl:null,placeholderClass:"placeholder",removeOverflow:!1,allowExtras:!1}})(jQuery);(function(e){e.fn.popupWindow=function(i){if(this.length)return this.each(function(){e(this).click(function(){n(i)})});n(i);function n(a){e.fn.popupWindow.defaultSettings={centerBrowser:0,centerScreen:0,height:500,left:0,location:0,menubar:0,resizable:0,scrollbars:0,status:0,width:500,windowName:null,windowURL:null,top:0,toolbar:0};var t=e.extend({},e.fn.popupWindow.defaultSettings,a||{}),s="height="+t.height+",width="+t.width+",toolbar="+t.toolbar+",scrollbars="+t.scrollbars+",status="+t.status+",resizable="+t.resizable+",location="+t.location+",menuBar="+t.menubar;t.windowName=this&&this.name||t.windowName,t.windowURL=this&&this.href||t.windowURL;var r,o;return t.centerBrowser?(navigator.userAgent.match(/msie/i)?(r=window.screenTop-120+((document.documentElement.clientHeight+120)/2-t.height/2),o=window.screenLeft+((document.body.offsetWidth+20)/2-t.width/2)):(r=window.screenY+(window.outerHeight/2-t.height/2),o=window.screenX+(window.outerWidth/2-t.width/2)),window.open(t.windowURL,t.windowName,s+",left="+o+",top="+r).focus()):t.centerScreen?(r=(screen.height-t.height)/2,o=(screen.width-t.width)/2,window.open(t.windowURL,t.windowName,s+",left="+o+",top="+r).focus()):window.open(t.windowURL,t.windowName,s+",left="+t.left+",top="+t.top).focus(),!1}}})(jQuery);var Zs=us();(function(e,i,n,a){globals.comps||(globals.comps={}),globals.comps.LikeComponent=hs,globals.comps.PosterComponent=vs,globals.comps.WatchLinkComponent=bs;function t(s,r){var o=r.split("."),u=s,f;for(f=0;f<o.length&&u!==a&&u!==null;f++){if(o[f]==="constructor")throw exception("Illegal attempt to access 'constructor' keyword for property: "+r);if(u&&u.constructor===u)throw exception("Illegal attempt to access Function constructor for property: "+r);u=u[o[f]]}if(f===o.length){if(u&&u.constructor===u)throw exception("Illegal attempt to access Function constructor for property: "+r);return u}else return a}e.fn.react=function(s){s=e.extend({componentClassName:"componentClass"},s),this.each(function(){var r=e(this),o=r.data(s.componentClassName);if(o){var u=t(i,o);if(u){var f;typeof u.propsFrom=="function"?f=u.propsFrom(this):f=r.data();const w=fs.createRoot(this);Zs.flushSync(()=>{w.render(F.createElement(u,f))})}else n!==a&&n.warn("jquery.react: Component class not found: "+o)}else n!==a&&n.warn("jquery.react: No component class data found for",this)})}})(gi,window,console);/*!
 * jQuery.scrollTo
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * @projectDescription Lightweight, cross-browser and highly customizable animated scrolling with jQuery
 * @author Ariel Flesler
 * @version 2.1.2
 */(function(e){var i=e.scrollTo=function(t,s,r){return e(window).scrollTo(t,s,r)};i.defaults={axis:"xy",duration:0,limit:!0};function n(t){return!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1}e.fn.scrollTo=function(t,s,r){typeof s=="object"&&(r=s,s=0),typeof r=="function"&&(r={onAfter:r}),t==="max"&&(t=9e9),r=e.extend({},i.defaults,r),s=s||r.duration;var o=r.queue&&r.axis.length>1;return o&&(s/=2),r.offset=a(r.offset),r.over=a(r.over),this.each(function(){if(t===null)return;var u=n(this),f=u?this.contentWindow||window:this,w=e(f),b=t,m={},p;switch(typeof b){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(b)){b=a(b);break}b=u?e(b):e(b,f);case"object":if(b.length===0)return;(b.is||b.style)&&(p=(b=e(b)).offset())}var g=e.isFunction(r.offset)&&r.offset(f,b)||r.offset;e.each(r.axis.split(""),function(v,h){var l=h==="x"?"Left":"Top",d=l.toLowerCase(),x="scroll"+l,_=w[x](),k=i.max(f,h);if(p)m[x]=p[d]+(u?0:_-w.offset()[d]),r.margin&&(m[x]-=parseInt(b.css("margin"+l),10)||0,m[x]-=parseInt(b.css("border"+l+"Width"),10)||0),m[x]+=g[d]||0,r.over[d]&&(m[x]+=b[h==="x"?"width":"height"]()*r.over[d]);else{var y=b[d];m[x]=y.slice&&y.slice(-1)==="%"?parseFloat(y)/100*k:y}r.limit&&/^\d+$/.test(m[x])&&(m[x]=m[x]<=0?0:Math.min(m[x],k)),!v&&r.axis.length>1&&(_===m[x]?m={}:o&&(c(r.onAfterFirst),m={}))}),c(r.onAfter);function c(v){var h=e.extend({},r,{queue:!0,duration:s,complete:v&&function(){v.call(f,b,r)}});w.animate(m,h)}})},i.max=function(t,s){var r=s==="x"?"Width":"Height",o="scroll"+r;if(!n(t))return t[o]-e(t)[r.toLowerCase()]();var u="client"+r,f=t.ownerDocument||t.document,w=f.documentElement,b=f.body;return Math.max(w[o],b[o])-Math.min(w[u],b[u])};function a(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}return e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var s=this.get(t);if(t.options.interrupt&&t._last&&t._last!==s)return e(t.elem).stop();var r=Math.round(t.now);s!==r&&(e(t.elem)[t.prop](r),t._last=this.get(t))}},i})(gi);/*! Smooth Scroll - v1.4.6 - 2012-08-23
* Copyright (c) 2012 Karl Swedberg; Licensed MIT, GPL */(function(e){var i="1.4.6",n={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},a=function(s){var r=[],o=!1,u=s.dir&&s.dir=="left"?"scrollLeft":"scrollTop";return this.each(function(){if(!(this==document||this==window)){var f=e(this);f[u]()>0?r.push(this):(f[u](1),o=f[u]()>0,o&&r.push(this),f[u](0))}}),r.length||this.each(function(f){this.nodeName==="BODY"&&(r=[this])}),s.el==="first"&&r.length>1&&(r=[r[0]]),r};e.fn.extend({scrollable:function(s){var r=a.call(this,{dir:s});return this.pushStack(r)},firstScrollable:function(s){var r=a.call(this,{el:"first",dir:s});return this.pushStack(r)},smoothScroll:function(s){s=s||{};var r=e.extend({},e.fn.smoothScroll.defaults,s),o=e.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(u){var f=this,w=e(this),b=r.exclude,m=r.excludeWithin,p=0,g=0,c=!0,v={},h=location.hostname===f.hostname||!f.hostname,l=r.scrollTarget||(e.smoothScroll.filterPath(f.pathname)||o)===o,d=t(f.hash);if(!r.scrollTarget&&(!h||!l||!d))c=!1;else{for(;c&&p<b.length;)w.is(t(b[p++]))&&(c=!1);for(;c&&g<m.length;)w.closest(m[g++]).length&&(c=!1)}c&&(u.preventDefault(),e.extend(v,r,{scrollTarget:r.scrollTarget||d,link:f}),e.smoothScroll(v))}),this}}),e.smoothScroll=function(s,r){var o,u,f,w,b=0,m="offset",p="scrollTop",g={},c={};typeof s=="number"?(o=e.fn.smoothScroll.defaults,f=s):(o=e.extend({},e.fn.smoothScroll.defaults,s||{}),o.scrollElement&&(m="position",o.scrollElement.css("position")=="static"&&o.scrollElement.css("position","relative")),f=r||e(o.scrollTarget)[m]()&&e(o.scrollTarget)[m]()[o.direction]||0),o=e.extend({link:null},o),p=o.direction=="left"?"scrollLeft":p,o.scrollElement?(u=o.scrollElement,b=u[p]()):u=e("html, body").firstScrollable(),g[p]=f+b+o.offset,o.beforeScroll.call(u,o),w=o.speed,w==="auto"&&(w=g[p]||u.scrollTop(),w=w/o.autoCoefficent),c={duration:w,easing:o.easing,complete:function(){o.afterScroll.call(o.link,o)}},o.step&&(c.step=o.step),u.length?u.stop().animate(g,c):o.afterScroll.call(o.link,o)},e.smoothScroll.version=i,e.smoothScroll.filterPath=function(s){return s.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},e.fn.smoothScroll.defaults=n;function t(s){return s.replace(/(:|\.)/g,"\\$1")}})(jQuery);/**
@license Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net
 */(function(){var e,i;e=window.jQuery,i=e(window),e.fn.stick_in_parent=function(n){var a,t,s,r,o,u,f,w,b,m,p,g;for(n==null&&(n={}),g=n.sticky_class,u=n.inner_scrolling,p=n.recalc_every,m=n.parent,b=n.offset_top,w=n.spacer,s=n.bottoming,b==null&&(b=0),m==null&&(m=void 0),u==null&&(u=!0),g==null&&(g="is_stuck"),a=e(document),s==null&&(s=!0),r=function(c,v,h,l,d,x,_,k){var y,C,S,T,E,A,P,D,O,M,L,I;if(!c.data("sticky_kit")){if(c.data("sticky_kit",!0),E=a.height(),P=c.parent(),m!=null&&(P=P.closest(m)),!P.length)throw"failed to find stick parent";if(S=!1,y=!1,L=w!=null?w&&c.closest(w):e("<div />"),L&&L.css("position",c.css("position")),D=function(){var z,j,B;if(!k&&(E=a.height(),z=parseInt(P.css("border-top-width"),10),j=parseInt(P.css("padding-top"),10),v=parseInt(P.css("padding-bottom"),10),h=P.offset().top+z+j,l=P.height(),S&&(S=!1,y=!1,w==null&&(c.insertAfter(L),L.detach()),c.css({position:"",top:"",width:"",bottom:""}).removeClass(g),B=!0),d=c.offset().top-(parseInt(c.css("margin-top"),10)||0)-b,x=c.outerHeight(!0),_=c.css("float"),L&&L.css({width:c.outerWidth(!0),height:x,display:c.css("display"),"vertical-align":c.css("vertical-align"),float:_}),B))return I()},D(),x!==l)return T=void 0,A=b,M=p,I=function(){var z,j,B,N,X,V;if(!k&&(B=!1,M!=null&&(M-=1,M<=0&&(M=p,D(),B=!0)),!B&&a.height()!==E&&(D(),B=!0),N=i.scrollTop(),T!=null&&(j=N-T),T=N,S?(s&&(X=N+x+A>l+h,y&&!X&&(y=!1,c.css({position:"fixed",bottom:"",top:A}).trigger("sticky_kit:unbottom"))),N<d&&(S=!1,A=b,w==null&&((_==="left"||_==="right")&&c.insertAfter(L),L.detach()),z={position:"",width:"",top:""},c.css(z).removeClass(g).trigger("sticky_kit:unstick")),u&&(V=i.height(),x+b>V&&(y||(A-=j,A=Math.max(V-x,A),A=Math.min(b,A),S&&c.css({top:A+"px"}))))):N>d&&(S=!0,z={position:"fixed",top:A},z.width=c.css("box-sizing")==="border-box"?c.outerWidth()+"px":c.width()+"px",c.css(z).addClass(g),w==null&&(c.after(L),(_==="left"||_==="right")&&L.append(c)),c.trigger("sticky_kit:stick")),S&&s&&(X==null&&(X=N+x+A>l+h),!y&&X)))return y=!0,P.css("position")==="static"&&P.css({position:"relative"}),c.css({position:"absolute",bottom:v,top:"auto"}).trigger("sticky_kit:bottom")},O=function(){return D(),I()},C=function(){if(k=!0,i.off("touchmove",I),i.off("scroll",I),i.off("resize",O),e(document.body).off("sticky_kit:recalc",O),c.off("sticky_kit:detach",C),c.removeData("sticky_kit"),c.css({position:"",bottom:"",top:"",width:""}),P.position("position",""),S)return w==null&&((_==="left"||_==="right")&&c.insertAfter(L),L.remove()),c.removeClass(g)},i.on("touchmove",I),i.on("scroll",I),i.on("resize",O),e(document.body).on("sticky_kit:recalc",O),c.on("sticky_kit:detach",C),setTimeout(I,0)}},o=0,f=this.length;o<f;o++)t=this[o],r(e(t));return this}}).call(void 0);(function(e){e.fn.ellipsis=function(i){var n=document.documentElement.style;return"textOverflow"in n||"OTextOverflow"in n?this:this.each(function(){var a=e(this);if(a.css("overflow")=="hidden"){var t=a.html();a.width();var s=e(this.cloneNode(!0)).hide().css({position:"absolute",width:"auto",overflow:"visible","max-width":"inherit"});a.after(s);for(var r=t;r.length>0&&s.width()>a.width();)r=r.substr(0,r.length-1),s.html(r+"...");if(a.html(s.html()),s.remove(),i==!0){var o=a.width();setInterval(function(){a.width()!=o&&(o=a.width(),a.html(t),a.ellipsis())},200)}}})}})(jQuery);/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */(function(e,i){var n=e.fn.domManip,a="_tmplitem",t=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,s={},r={},o,u={key:0,data:{}},f=0,w=0,b=[];function m(S,T,E,A){var P={data:A||A===0||A===!1?A:T?T.data:{},_wrap:T?T._wrap:null,tmpl:null,parent:T||null,nodes:[],calls:x,nest:_,wrap:k,html:y,update:C};return S&&e.extend(P,S,{nodes:[],parent:T}),E&&(P.tmpl=E,P._ctnt=P._ctnt||P.tmpl(e,P),P.key=++f,(b.length?r:s)[f]=P),P}e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(S,T){e.fn[S]=function(E){var A=[],P=e(E),D,O,M,L,I=this.length===1&&this[0].parentNode;if(o=s||{},I&&I.nodeType===11&&I.childNodes.length===1&&P.length===1)P[T](this[0]),A=this;else{for(O=0,M=P.length;O<M;O++)w=O,D=(O>0?this.clone(!0):this).get(),e(P[O])[T](D),A=A.concat(D);w=0,A=this.pushStack(A,S,P.selector)}return L=o,o=null,e.tmpl.complete(L),A}}),e.fn.extend({tmpl:function(S,T,E){return e.tmpl(this[0],S,T,E)},tmplItem:function(){return e.tmplItem(this[0])},template:function(S){return e.template(S,this[0])},domManip:function(S,T,E,A){if(S[0]&&e.isArray(S[0])){for(var P=e.makeArray(arguments),D=S[0],O=D.length,M=0,L;M<O&&!(L=e.data(D[M++],"tmplItem")););L&&w&&(P[2]=function(I){e.tmpl.afterManip(this,I,E)}),n.apply(this,P)}else n.apply(this,arguments);return w=0,o||e.tmpl.complete(s),this}}),e.extend({tmpl:function(S,T,E,A){var P,D=!A;if(D)A=u,S=e.template[S]||e.template(null,S),r={};else if(!S)return S=A.tmpl,s[A.key]=A,A.nodes=[],A.wrapped&&v(A,A.wrapped),e(p(A,null,A.tmpl(e,A)));return S?(typeof T=="function"&&(T=T.call(A||{})),E&&E.wrapped&&v(E,E.wrapped),P=e.isArray(T)?e.map(T,function(O){return O?m(E,A,S,O):null}):[m(E,A,S,T)],D?e(p(A,null,P)):P):[]},tmplItem:function(S){var T;for(S instanceof e&&(S=S[0]);S&&S.nodeType===1&&!(T=e.data(S,"tmplItem"))&&(S=S.parentNode););return T||u},template:function(S,T){return T?(typeof T=="string"?T=c(T):T instanceof e&&(T=T[0]||{}),T.nodeType&&(T=e.data(T,"tmpl")||e.data(T,"tmpl",c(T.innerHTML))),typeof S=="string"?e.template[S]=T:T):S?typeof S!="string"?e.template(null,S):e.template[S]||e.template(null,t.test(S)?S:e(S)):null},encode:function(S){return(""+S).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(S){s={}},afterManip:function(T,E,A){var P=E.nodeType===11?e.makeArray(E.childNodes):E.nodeType===1?[E]:[];A.call(T,E),d(P),w++}});function p(S,T,E){var A,P=E?e.map(E,function(D){return typeof D=="string"?S.key?D.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+a+'="'+S.key+'" $2'):D:p(D,S,D._ctnt)}):S;return T?P:(P=P.join(""),P.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(D,O,M,L){A=e(M).get(),d(A),O&&(A=g(O).concat(A)),L&&(A=A.concat(g(L)))}),A||g(P))}function g(S){var T=document.createElement("div");return T.innerHTML=S,e.makeArray(T.childNodes)}function c(S){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(S).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(T,E,A,P,D,O,M){var L=e.tmpl.tag[A],I,z,j;if(!L)throw"Unknown template tag: "+A;return I=L._default||[],O&&!/\w$/.test(D)&&(D+=O,O=""),D?(D=h(D),M=M?","+h(M)+")":O?")":"",z=O?D.indexOf(".")>-1?D+h(O):"("+D+").call($item"+M:D,j=O?z:"(typeof("+D+")==='function'?("+D+").call($item):("+D+"))"):j=z=I.$1||"null",P=h(P),"');"+L[E?"close":"open"].split("$notnull_1").join(D?"typeof("+D+")!=='undefined' && ("+D+")!=null":"true").split("$1a").join(j).split("$1").join(z).split("$2").join(P||I.$2||"")+"__.push('"})+"');}return __;")}function v(S,T){S._wrap=p(S,!0,e.isArray(T)?T:[t.test(T)?T:e(T).html()]).join("")}function h(S){return S?S.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function l(S){var T=document.createElement("div");return T.appendChild(S.cloneNode(!0)),T.innerHTML}function d(S){var T="_"+w,E,A,P={},D,O,M;for(D=0,O=S.length;D<O;D++)if((E=S[D]).nodeType===1){for(A=E.getElementsByTagName("*"),M=A.length-1;M>=0;M--)L(A[M]);L(E)}function L(I){var z,j=I,B,N,X;if(X=I.getAttribute(a)){for(;j.parentNode&&(j=j.parentNode).nodeType===1&&!(z=j.getAttribute(a)););z!==X&&(j=j.parentNode?j.nodeType===11?0:j.getAttribute(a)||0:0,(N=s[X])||(N=r[X],N=m(N,s[j]||r[j]),N.key=++f,s[f]=N),w&&V(X)),I.removeAttribute(a)}else w&&(N=e.data(I,"tmplItem"))&&(V(N.key),s[N.key]=N,j=e.data(I.parentNode,"tmplItem"),j=j?j.key:0);if(N){for(B=N;B&&B.key!=j;)B.nodes.push(I),B=B.parent;delete N._ctnt,delete N._wrap,e.data(I,"tmplItem",N)}function V(te){te=te+T,N=P[te]=P[te]||m(N,s[N.parent.key+T]||N.parent)}}}function x(S,T,E,A){if(!S)return b.pop();b.push({_:S,tmpl:T,item:this,data:E,options:A})}function _(S,T,E){return e.tmpl(e.template(S),T,E,this)}function k(S,T){var E=S.options||{};return E.wrapped=T,e.tmpl(e.template(S.tmpl),S.data,E,S.item)}function y(S,T){var E=this._wrap;return e.map(e(e.isArray(E)?E.join(""):E).filter(S||"*"),function(A){return T?A.innerText||A.textContent:A.outerHTML||l(A)})}function C(){var S=this.nodes;e.tmpl(null,null,null,this).insertBefore(S[0]),e(S).remove()}})(jQuery);(function(e){e.fn.touchwipe=function(i){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return i&&e.extend(n,i),this.each(function(){var a,t,s=!1;function r(){this.removeEventListener("touchmove",o),a=null,s=!1}function o(f){if(n.preventDefaultEvents&&f.preventDefault(),s){var w=f.touches[0].pageX,b=f.touches[0].pageY,m=a-w,p=t-b;Math.abs(m)>=n.min_move_x?(r(),m>0?n.wipeLeft():n.wipeRight()):Math.abs(p)>=n.min_move_y&&(r(),p>0?n.wipeDown():n.wipeUp())}}function u(f){f.touches.length==1&&(a=f.touches[0].pageX,t=f.touches[0].pageY,s=!0,this.addEventListener("touchmove",o,!1))}"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",u,!1)}),this}})(jQuery);/*!
Waypoints - 4.0.1
Copyright  2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/(function(){var e=0,i={};function n(a){if(!a)throw new Error("No options passed to Waypoint constructor");if(!a.element)throw new Error("No element option passed to Waypoint constructor");if(!a.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=n.Adapter.extend({},n.defaults,a),this.element=this.options.element,this.adapter=new n.Adapter(this.element),this.callback=a.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=n.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=n.Context.findOrCreateByElement(this.options.context),n.offsetAliases[this.options.offset]&&(this.options.offset=n.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}n.prototype.queueTrigger=function(a){this.group.queueTrigger(this,a)},n.prototype.trigger=function(a){this.enabled&&this.callback&&this.callback.apply(this,a)},n.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},n.prototype.disable=function(){return this.enabled=!1,this},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},n.prototype.next=function(){return this.group.next(this)},n.prototype.previous=function(){return this.group.previous(this)},n.invokeAll=function(a){var t=[];for(var s in i)t.push(i[s]);for(var r=0,o=t.length;r<o;r++)t[r][a]()},n.destroyAll=function(){n.invokeAll("destroy")},n.disableAll=function(){n.invokeAll("disable")},n.enableAll=function(){n.Context.refreshAll();for(var a in i)i[a].enabled=!0;return this},n.refreshAll=function(){n.Context.refreshAll()},n.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},n.viewportWidth=function(){return document.documentElement.clientWidth},n.adapters=[],n.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},n.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=n})();(function(){function e(r){window.setTimeout(r,1e3/60)}var i=0,n={},a=window.Waypoint,t=window.onload;function s(r){this.element=r,this.Adapter=a.Adapter,this.adapter=new this.Adapter(r),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},r.waypointContextKey=this.key,n[r.waypointContextKey]=this,i+=1,a.windowContext||(a.windowContext=!0,a.windowContext=new s(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}s.prototype.add=function(r){var o=r.options.horizontal?"horizontal":"vertical";this.waypoints[o][r.key]=r,this.refresh()},s.prototype.checkEmpty=function(){var r=this.Adapter.isEmptyObject(this.waypoints.horizontal),o=this.Adapter.isEmptyObject(this.waypoints.vertical),u=this.element==this.element.window;r&&o&&!u&&(this.adapter.off(".waypoints"),delete n[this.key])},s.prototype.createThrottledResizeHandler=function(){var r=this;function o(){r.handleResize(),r.didResize=!1}this.adapter.on("resize.waypoints",function(){r.didResize||(r.didResize=!0,a.requestAnimationFrame(o))})},s.prototype.createThrottledScrollHandler=function(){var r=this;function o(){r.handleScroll(),r.didScroll=!1}this.adapter.on("scroll.waypoints",function(){(!r.didScroll||a.isTouch)&&(r.didScroll=!0,a.requestAnimationFrame(o))})},s.prototype.handleResize=function(){a.Context.refreshAll()},s.prototype.handleScroll=function(){var r={},o={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var u in o){var f=o[u],w=f.newScroll>f.oldScroll,b=w?f.forward:f.backward;for(var m in this.waypoints[u]){var p=this.waypoints[u][m];if(p.triggerPoint!==null){var g=f.oldScroll<p.triggerPoint,c=f.newScroll>=p.triggerPoint,v=g&&c,h=!g&&!c;(v||h)&&(p.queueTrigger(b),r[p.group.id]=p.group)}}}for(var l in r)r[l].flushTriggers();this.oldScroll={x:o.horizontal.newScroll,y:o.vertical.newScroll}},s.prototype.innerHeight=function(){return this.element==this.element.window?a.viewportHeight():this.adapter.innerHeight()},s.prototype.remove=function(r){delete this.waypoints[r.axis][r.key],this.checkEmpty()},s.prototype.innerWidth=function(){return this.element==this.element.window?a.viewportWidth():this.adapter.innerWidth()},s.prototype.destroy=function(){var r=[];for(var o in this.waypoints)for(var u in this.waypoints[o])r.push(this.waypoints[o][u]);for(var f=0,w=r.length;f<w;f++)r[f].destroy()},s.prototype.refresh=function(){var r=this.element==this.element.window,o=r?void 0:this.adapter.offset(),u={},f;this.handleScroll(),f={horizontal:{contextOffset:r?0:o.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:o.top,contextScroll:r?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var w in f){var b=f[w];for(var m in this.waypoints[w]){var p=this.waypoints[w][m],g=p.options.offset,c=p.triggerPoint,v=0,h=c==null,l,d,x,_,k;p.element!==p.element.window&&(v=p.adapter.offset()[b.offsetProp]),typeof g=="function"?g=g.apply(p):typeof g=="string"&&(g=parseFloat(g),p.options.offset.indexOf("%")>-1&&(g=Math.ceil(b.contextDimension*g/100))),l=b.contextScroll-b.contextOffset,p.triggerPoint=Math.floor(v+l-g),d=c<b.oldScroll,x=p.triggerPoint>=b.oldScroll,_=d&&x,k=!d&&!x,!h&&_?(p.queueTrigger(b.backward),u[p.group.id]=p.group):(!h&&k||h&&b.oldScroll>=p.triggerPoint)&&(p.queueTrigger(b.forward),u[p.group.id]=p.group)}}return a.requestAnimationFrame(function(){for(var y in u)u[y].flushTriggers()}),this},s.findOrCreateByElement=function(r){return s.findByElement(r)||new s(r)},s.refreshAll=function(){for(var r in n)n[r].refresh()},s.findByElement=function(r){return n[r.waypointContextKey]},window.onload=function(){t&&t(),s.refreshAll()},a.requestAnimationFrame=function(r){var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e;o.call(window,r)},a.Context=s})();(function(){function e(s,r){return s.triggerPoint-r.triggerPoint}function i(s,r){return r.triggerPoint-s.triggerPoint}var n={vertical:{},horizontal:{}},a=window.Waypoint;function t(s){this.name=s.name,this.axis=s.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}t.prototype.add=function(s){this.waypoints.push(s)},t.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},t.prototype.flushTriggers=function(){for(var s in this.triggerQueues){var r=this.triggerQueues[s],o=s==="up"||s==="left";r.sort(o?i:e);for(var u=0,f=r.length;u<f;u+=1){var w=r[u];(w.options.continuous||u===r.length-1)&&w.trigger([s])}}this.clearTriggerQueues()},t.prototype.next=function(s){this.waypoints.sort(e);var r=a.Adapter.inArray(s,this.waypoints),o=r===this.waypoints.length-1;return o?null:this.waypoints[r+1]},t.prototype.previous=function(s){this.waypoints.sort(e);var r=a.Adapter.inArray(s,this.waypoints);return r?this.waypoints[r-1]:null},t.prototype.queueTrigger=function(s,r){this.triggerQueues[r].push(s)},t.prototype.remove=function(s){var r=a.Adapter.inArray(s,this.waypoints);r>-1&&this.waypoints.splice(r,1)},t.prototype.first=function(){return this.waypoints[0]},t.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},t.findOrCreate=function(s){return n[s.axis][s.name]||new t(s)},a.Group=t})();(function(){var e=window.jQuery,i=window.Waypoint;function n(a){this.$element=e(a)}e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(a,t){n.prototype[t]=function(){var s=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,s)}}),e.each(["extend","inArray","isEmptyObject"],function(a,t){n[t]=e[t]}),i.adapters.push({name:"jquery",Adapter:n}),i.Adapter=n})();(function(){var e=window.Waypoint;function i(n){return function(){var a=[],t=arguments[0];return n.isFunction(arguments[0])&&(t=n.extend({},arguments[1]),t.handler=arguments[0]),this.each(function(){var s=n.extend({},t,{element:this});typeof s.context=="string"&&(s.context=n(this).closest(s.context)[0]),a.push(new e(s))}),a}}window.jQuery&&(window.jQuery.fn.waypoint=i(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=i(window.Zepto))})();/*!
Waypoints Inview Shortcut - 4.0.1
Copyright  2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/(function(){function e(){}var i=window.Waypoint;function n(a){this.options=i.Adapter.extend({},n.defaults,a),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}n.prototype.createWaypoints=function(){for(var a={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:0},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},t=0,s=a[this.axis].length;t<s;t++){var r=a[this.axis][t];this.createWaypoint(r)}},n.prototype.createWaypoint=function(a){var t=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(s){return function(r){t.options[s[r]].call(t,r)}}(a),offset:a.offset,horizontal:this.options.horizontal}))},n.prototype.destroy=function(){for(var a=0,t=this.waypoints.length;a<t;a++)this.waypoints[a].destroy();this.waypoints=[]},n.prototype.disable=function(){for(var a=0,t=this.waypoints.length;a<t;a++)this.waypoints[a].disable()},n.prototype.enable=function(){for(var a=0,t=this.waypoints.length;a<t;a++)this.waypoints[a].enable()},n.defaults={context:window,enabled:!0,enter:e,entered:e,exit:e,exited:e},i.Inview=n})();(function(e){var i="bgAnimate",n=typeof console>"u"?function(){}:function(t){console.error(t)},a=function(t,s){this.$el=e(t),this.options=e.extend(!0,{},this.defaults,s),this._init()};a.prototype={defaults:{myCallback:null,width:1400,height:788,frames:null,reverse:!1},_init:function(){var t=this;t.$window=e(window),t.$document=e(document),t.options.frames!==null&&(t.animation=t.sprite(),window.requestAnimationFrame(t._animationLoop.bind(this)))},_animationLoop:function(){var t=this;window.requestAnimationFrame(t._animationLoop.bind(this)),t.animation.update(),t.animation.render()},_bindings:function(){},sprite:function(t){var s=this,r={},o=0,u=0,f=s.options.frames,w=s.options.frames.length||1,b=s.options.height,m=s.options.reverse,p=!1;return r.update=function(){u+=1,u>f[o]&&(u=0,o<w-1?p?o==0?(p=!1,o+=1):o-=1:o+=1:m?(p=!0,o-=1):o=0)},r.render=function(){s.$el.css("background-position","0 "+-(o*b)+"px")},r},refresh:function(){},destroy:function(){var t=this;t.$window.off("resize."+i,t._resizeDelegate)},option:function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))}},e.fn[i]=function(t){if(typeof t=="string"){for(var s=Array.prototype.slice.call(arguments,1),r=0,o=this.length;r<o;r++){var u=this[r],f=e.data(u,i);if(!f){n("cannot call methods on "+i+" prior to initialization; attempted to call '"+t+"'");continue}if(!e.isFunction(f[t])||t.charAt(0)==="_"){n("no such method '"+t+"' for "+i+" instance");continue}var w=f[t].apply(f,s);if(w!==void 0)return w}return this}else return this.each(function(){var b=e.data(this,i);b?(b.option(t||{}),b._init()):(b=new a(this,t),e.data(this,i,b))})}})(jQuery);(function(e){e.fn.popmenu=function(i){var n;return e(this).each(function(){var a=e(this),t=null,s=!1,r="#"+a.data("popmenu-id");const o=this,u=document.createElement("div");u.className="popmenu-arrow ir";let f;function w(p){if(a.data("popmenu-opts"))return;const g=p[0];g.parentNode!==document.body&&document.body.appendChild(g);const c=o.dataset.popmenuDirection;n={direction:Object.values(Ni).includes(c)&&c||Ni.EAST,arrow:o.dataset.popmenuArrow!=="false"},a.data("popmenu-opts",n),n.arrow&&g.appendChild(u),g.classList.toggle("-has-arrow",n.arrow),a.on("click",function(y){y.preventDefault(),p.is(":visible")?x():(t&&(clearTimeout(t),t=null),l())}),a.mouseleave(function(){t===null&&(t=setTimeout(function(){t=null,s||x()},500))});function v(){let y="".concat(ws(n.direction),"-").concat(pn[0]);if(Li(y)==="top"){const S=p[0].offsetHeight,T=o.getBoundingClientRect();S>T.y+window.scrollY&&(y=Gt(y))}const C=[];if(ui(y)==="y"){if(C.push(ji(y)),Li(y)==="top"){const S=Gt(y);C.push(S),C.push(ji(S))}}else C.push(Gt(y));bi(o,p[0],{placement:y,middleware:[Wt(xs),yi(({placement:S})=>ui(S)==="x"?{padding:Pe.shift.padding,crossAxis:!1,limiter:wi({offset:({rects:E,middlewareData:A})=>A.arrow?{mainAxis:E.reference.height+u.offsetHeight*.5}:{mainAxis:E.reference.height}})}:{mainAxis:!1,crossAxis:!1}),Bt(S=>({padding:Pe.flip.padding,fallbackPlacements:C})),n.arrow&&mn({...Pe.arrow,element:u})]}).then(gn.bind(null,o,p[0],u))}function h(){try{f()}catch(y){}}function l(){h(),p[0].removeAttribute("hidden"),v(),f=vi(o,p[0],v,{ancestorScroll:!1,layoutShift:!1})}p.mouseenter(function(){s=!0,t&&(clearTimeout(t),t=null)});function d(y){s=!1,_(y),x()}p.mouseleave(d),p.find("a,.popmenu-close").click(d);function x(y){setTimeout(function(){p[0].setAttribute("hidden",""),h()},50)}function _(y){return k(y,a)?!0:p.is(":visible")?!!k(y,p):!1}function k(y,C){if(C==null||C.length===0)return!1;var S=C.offset(),T=S.left,E=S.top,A=S.left+C.outerWidth(),P=S.top+C.outerHeight();return!(y.pageX<=T||y.pageX>=A||y.pageY<=E||y.pageY>=P)}}if(e(r).length)w(e(r));else var b=1,m=setInterval(function(){b>30?(clearInterval(m),console.error("lb.popmenu.js : ERROR - Unable to find the popmenu-id "+r)):e(r).length&&(clearInterval(m),w(e(r))),b=b+1},100)})}})(jQuery);const er={name:"labelOffset",fn({elements:e,placement:i,rects:n,x:a,y:t}){const s=e.floating.querySelector(":scope > .smenu-selected:first-child");if(!s)return{};const r=e.reference.querySelector(":scope > label:first-child"),o=r.offsetParent,u={right:0,left:0},f={start:0,end:0};if(o===e.reference){const v=r.getBoundingClientRect(),h=e.reference.getBoundingClientRect();u.right=v.x-h.x,u.left=v.right-(h.x+n.reference.width),f.start=h.y-v.y}const w=window.getComputedStyle(r),b=window.getComputedStyle(s),m={right:parseFloat(w["padding-left"])-parseFloat(b["padding-left"]),left:-(parseFloat(w["padding-right"])-parseFloat(b["padding-right"]))},[p,g]=i.split("-"),c=parseFloat(w["padding-top"])-parseFloat(b["padding-top"]);return{x:a+m[p]+u[p],y:t+c+f[g]}}};(function(e){e.fn.selectmenu=function(i){return e(this).each(function(){var n=e(this),a=n.find("label"),t=a.data("heading")?a.data("heading")+'<i class="ir s icon"></i>':c(a),s=n.find("ul.smenu-menu").prepend(e('<li class="smenu-selected">'+t+"</li>")),r=null,o=!1,u=!1;const f=document.createElement("div");f.className="smenu-overflowsentinel",s[0].appendChild(f);const w=document.createElement("div");w.className="smenu-overflowindicator",w.innerHTML='<div class="fade"></div>',s[0].appendChild(w);const b=new IntersectionObserver((_,k)=>{_.forEach(y=>{w.classList.toggle("-scrollable",!y.isIntersecting||y.intersectionRatio<1)})},{root:s[0],rootMargin:"0px",threshold:1});let m;var p=!!n.closest(".modal").length;p&&s.addClass("-modal"),e.data(n[0],"smenu-menu",s[0]),e(this).children("label").hasClass("-lower")&&s.children(".smenu-selected").addClass("-lower"),e(this).children("label").hasClass("-bold")&&s.children(".smenu-selected").addClass("-bold"),s.appendTo(e("body"));var g=a.find(".js-smenu-label");s.on("ajax-success",".ajax-click-action",function(_,k,y,C){if(k&&k.messages&&bxd.showMessages(k.result?"success":"error",k.messages),k&&k.result){var S=e(this).parent(),T=S.siblings(".smenu-subselected");if(T.length==1){T.removeClass("smenu-subselected"),S.addClass("smenu-subselected");var E=S.data("label");E&&g.text(E)}}}),window.isTouchOnly?(n.on("click",function(){e(".smenu-menu:visible").hide(),u=!0,r&&(clearTimeout(r),r=null),u&&l()}),s.find(".smenu-selected").click(d)):(n.mouseenter(function(){u=!0,r&&(clearTimeout(r),r=null),setTimeout(function(){u&&l()},500)}),n.mouseleave(function(){u=!1,r===null&&(r=setTimeout(function(){r=null,o||x()},500))}));function c(_){var k=_.text(),y=k.replace("subscription","sub").substring(0,19);return k!==y&&(y=y.trim()+""),_.html().replace(k,y)}function v(){bi(n[0],s[0],{placement:"right-start",middleware:[Wt(({rects:_})=>-_.reference.width),Bt({crossAxis:!1,padding:Pe.flip.padding,fallbackPlacements:["left-start"]}),er,ys({apply({availableWidth:_,availableHeight:k,elements:y}){const C=k-Pe.flip.padding;y.floating.style.maxHeight=C>=y.floating.scrollHeight?"":"".concat(C,"px")}})]}).then(({x:_,y:k,placement:y,middlewareData:C})=>{s[0].dataset.placement=y,Object.assign(s[0].style,{top:"0",left:"0",transform:"translate(".concat(Ri(_),"px, ").concat(Ri(k),"px)")})})}function h(){try{m()}catch(_){}}function l(){b.observe(f),s.show(),h(),m=vi(n[0],s[0],v)}function d(_){o=!1,x()}s.mouseenter(function(){o=!0,r&&(clearTimeout(r),r=null)}),s.mouseleave(d),s.find("a").click(d);function x(){setTimeout(function(){s.hide(),h(),b.unobserve(f)},50)}})}})(jQuery);var St={exports:{}};/*!
 * Masonry PACKAGED v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */var tr=St.exports,Bi;function ir(){return Bi||(Bi=1,function(e){(function(i,n){e.exports?e.exports=n(i,zt()):i.jQueryBridget=n(i,i.jQuery)})(window,function(n,a){var t=Array.prototype.slice,s=n.console,r=typeof s>"u"?function(){}:function(f){s.error(f)};function o(f,w,b){if(b=b||a||n.jQuery,!b)return;w.prototype.option||(w.prototype.option=function(g){b.isPlainObject(g)&&(this.options=b.extend(!0,this.options,g))}),b.fn[f]=function(g){if(typeof g=="string"){var c=t.call(arguments,1);return m(this,g,c)}return p(this,g),this};function m(g,c,v){var h,l="$()."+f+'("'+c+'")';return g.each(function(d,x){var _=b.data(x,f);if(!_){r(f+" not initialized. Cannot call methods, i.e. "+l);return}var k=_[c];if(!k||c.charAt(0)=="_"){r(l+" is not a valid method");return}var y=k.apply(_,v);h=h===void 0?y:h}),h!==void 0?h:g}function p(g,c){g.each(function(v,h){var l=b.data(h,f);l?(l.option(c),l._init()):(l=new w(h,c),b.data(h,f,l))})}u(b)}function u(f){!f||f&&f.bridget||(f.bridget=o)}return u(a||n.jQuery),o}),function(i,n){e.exports?e.exports=n():i.EvEmitter=n()}(typeof window<"u"?window:tr,function(){function i(){}var n=i.prototype;return n.on=function(a,t){if(!(!a||!t)){var s=this._events=this._events||{},r=s[a]=s[a]||[];return r.indexOf(t)==-1&&r.push(t),this}},n.once=function(a,t){if(!(!a||!t)){this.on(a,t);var s=this._onceEvents=this._onceEvents||{},r=s[a]=s[a]||{};return r[t]=!0,this}},n.off=function(a,t){var s=this._events&&this._events[a];if(!(!s||!s.length)){var r=s.indexOf(t);return r!=-1&&s.splice(r,1),this}},n.emitEvent=function(a,t){var s=this._events&&this._events[a];if(!(!s||!s.length)){s=s.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[a],o=0;o<s.length;o++){var u=s[o],f=r&&r[u];f&&(this.off(a,u),delete r[u]),u.apply(this,t)}return this}},n.allOff=function(){delete this._events,delete this._onceEvents},i});/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(function(i,n){e.exports?e.exports=n():i.getSize=n()})(window,function(){function n(p){var g=parseFloat(p),c=p.indexOf("%")==-1&&!isNaN(g);return c&&g}function a(){}var t=typeof console>"u"?a:function(p){console.error(p)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=s.length;function o(){for(var p={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},g=0;g<r;g++){var c=s[g];p[c]=0}return p}function u(p){var g=getComputedStyle(p);return g||t("Style returned "+g+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),g}var f=!1,w;function b(){if(!f){f=!0;var p=document.createElement("div");p.style.width="200px",p.style.padding="1px 2px 3px 4px",p.style.borderStyle="solid",p.style.borderWidth="1px 2px 3px 4px",p.style.boxSizing="border-box";var g=document.body||document.documentElement;g.appendChild(p);var c=u(p);w=Math.round(n(c.width))==200,m.isBoxSizeOuter=w,g.removeChild(p)}}function m(p){if(b(),typeof p=="string"&&(p=document.querySelector(p)),!(!p||typeof p!="object"||!p.nodeType)){var g=u(p);if(g.display=="none")return o();var c={};c.width=p.offsetWidth,c.height=p.offsetHeight;for(var v=c.isBorderBox=g.boxSizing=="border-box",h=0;h<r;h++){var l=s[h],d=g[l],x=parseFloat(d);c[l]=isNaN(x)?0:x}var _=c.paddingLeft+c.paddingRight,k=c.paddingTop+c.paddingBottom,y=c.marginLeft+c.marginRight,C=c.marginTop+c.marginBottom,S=c.borderLeftWidth+c.borderRightWidth,T=c.borderTopWidth+c.borderBottomWidth,E=v&&w,A=n(g.width);A!==!1&&(c.width=A+(E?0:_+S));var P=n(g.height);return P!==!1&&(c.height=P+(E?0:k+T)),c.innerWidth=c.width-(_+S),c.innerHeight=c.height-(k+T),c.outerWidth=c.width+y,c.outerHeight=c.height+C,c}}return m}),function(i,n){e.exports?e.exports=n():i.matchesSelector=n()}(window,function(){var n=function(){var a=window.Element.prototype;if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],s=0;s<t.length;s++){var r=t[s],o=r+"MatchesSelector";if(a[o])return o}}();return function(t,s){return t[n](s)}}),function(i,n){e.exports?e.exports=n(i,Cs()):i.fizzyUIUtils=n(i,i.matchesSelector)}(window,function(n,a){var t={};t.extend=function(o,u){for(var f in u)o[f]=u[f];return o},t.modulo=function(o,u){return(o%u+u)%u};var s=Array.prototype.slice;t.makeArray=function(o){if(Array.isArray(o))return o;if(o==null)return[];var u=typeof o=="object"&&typeof o.length=="number";return u?s.call(o):[o]},t.removeFrom=function(o,u){var f=o.indexOf(u);f!=-1&&o.splice(f,1)},t.getParent=function(o,u){for(;o.parentNode&&o!=document.body;)if(o=o.parentNode,a(o,u))return o},t.getQueryElement=function(o){return typeof o=="string"?document.querySelector(o):o},t.handleEvent=function(o){var u="on"+o.type;this[u]&&this[u](o)},t.filterFindElements=function(o,u){o=t.makeArray(o);var f=[];return o.forEach(function(w){if(w instanceof HTMLElement){if(!u){f.push(w);return}a(w,u)&&f.push(w);for(var b=w.querySelectorAll(u),m=0;m<b.length;m++)f.push(b[m])}}),f},t.debounceMethod=function(o,u,f){f=f||100;var w=o.prototype[u],b=u+"Timeout";o.prototype[u]=function(){var m=this[b];clearTimeout(m);var p=arguments,g=this;this[b]=setTimeout(function(){w.apply(g,p),delete g[b]},f)}},t.docReady=function(o){var u=document.readyState;u=="complete"||u=="interactive"?setTimeout(o):document.addEventListener("DOMContentLoaded",o)},t.toDashed=function(o){return o.replace(/(.)([A-Z])/g,function(u,f,w){return f+"-"+w}).toLowerCase()};var r=n.console;return t.htmlInit=function(o,u){t.docReady(function(){var f=t.toDashed(u),w="data-"+f,b=document.querySelectorAll("["+w+"]"),m=document.querySelectorAll(".js-"+f),p=t.makeArray(b).concat(t.makeArray(m)),g=w+"-options",c=n.jQuery;p.forEach(function(v){var h=v.getAttribute(w)||v.getAttribute(g),l;try{l=h&&JSON.parse(h)}catch(x){r&&r.error("Error parsing "+w+" on "+v.className+": "+x);return}var d=new o(v,l);c&&c.data(v,u,d)})})},t}),function(i,n){e.exports?e.exports=n(Fi(),Kt()):(i.Outlayer={},i.Outlayer.Item=n(i.EvEmitter,i.getSize))}(window,function(n,a){function t(v){for(var h in v)return!1;return h=null,!0}var s=document.documentElement.style,r=typeof s.transition=="string"?"transition":"WebkitTransition",o=typeof s.transform=="string"?"transform":"WebkitTransform",u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],f={transform:o,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"};function w(v,h){v&&(this.element=v,this.layout=h,this.position={x:0,y:0},this._create())}var b=w.prototype=Object.create(n.prototype);b.constructor=w,b._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},b.handleEvent=function(v){var h="on"+v.type;this[h]&&this[h](v)},b.getSize=function(){this.size=a(this.element)},b.css=function(v){var h=this.element.style;for(var l in v){var d=f[l]||l;h[d]=v[l]}},b.getPosition=function(){var v=getComputedStyle(this.element),h=this.layout._getOption("originLeft"),l=this.layout._getOption("originTop"),d=v[h?"left":"right"],x=v[l?"top":"bottom"],_=parseFloat(d),k=parseFloat(x),y=this.layout.size;d.indexOf("%")!=-1&&(_=_/100*y.width),x.indexOf("%")!=-1&&(k=k/100*y.height),_=isNaN(_)?0:_,k=isNaN(k)?0:k,_-=h?y.paddingLeft:y.paddingRight,k-=l?y.paddingTop:y.paddingBottom,this.position.x=_,this.position.y=k},b.layoutPosition=function(){var v=this.layout.size,h={},l=this.layout._getOption("originLeft"),d=this.layout._getOption("originTop"),x=l?"paddingLeft":"paddingRight",_=l?"left":"right",k=l?"right":"left",y=this.position.x+v[x];h[_]=this.getXValue(y),h[k]="";var C=d?"paddingTop":"paddingBottom",S=d?"top":"bottom",T=d?"bottom":"top",E=this.position.y+v[C];h[S]=this.getYValue(E),h[T]="",this.css(h),this.emitEvent("layout",[this])},b.getXValue=function(v){var h=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!h?v/this.layout.size.width*100+"%":v+"px"},b.getYValue=function(v){var h=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&h?v/this.layout.size.height*100+"%":v+"px"},b._transitionTo=function(v,h){this.getPosition();var l=this.position.x,d=this.position.y,x=v==this.position.x&&h==this.position.y;if(this.setPosition(v,h),x&&!this.isTransitioning){this.layoutPosition();return}var _=v-l,k=h-d,y={};y.transform=this.getTranslate(_,k),this.transition({to:y,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},b.getTranslate=function(v,h){var l=this.layout._getOption("originLeft"),d=this.layout._getOption("originTop");return v=l?v:-v,h=d?h:-h,"translate3d("+v+"px, "+h+"px, 0)"},b.goTo=function(v,h){this.setPosition(v,h),this.layoutPosition()},b.moveTo=b._transitionTo,b.setPosition=function(v,h){this.position.x=parseFloat(v),this.position.y=parseFloat(h)},b._nonTransition=function(v){this.css(v.to),v.isCleaning&&this._removeStyles(v.to);for(var h in v.onTransitionEnd)v.onTransitionEnd[h].call(this)},b.transition=function(v){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(v);return}var h=this._transn;for(var l in v.onTransitionEnd)h.onEnd[l]=v.onTransitionEnd[l];for(l in v.to)h.ingProperties[l]=!0,v.isCleaning&&(h.clean[l]=!0);v.from&&(this.css(v.from),this.element.offsetHeight),this.enableTransition(v.to),this.css(v.to),this.isTransitioning=!0};function m(v){return v.replace(/([A-Z])/g,function(h){return"-"+h.toLowerCase()})}var p="opacity,"+m(o);b.enableTransition=function(){if(!this.isTransitioning){var v=this.layout.options.transitionDuration;v=typeof v=="number"?v+"ms":v,this.css({transitionProperty:p,transitionDuration:v,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(u,this,!1)}},b.onwebkitTransitionEnd=function(v){this.ontransitionend(v)},b.onotransitionend=function(v){this.ontransitionend(v)};var g={"-webkit-transform":"transform"};b.ontransitionend=function(v){if(v.target===this.element){var h=this._transn,l=g[v.propertyName]||v.propertyName;if(delete h.ingProperties[l],t(h.ingProperties)&&this.disableTransition(),l in h.clean&&(this.element.style[v.propertyName]="",delete h.clean[l]),l in h.onEnd){var d=h.onEnd[l];d.call(this),delete h.onEnd[l]}this.emitEvent("transitionEnd",[this])}},b.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(u,this,!1),this.isTransitioning=!1},b._removeStyles=function(v){var h={};for(var l in v)h[l]="";this.css(h)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return b.removeTransitionStyles=function(){this.css(c)},b.stagger=function(v){v=isNaN(v)?0:v,this.staggerDelay=v+"ms"},b.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},b.remove=function(){if(!r||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},b.reveal=function(){delete this.isHidden,this.css({display:""});var v=this.layout.options,h={},l=this.getHideRevealTransitionEndProperty("visibleStyle");h[l]=this.onRevealTransitionEnd,this.transition({from:v.hiddenStyle,to:v.visibleStyle,isCleaning:!0,onTransitionEnd:h})},b.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},b.getHideRevealTransitionEndProperty=function(v){var h=this.layout.options[v];if(h.opacity)return"opacity";for(var l in h)return l},b.hide=function(){this.isHidden=!0,this.css({display:""});var v=this.layout.options,h={},l=this.getHideRevealTransitionEndProperty("hiddenStyle");h[l]=this.onHideTransitionEnd,this.transition({from:v.visibleStyle,to:v.hiddenStyle,isCleaning:!0,onTransitionEnd:h})},b.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},b.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},w});/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */(function(i,n){e.exports?e.exports=n(i,Fi(),Kt(),Is()):i.Outlayer=n(i,i.EvEmitter,i.getSize,i.fizzyUIUtils,i.Outlayer.Item)})(window,function(n,a,t,s,r){var o=n.console,u=n.jQuery,f=function(){},w=0,b={};function m(h,l){var d=s.getQueryElement(h);if(!d){o&&o.error("Bad element for "+this.constructor.namespace+": "+(d||h));return}this.element=d,u&&(this.$element=u(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(l);var x=++w;this.element.outlayerGUID=x,b[x]=this,this._create();var _=this._getOption("initLayout");_&&this.layout()}m.namespace="outlayer",m.Item=r,m.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var p=m.prototype;s.extend(p,a.prototype),p.option=function(h){s.extend(this.options,h)},p._getOption=function(h){var l=this.constructor.compatOptions[h];return l&&this.options[l]!==void 0?this.options[l]:this.options[h]},m.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},p._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s.extend(this.element.style,this.options.containerStyle);var h=this._getOption("resize");h&&this.bindResize()},p.reloadItems=function(){this.items=this._itemize(this.element.children)},p._itemize=function(h){for(var l=this._filterFindItemElements(h),d=this.constructor.Item,x=[],_=0;_<l.length;_++){var k=l[_],y=new d(k,this);x.push(y)}return x},p._filterFindItemElements=function(h){return s.filterFindElements(h,this.options.itemSelector)},p.getItemElements=function(){return this.items.map(function(h){return h.element})},p.layout=function(){this._resetLayout(),this._manageStamps();var h=this._getOption("layoutInstant"),l=h!==void 0?h:!this._isLayoutInited;this.layoutItems(this.items,l),this._isLayoutInited=!0},p._init=p.layout,p._resetLayout=function(){this.getSize()},p.getSize=function(){this.size=t(this.element)},p._getMeasurement=function(h,l){var d=this.options[h],x;d?(typeof d=="string"?x=this.element.querySelector(d):d instanceof HTMLElement&&(x=d),this[h]=x?t(x)[l]:d):this[h]=0},p.layoutItems=function(h,l){h=this._getItemsForLayout(h),this._layoutItems(h,l),this._postLayout()},p._getItemsForLayout=function(h){return h.filter(function(l){return!l.isIgnored})},p._layoutItems=function(h,l){if(this._emitCompleteOnItems("layout",h),!(!h||!h.length)){var d=[];h.forEach(function(x){var _=this._getItemLayoutPosition(x);_.item=x,_.isInstant=l||x.isLayoutInstant,d.push(_)},this),this._processLayoutQueue(d)}},p._getItemLayoutPosition=function(){return{x:0,y:0}},p._processLayoutQueue=function(h){this.updateStagger(),h.forEach(function(l,d){this._positionItem(l.item,l.x,l.y,l.isInstant,d)},this)},p.updateStagger=function(){var h=this.options.stagger;if(h==null){this.stagger=0;return}return this.stagger=v(h),this.stagger},p._positionItem=function(h,l,d,x,_){x?h.goTo(l,d):(h.stagger(_*this.stagger),h.moveTo(l,d))},p._postLayout=function(){this.resizeContainer()},p.resizeContainer=function(){var h=this._getOption("resizeContainer");if(h){var l=this._getContainerSize();l&&(this._setContainerMeasure(l.width,!0),this._setContainerMeasure(l.height,!1))}},p._getContainerSize=f,p._setContainerMeasure=function(h,l){if(h!==void 0){var d=this.size;d.isBorderBox&&(h+=l?d.paddingLeft+d.paddingRight+d.borderLeftWidth+d.borderRightWidth:d.paddingBottom+d.paddingTop+d.borderTopWidth+d.borderBottomWidth),h=Math.max(h,0),this.element.style[l?"width":"height"]=h+"px"}},p._emitCompleteOnItems=function(h,l){var d=this;function x(){d.dispatchEvent(h+"Complete",null,[l])}var _=l.length;if(!l||!_){x();return}var k=0;function y(){k++,k==_&&x()}l.forEach(function(C){C.once(h,y)})},p.dispatchEvent=function(h,l,d){var x=l?[l].concat(d):d;if(this.emitEvent(h,x),u)if(this.$element=this.$element||u(this.element),l){var _=u.Event(l);_.type=h,this.$element.trigger(_,d)}else this.$element.trigger(h,d)},p.ignore=function(h){var l=this.getItem(h);l&&(l.isIgnored=!0)},p.unignore=function(h){var l=this.getItem(h);l&&delete l.isIgnored},p.stamp=function(h){h=this._find(h),h&&(this.stamps=this.stamps.concat(h),h.forEach(this.ignore,this))},p.unstamp=function(h){h=this._find(h),h&&h.forEach(function(l){s.removeFrom(this.stamps,l),this.unignore(l)},this)},p._find=function(h){if(h)return typeof h=="string"&&(h=this.element.querySelectorAll(h)),h=s.makeArray(h),h},p._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},p._getBoundingRect=function(){var h=this.element.getBoundingClientRect(),l=this.size;this._boundingRect={left:h.left+l.paddingLeft+l.borderLeftWidth,top:h.top+l.paddingTop+l.borderTopWidth,right:h.right-(l.paddingRight+l.borderRightWidth),bottom:h.bottom-(l.paddingBottom+l.borderBottomWidth)}},p._manageStamp=f,p._getElementOffset=function(h){var l=h.getBoundingClientRect(),d=this._boundingRect,x=t(h),_={left:l.left-d.left-x.marginLeft,top:l.top-d.top-x.marginTop,right:d.right-l.right-x.marginRight,bottom:d.bottom-l.bottom-x.marginBottom};return _},p.handleEvent=s.handleEvent,p.bindResize=function(){n.addEventListener("resize",this),this.isResizeBound=!0},p.unbindResize=function(){n.removeEventListener("resize",this),this.isResizeBound=!1},p.onresize=function(){this.resize()},s.debounceMethod(m,"onresize",100),p.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},p.needsResizeLayout=function(){var h=t(this.element),l=this.size&&h;return l&&h.innerWidth!==this.size.innerWidth},p.addItems=function(h){var l=this._itemize(h);return l.length&&(this.items=this.items.concat(l)),l},p.appended=function(h){var l=this.addItems(h);l.length&&(this.layoutItems(l,!0),this.reveal(l))},p.prepended=function(h){var l=this._itemize(h);if(l.length){var d=this.items.slice(0);this.items=l.concat(d),this._resetLayout(),this._manageStamps(),this.layoutItems(l,!0),this.reveal(l),this.layoutItems(d)}},p.reveal=function(h){if(this._emitCompleteOnItems("reveal",h),!(!h||!h.length)){var l=this.updateStagger();h.forEach(function(d,x){d.stagger(x*l),d.reveal()})}},p.hide=function(h){if(this._emitCompleteOnItems("hide",h),!(!h||!h.length)){var l=this.updateStagger();h.forEach(function(d,x){d.stagger(x*l),d.hide()})}},p.revealItemElements=function(h){var l=this.getItems(h);this.reveal(l)},p.hideItemElements=function(h){var l=this.getItems(h);this.hide(l)},p.getItem=function(h){for(var l=0;l<this.items.length;l++){var d=this.items[l];if(d.element==h)return d}},p.getItems=function(h){h=s.makeArray(h);var l=[];return h.forEach(function(d){var x=this.getItem(d);x&&l.push(x)},this),l},p.remove=function(h){var l=this.getItems(h);this._emitCompleteOnItems("remove",l),!(!l||!l.length)&&l.forEach(function(d){d.remove(),s.removeFrom(this.items,d)},this)},p.destroy=function(){var h=this.element.style;h.height="",h.position="",h.width="",this.items.forEach(function(d){d.destroy()}),this.unbindResize();var l=this.element.outlayerGUID;delete b[l],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},m.data=function(h){h=s.getQueryElement(h);var l=h&&h.outlayerGUID;return l&&b[l]},m.create=function(h,l){var d=g(m);return d.defaults=s.extend({},m.defaults),s.extend(d.defaults,l),d.compatOptions=s.extend({},m.compatOptions),d.namespace=h,d.data=m.data,d.Item=g(r),s.htmlInit(d,h),u&&u.bridget&&u.bridget(h,d),d};function g(h){function l(){h.apply(this,arguments)}return l.prototype=Object.create(h.prototype),l.prototype.constructor=l,l}var c={ms:1,s:1e3};function v(h){if(typeof h=="number")return h;var l=h.match(/(^\d*\.?\d*)(\w*)/),d=l&&l[1],x=l&&l[2];if(!d.length)return 0;d=parseFloat(d);var _=c[x]||1;return d*_}return m.Item=r,m});/*!
 * Masonry v4.2.2
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */(function(i,n){e.exports?e.exports=n(ks(),Kt()):i.Masonry=n(i.Outlayer,i.getSize)})(window,function(n,a){var t=n.create("masonry");t.compatOptions.fitWidth="isFitWidth";var s=t.prototype;return s._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var r=0;r<this.cols;r++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},s.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var r=this.items[0],o=r&&r.element;this.columnWidth=o&&a(o).outerWidth||this.containerWidth}var u=this.columnWidth+=this.gutter,f=this.containerWidth+this.gutter,w=f/u,b=u-f%u,m=b&&b<1?"round":"floor";w=Math[m](w),this.cols=Math.max(w,1)},s.getContainerWidth=function(){var r=this._getOption("fitWidth"),o=r?this.element.parentNode:this.element,u=a(o);this.containerWidth=u&&u.innerWidth},s._getItemLayoutPosition=function(r){r.getSize();var o=r.size.outerWidth%this.columnWidth,u=o&&o<1?"round":"ceil",f=Math[u](r.size.outerWidth/this.columnWidth);f=Math.min(f,this.cols);for(var w=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",b=this[w](f,r),m={x:this.columnWidth*b.col,y:b.y},p=b.y+r.size.outerHeight,g=f+b.col,c=b.col;c<g;c++)this.colYs[c]=p;return m},s._getTopColPosition=function(r){var o=this._getTopColGroup(r),u=Math.min.apply(Math,o);return{col:o.indexOf(u),y:u}},s._getTopColGroup=function(r){if(r<2)return this.colYs;for(var o=[],u=this.cols+1-r,f=0;f<u;f++)o[f]=this._getColGroupY(f,r);return o},s._getColGroupY=function(r,o){if(o<2)return this.colYs[r];var u=this.colYs.slice(r,r+o);return Math.max.apply(Math,u)},s._getHorizontalColPosition=function(r,o){var u=this.horizontalColIndex%this.cols,f=r>1&&u+r>this.cols;u=f?0:u;var w=o.size.outerWidth&&o.size.outerHeight;return this.horizontalColIndex=w?u+r:this.horizontalColIndex,{col:u,y:this._getColGroupY(u,r)}},s._manageStamp=function(r){var o=a(r),u=this._getElementOffset(r),f=this._getOption("originLeft"),w=f?u.left:u.right,b=w+o.outerWidth,m=Math.floor(w/this.columnWidth);m=Math.max(0,m);var p=Math.floor(b/this.columnWidth);p-=b%this.columnWidth?0:1,p=Math.min(this.cols-1,p);for(var g=this._getOption("originTop"),c=(g?u.top:u.bottom)+o.outerHeight,v=m;v<=p;v++)this.colYs[v]=Math.max(c,this.colYs[v])},s._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var r={height:this.maxY};return this._getOption("fitWidth")&&(r.width=this._getContainerFitWidth()),r},s._getContainerFitWidth=function(){for(var r=0,o=this.cols;--o&&this.colYs[o]===0;)r++;return(this.cols-r)*this.columnWidth-this.gutter},s.needsResizeLayout=function(){var r=this.containerWidth;return this.getContainerWidth(),r!=this.containerWidth},t})}(St)),St.exports}ir();var Qt={exports:{}};/*!
 * hoverIntent v1.10.2 // 2020.04.28 // jQuery v1.7.0+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007-2019 Brian Cherne
 */var qi;function nr(){return qi||(qi=1,function(e){(function(i){e.exports?e.exports=i(zt()):jQuery&&!jQuery.fn.hoverIntent&&i(jQuery)})(function(i){var n={interval:100,sensitivity:6,timeout:0},a=0,t,s,r=function(w){t=w.pageX,s=w.pageY},o=function(w,b,m,p){if(Math.sqrt((m.pX-t)*(m.pX-t)+(m.pY-s)*(m.pY-s))<p.sensitivity)return b.off(m.event,r),delete m.timeoutId,m.isActive=!0,w.pageX=t,w.pageY=s,delete m.pX,delete m.pY,p.over.apply(b[0],[w]);m.pX=t,m.pY=s,m.timeoutId=setTimeout(function(){o(w,b,m,p)},p.interval)},u=function(w,b,m,p){var g=b.data("hoverIntent");return g&&delete g[m.id],p.apply(b[0],[w])},f=function(w){return typeof w=="function"};i.fn.hoverIntent=function(w,b,m){var p=a++,g=i.extend({},n);i.isPlainObject(w)?(g=i.extend(g,w),f(g.out)||(g.out=g.over)):f(b)?g=i.extend(g,{over:w,out:b,selector:m}):g=i.extend(g,{over:w,out:w,selector:b});var c=function(v){var h=i.extend({},v),l=i(this),d=l.data("hoverIntent");d||l.data("hoverIntent",d={});var x=d[p];x||(d[p]=x={id:p}),x.timeoutId&&(x.timeoutId=clearTimeout(x.timeoutId));var _=x.event="mousemove.hoverIntent.hoverIntent"+p;if(v.type==="mouseenter"){if(x.isActive)return;x.pX=h.pageX,x.pY=h.pageY,l.off(_,r).on(_,r),x.timeoutId=setTimeout(function(){o(h,l,x,g)},g.interval)}else{if(!x.isActive)return;l.off(_,r),x.timeoutId=setTimeout(function(){u(h,l,x,g.out)},g.timeout)}};return this.on({"mouseenter.hoverIntent":c,"mouseleave.hoverIntent":c},g.selector)}})}(Qt)),Qt.exports}nr();/*!
 * jQuery UI Draggable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */(function(e,i){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(n){var a=this.options;return this.helper||a.disabled||e(n.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(n),!this.handle)?!1:(e(a.iframeFix===!0?"iframe":a.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0)},_mouseStart:function(n){var a=this.options;return this.helper=this._createHelper(n),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:n.pageX-this.offset.left,top:n.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(n),this.originalPageX=n.pageX,this.originalPageY=n.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this._setContainment(),this._trigger("start",n)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,n),this._mouseDrag(n,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,n),!0)},_mouseDrag:function(n,a){if(this.offsetParentCssPosition==="fixed"&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(n),this.positionAbs=this._convertPositionTo("absolute"),!a){var t=this._uiHash();if(this._trigger("drag",n,t)===!1)return this._mouseUp({}),!1;this.position=t.position}return(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,n),!1},_mouseStop:function(n){var a=this,t=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(t=e.ui.ddmanager.drop(this,n)),this.dropped&&(t=this.dropped,this.dropped=!1),this.options.helper==="original"&&!e.contains(this.element[0].ownerDocument,this.element[0])||(this.options.revert==="invalid"&&!t||this.options.revert==="valid"&&t||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,t)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",n)!==!1&&a._clear()}):this._trigger("stop",n)!==!1&&this._clear()),!1},_mouseUp:function(n){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,n),e.ui.mouse.prototype._mouseUp.call(this,n)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(n){return this.options.handle?!!e(n.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(n){var a=this.options,t=e.isFunction(a.helper)?e(a.helper.apply(this.element[0],[n])):a.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return t.parents("body").length||t.appendTo(a.appendTo==="parent"?this.element[0].parentNode:a.appendTo),t[0]!==this.element[0]&&!/(fixed|absolute)/.test(t.css("position"))&&t.css("position","absolute"),t},_adjustOffsetFromHelper:function(n){typeof n=="string"&&(n=n.split(" ")),e.isArray(n)&&(n={left:+n[0],top:+n[1]||0}),"left"in n&&(this.offset.click.left=n.left+this.margins.left),"right"in n&&(this.offset.click.left=this.helperProportions.width-n.right+this.margins.left),"top"in n&&(this.offset.click.top=n.top+this.margins.top),"bottom"in n&&(this.offset.click.top=this.helperProportions.height-n.bottom+this.margins.top)},_getParentOffset:function(){var n=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(n.left+=this.scrollParent.scrollLeft(),n.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)&&(n={top:0,left:0}),{top:n.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:n.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var n=this.element.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var n,a,t,s=this.options;if(!s.containment){this.containment=null;return}if(s.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment==="document"){this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment.constructor===Array){this.containment=s.containment;return}s.containment==="parent"&&(s.containment=this.helper[0].parentNode),a=e(s.containment),t=a[0],t&&(n=a.css("overflow")!=="hidden",this.containment=[(parseInt(a.css("borderLeftWidth"),10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=a)},_convertPositionTo:function(n,a){a||(a=this.position);var t=n==="absolute"?1:-1,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:a.top+this.offset.relative.top*t+this.offset.parent.top*t-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*t,left:a.left+this.offset.relative.left*t+this.offset.parent.left*t-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*t}},_generatePosition:function(n){var a,t,s,r,o=this.options,u=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=n.pageX,w=n.pageY;return this.offset.scroll||(this.offset.scroll={top:u.scrollTop(),left:u.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(t=this.relative_container.offset(),a=[this.containment[0]+t.left,this.containment[1]+t.top,this.containment[2]+t.left,this.containment[3]+t.top]):a=this.containment,n.pageX-this.offset.click.left<a[0]&&(f=a[0]+this.offset.click.left),n.pageY-this.offset.click.top<a[1]&&(w=a[1]+this.offset.click.top),n.pageX-this.offset.click.left>a[2]&&(f=a[2]+this.offset.click.left),n.pageY-this.offset.click.top>a[3]&&(w=a[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((w-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,w=a?s-this.offset.click.top>=a[1]||s-this.offset.click.top>a[3]?s:s-this.offset.click.top>=a[1]?s-o.grid[1]:s+o.grid[1]:s,r=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=a?r-this.offset.click.left>=a[0]||r-this.offset.click.left>a[2]?r:r-this.offset.click.left>=a[0]?r-o.grid[0]:r+o.grid[0]:r)),{top:w-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(n,a,t){return t=t||this._uiHash(),e.ui.plugin.call(this,n,[a,t]),n==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,n,a,t)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(n,a){var t=e(this).data("ui-draggable"),s=t.options,r=e.extend({},a,{item:t.element});t.sortables=[],e(s.connectToSortable).each(function(){var o=e.data(this,"ui-sortable");o&&!o.options.disabled&&(t.sortables.push({instance:o,shouldRevert:o.options.revert}),o.refreshPositions(),o._trigger("activate",n,r))})},stop:function(n,a){var t=e(this).data("ui-draggable"),s=e.extend({},a,{item:t.element});e.each(t.sortables,function(){this.instance.isOver?(this.instance.isOver=0,t.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(n),this.instance.options.helper=this.instance.options._helper,t.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",n,s))})},drag:function(n,a){var t=e(this).data("ui-draggable"),s=this;e.each(t.sortables,function(){var r=!1,o=this;this.instance.positionAbs=t.positionAbs,this.instance.helperProportions=t.helperProportions,this.instance.offset.click=t.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(t.sortables,function(){return this.instance.positionAbs=t.positionAbs,this.instance.helperProportions=t.helperProportions,this.instance.offset.click=t.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return a.helper[0]},n.target=this.instance.currentItem[0],this.instance._mouseCapture(n,!0),this.instance._mouseStart(n,!0,!0),this.instance.offset.click.top=t.offset.click.top,this.instance.offset.click.left=t.offset.click.left,this.instance.offset.parent.left-=t.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=t.offset.parent.top-this.instance.offset.parent.top,t._trigger("toSortable",n),t.dropped=this.instance.element,t.currentItem=t.element,this.instance.fromOutside=t),this.instance.currentItem&&this.instance._mouseDrag(n)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",n,this.instance._uiHash(this.instance)),this.instance._mouseStop(n,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),t._trigger("fromSortable",n),t.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var n=e("body"),a=e(this).data("ui-draggable").options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(){var n=e(this).data("ui-draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(n,a){var t=e(a.helper),s=e(this).data("ui-draggable").options;t.css("opacity")&&(s._opacity=t.css("opacity")),t.css("opacity",s.opacity)},stop:function(n,a){var t=e(this).data("ui-draggable").options;t._opacity&&e(a.helper).css("opacity",t._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var n=e(this).data("ui-draggable");n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParent.offset())},drag:function(n){var a=e(this).data("ui-draggable"),t=a.options,s=!1;a.scrollParent[0]!==document&&a.scrollParent[0].tagName!=="HTML"?((!t.axis||t.axis!=="x")&&(a.overflowOffset.top+a.scrollParent[0].offsetHeight-n.pageY<t.scrollSensitivity?a.scrollParent[0].scrollTop=s=a.scrollParent[0].scrollTop+t.scrollSpeed:n.pageY-a.overflowOffset.top<t.scrollSensitivity&&(a.scrollParent[0].scrollTop=s=a.scrollParent[0].scrollTop-t.scrollSpeed)),(!t.axis||t.axis!=="y")&&(a.overflowOffset.left+a.scrollParent[0].offsetWidth-n.pageX<t.scrollSensitivity?a.scrollParent[0].scrollLeft=s=a.scrollParent[0].scrollLeft+t.scrollSpeed:n.pageX-a.overflowOffset.left<t.scrollSensitivity&&(a.scrollParent[0].scrollLeft=s=a.scrollParent[0].scrollLeft-t.scrollSpeed))):((!t.axis||t.axis!=="x")&&(n.pageY-e(document).scrollTop()<t.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-t.scrollSpeed):e(window).height()-(n.pageY-e(document).scrollTop())<t.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+t.scrollSpeed))),(!t.axis||t.axis!=="y")&&(n.pageX-e(document).scrollLeft()<t.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-t.scrollSpeed):e(window).width()-(n.pageX-e(document).scrollLeft())<t.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+t.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!t.dropBehaviour&&e.ui.ddmanager.prepareOffsets(a,n)}}),e.ui.plugin.add("draggable","snap",{start:function(){var n=e(this).data("ui-draggable"),a=n.options;n.snapElements=[],e(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var t=e(this),s=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:s.top,left:s.left})})},drag:function(n,a){var t,s,r,o,u,f,w,b,m,p,g=e(this).data("ui-draggable"),c=g.options,v=c.snapTolerance,h=a.offset.left,l=h+g.helperProportions.width,d=a.offset.top,x=d+g.helperProportions.height;for(m=g.snapElements.length-1;m>=0;m--){if(u=g.snapElements[m].left,f=u+g.snapElements[m].width,w=g.snapElements[m].top,b=w+g.snapElements[m].height,l<u-v||h>f+v||x<w-v||d>b+v||!e.contains(g.snapElements[m].item.ownerDocument,g.snapElements[m].item)){g.snapElements[m].snapping&&g.options.snap.release&&g.options.snap.release.call(g.element,n,e.extend(g._uiHash(),{snapItem:g.snapElements[m].item})),g.snapElements[m].snapping=!1;continue}c.snapMode!=="inner"&&(t=Math.abs(w-x)<=v,s=Math.abs(b-d)<=v,r=Math.abs(u-l)<=v,o=Math.abs(f-h)<=v,t&&(a.position.top=g._convertPositionTo("relative",{top:w-g.helperProportions.height,left:0}).top-g.margins.top),s&&(a.position.top=g._convertPositionTo("relative",{top:b,left:0}).top-g.margins.top),r&&(a.position.left=g._convertPositionTo("relative",{top:0,left:u-g.helperProportions.width}).left-g.margins.left),o&&(a.position.left=g._convertPositionTo("relative",{top:0,left:f}).left-g.margins.left)),p=t||s||r||o,c.snapMode!=="outer"&&(t=Math.abs(w-d)<=v,s=Math.abs(b-x)<=v,r=Math.abs(u-h)<=v,o=Math.abs(f-l)<=v,t&&(a.position.top=g._convertPositionTo("relative",{top:w,left:0}).top-g.margins.top),s&&(a.position.top=g._convertPositionTo("relative",{top:b-g.helperProportions.height,left:0}).top-g.margins.top),r&&(a.position.left=g._convertPositionTo("relative",{top:0,left:u}).left-g.margins.left),o&&(a.position.left=g._convertPositionTo("relative",{top:0,left:f-g.helperProportions.width}).left-g.margins.left)),!g.snapElements[m].snapping&&(t||s||r||o||p)&&g.options.snap.snap&&g.options.snap.snap.call(g.element,n,e.extend(g._uiHash(),{snapItem:g.snapElements[m].item})),g.snapElements[m].snapping=t||s||r||o||p}}}),e.ui.plugin.add("draggable","stack",{start:function(){var n,a=this.data("ui-draggable").options,t=e.makeArray(e(a.stack)).sort(function(s,r){return(parseInt(e(s).css("zIndex"),10)||0)-(parseInt(e(r).css("zIndex"),10)||0)});t.length&&(n=parseInt(e(t[0]).css("zIndex"),10)||0,e(t).each(function(s){e(this).css("zIndex",n+s)}),this.css("zIndex",n+t.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(n,a){var t=e(a.helper),s=e(this).data("ui-draggable").options;t.css("zIndex")&&(s._zIndex=t.css("zIndex")),t.css("zIndex",s.zIndex)},stop:function(n,a){var t=e(this).data("ui-draggable").options;t._zIndex&&e(a.helper).css("zIndex",t._zIndex)}})})(jQuery);/*!
 * jQuery UI Droppable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */(function(e,i){function n(a,t,s){return a>t&&a<t+s}e.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var a=this.options,t=a.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(t)?t:function(s){return s.is(t)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[a.scope]=e.ui.ddmanager.droppables[a.scope]||[],e.ui.ddmanager.droppables[a.scope].push(this),a.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var a=0,t=e.ui.ddmanager.droppables[this.options.scope];a<t.length;a++)t[a]===this&&t.splice(a,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(a,t){a==="accept"&&(this.accept=e.isFunction(t)?t:function(s){return s.is(t)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var t=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",a,this.ui(t))},_deactivate:function(a){var t=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),t&&this._trigger("deactivate",a,this.ui(t))},_over:function(a){var t=e.ui.ddmanager.current;!t||(t.currentItem||t.element)[0]===this.element[0]||this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",a,this.ui(t)))},_out:function(a){var t=e.ui.ddmanager.current;!t||(t.currentItem||t.element)[0]===this.element[0]||this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(t)))},_drop:function(a,t){var s=t||e.ui.ddmanager.current,r=!1;return!s||(s.currentItem||s.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var o=e.data(this,"ui-droppable");if(o.options.greedy&&!o.options.disabled&&o.options.scope===s.options.scope&&o.accept.call(o.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(o,{offset:o.element.offset()}),o.options.tolerance))return r=!0,!1}),r)?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(s)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),e.ui.intersect=function(a,t,s){if(!t.offset)return!1;var r,o,u=(a.positionAbs||a.position.absolute).left,f=u+a.helperProportions.width,w=(a.positionAbs||a.position.absolute).top,b=w+a.helperProportions.height,m=t.offset.left,p=m+t.proportions.width,g=t.offset.top,c=g+t.proportions.height;switch(s){case"fit":return m<=u&&f<=p&&g<=w&&b<=c;case"intersect":return m<u+a.helperProportions.width/2&&f-a.helperProportions.width/2<p&&g<w+a.helperProportions.height/2&&b-a.helperProportions.height/2<c;case"pointer":return r=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,o=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,n(o,g,t.proportions.height)&&n(r,m,t.proportions.width);case"touch":return(w>=g&&w<=c||b>=g&&b<=c||w<g&&b>c)&&(u>=m&&u<=p||f>=m&&f<=p||u<m&&f>p);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(a,t){var s,r,o=e.ui.ddmanager.droppables[a.options.scope]||[],u=t?t.type:null,f=(a.currentItem||a.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<o.length;s++)if(!(o[s].options.disabled||a&&!o[s].accept.call(o[s].element[0],a.currentItem||a.element))){for(r=0;r<f.length;r++)if(f[r]===o[s].element[0]){o[s].proportions.height=0;continue e}o[s].visible=o[s].element.css("display")!=="none",o[s].visible&&(u==="mousedown"&&o[s]._activate.call(o[s],t),o[s].offset=o[s].element.offset(),o[s].proportions={width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight})}},drop:function(a,t){var s=!1;return e.each((e.ui.ddmanager.droppables[a.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(a,this,this.options.tolerance)&&(s=this._drop.call(this,t)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,t)))}),s},dragStart:function(a,t){a.element.parentsUntil("body").bind("scroll.droppable",function(){a.options.refreshPositions||e.ui.ddmanager.prepareOffsets(a,t)})},drag:function(a,t){a.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(a,t),e.each(e.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var s,r,o,u=e.ui.intersect(a,this,this.options.tolerance),f=!u&&this.isover?"isout":u&&!this.isover?"isover":null;f&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),o.length&&(s=e.data(o[0],"ui-droppable"),s.greedyChild=f==="isover")),s&&f==="isover"&&(s.isover=!1,s.isout=!0,s._out.call(s,t)),this[f]=!0,this[f==="isout"?"isover":"isout"]=!1,this[f==="isover"?"_over":"_out"].call(this,t),s&&f==="isout"&&(s.isout=!1,s.isover=!0,s._over.call(s,t)))}})},dragStop:function(a,t){a.element.parentsUntil("body").unbind("scroll.droppable"),a.options.refreshPositions||e.ui.ddmanager.prepareOffsets(a,t)}}})(jQuery);/*!
 * jQuery UI Sortable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */(function(e,i){function n(t,s,r){return t>s&&t<s+r}function a(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?t.axis==="x"||a(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,s){t==="disabled"?(this.options[t]=s,this.widget().toggleClass("ui-sortable-disabled",!!s)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,s){var r=null,o=!1,u=this;return this.reverting||this.options.disabled||this.options.type==="static"||(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,u.widgetName+"-item")===u)return r=e(this),!1}),e.data(t.target,u.widgetName+"-item")===u&&(r=e(t.target)),!r)||this.options.handle&&!s&&(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(o=!0)}),!o)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,s,r){var o,u,f=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),f.containment&&this._setContainment(),f.cursor&&f.cursor!=="auto"&&(u=this.document.find("body"),this.storedCursor=u.css("cursor"),u.css("cursor",f.cursor),this.storedStylesheet=e("<style>*{ cursor: "+f.cursor+" !important; }</style>").appendTo(u)),f.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",f.opacity)),f.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",f.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!f.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var s,r,o,u,f=this.options,w=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<f.scrollSensitivity?this.scrollParent[0].scrollTop=w=this.scrollParent[0].scrollTop+f.scrollSpeed:t.pageY-this.overflowOffset.top<f.scrollSensitivity&&(this.scrollParent[0].scrollTop=w=this.scrollParent[0].scrollTop-f.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<f.scrollSensitivity?this.scrollParent[0].scrollLeft=w=this.scrollParent[0].scrollLeft+f.scrollSpeed:t.pageX-this.overflowOffset.left<f.scrollSensitivity&&(this.scrollParent[0].scrollLeft=w=this.scrollParent[0].scrollLeft-f.scrollSpeed)):(t.pageY-e(document).scrollTop()<f.scrollSensitivity?w=e(document).scrollTop(e(document).scrollTop()-f.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<f.scrollSensitivity&&(w=e(document).scrollTop(e(document).scrollTop()+f.scrollSpeed)),t.pageX-e(document).scrollLeft()<f.scrollSensitivity?w=e(document).scrollLeft(e(document).scrollLeft()-f.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<f.scrollSensitivity&&(w=e(document).scrollLeft(e(document).scrollLeft()+f.scrollSpeed))),w!==!1&&e.ui.ddmanager&&!f.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!=="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!=="x")&&(this.helper[0].style.top=this.position.top+"px"),s=this.items.length-1;s>=0;s--)if(r=this.items[s],o=r.item[0],u=this._intersectsWithPointer(r),!!u&&r.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[u===1?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&(this.options.type!=="semi-dynamic"||!e.contains(this.element[0],o))){if(this.direction=u===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(r))this._rearrange(t,r);else break;this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,s){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,o=this.placeholder.offset(),u=this.options.axis,f={};(!u||u==="x")&&(f.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),(!u||u==="y")&&(f.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(f,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,s);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var s=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(s).each(function(){var o=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);o&&r.push((t.key||o[1]+"[]")+"="+(t.key&&t.expression?o[1]:o[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var s=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},s.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(t){var s=this.positionAbs.left,r=s+this.helperProportions.width,o=this.positionAbs.top,u=o+this.helperProportions.height,f=t.left,w=f+t.width,b=t.top,m=b+t.height,p=this.offset.click.top,g=this.offset.click.left,c=this.options.axis==="x"||o+p>b&&o+p<m,v=this.options.axis==="y"||s+g>f&&s+g<w,h=c&&v;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:f<s+this.helperProportions.width/2&&r-this.helperProportions.width/2<w&&b<o+this.helperProportions.height/2&&u-this.helperProportions.height/2<m},_intersectsWithPointer:function(t){var s=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&r,u=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return o?this.floating?f&&f==="right"||u==="down"?2:1:u&&(u==="down"?2:1):!1},_intersectsWithSides:function(t){var s=n(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=n(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),u=this._getDragHorizontalDirection();return this.floating&&u?u==="right"&&r||u==="left"&&!r:o&&(o==="down"&&s||o==="up"&&!s)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var s,r,o,u,f=[],w=[],b=this._connectWith();if(b&&t)for(s=b.length-1;s>=0;s--)for(o=e(b[s]),r=o.length-1;r>=0;r--)u=e.data(o[r],this.widgetFullName),u&&u!==this&&!u.options.disabled&&w.push([e.isFunction(u.options.items)?u.options.items.call(u.element):e(u.options.items,u.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),u]);for(w.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=w.length-1;s>=0;s--)w[s][0].each(function(){f.push(this)});return e(f)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(s){for(var r=0;r<t.length;r++)if(t[r]===s.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var s,r,o,u,f,w,b,m,p=this.items,g=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(s=c.length-1;s>=0;s--)for(o=e(c[s]),r=o.length-1;r>=0;r--)u=e.data(o[r],this.widgetFullName),u&&u!==this&&!u.options.disabled&&(g.push([e.isFunction(u.options.items)?u.options.items.call(u.element[0],t,{item:this.currentItem}):e(u.options.items,u.element),u]),this.containers.push(u));for(s=g.length-1;s>=0;s--)for(f=g[s][1],w=g[s][0],r=0,m=w.length;r<m;r++)b=e(w[r]),b.data(this.widgetName+"-item",f),p.push({item:b,instance:f,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var s,r,o,u;for(s=this.items.length-1;s>=0;s--)r=this.items[s],!(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])&&(o=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=o.outerWidth(),r.height=o.outerHeight()),u=o.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(s=this.containers.length-1;s>=0;s--)u=this.containers[s].element.offset(),this.containers[s].containerCache.left=u.left,this.containers[s].containerCache.top=u.top,this.containers[s].containerCache.width=this.containers[s].element.outerWidth(),this.containers[s].containerCache.height=this.containers[s].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var s,r=t.options;(!r.placeholder||r.placeholder.constructor===String)&&(s=r.placeholder,r.placeholder={element:function(){var o=t.currentItem[0].nodeName.toLowerCase(),u=e("<"+o+">",t.document[0]).addClass(s||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return o==="tr"?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(u)}):o==="img"&&u.attr("src",t.currentItem.attr("src")),s||u.css("visibility","hidden"),u},update:function(o,u){s&&!r.forcePlaceholderSize||(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var s,r,o,u,f,w,b,m,p,g,c=null,v=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(c&&e.contains(this.containers[s].element[0],c.element[0]))continue;c=this.containers[s],v=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(c)if(this.containers.length===1)this.containers[v].containerCache.over||(this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1);else{for(o=1e4,u=null,g=c.floating||a(this.currentItem),f=g?"left":"top",w=g?"width":"height",b=this.positionAbs[f]+this.offset.click[f],r=this.items.length-1;r>=0;r--)e.contains(this.containers[v].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(g&&!n(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height)||(m=this.items[r].item.offset()[f],p=!1,Math.abs(m-b)>Math.abs(m+this.items[r][w]-b)&&(p=!0,m+=this.items[r][w]),Math.abs(m-b)<o&&(o=Math.abs(m-b),u=this.items[r],this.direction=p?"up":"down")));if(!u&&!this.options.dropOnEmpty||this.currentContainer===this.containers[v])return;u?this._rearrange(t,u,null,!0):this._rearrange(t,null,this.containers[v].element,!0),this._trigger("change",t,this._uiHash()),this.containers[v]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[v],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[v]._trigger("over",t,this._uiHash(this)),this.containers[v].containerCache.over=1}},_createHelper:function(t){var s=this.options,r=e.isFunction(s.helper)?e(s.helper.apply(this.element[0],[t,this.currentItem])):s.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(s.appendTo!=="parent"?s.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||s.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||s.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,s,r,o=this.options;o.containment==="parent"&&(o.containment=this.helper[0].parentNode),(o.containment==="document"||o.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],s=e(o.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[s.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,s.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,s){s||(s=this.position);var r=t==="absolute"?1:-1,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,u=/(html|body)/i.test(o[0].tagName);return{top:s.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():u?0:o.scrollTop())*r,left:s.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():u?0:o.scrollLeft())*r}},_generatePosition:function(t){var s,r,o=this.options,u=t.pageX,f=t.pageY,w=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,b=/(html|body)/i.test(w[0].tagName);return this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(u=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(f=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(u=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(f=this.containment[3]+this.offset.click.top)),o.grid&&(s=this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1],f=this.containment?s-this.offset.click.top>=this.containment[1]&&s-this.offset.click.top<=this.containment[3]?s:s-this.offset.click.top>=this.containment[1]?s-o.grid[1]:s+o.grid[1]:s,r=this.originalPageX+Math.round((u-this.originalPageX)/o.grid[0])*o.grid[0],u=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-o.grid[0]:r+o.grid[0]:r)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():b?0:w.scrollTop()),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():b?0:w.scrollLeft())}},_rearrange:function(t,s,r,o){r?r[0].appendChild(this.placeholder[0]):s.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?s.item[0]:s.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!o)})},_clear:function(t,s){this.reverting=!1;var r,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!s&&o.push(function(u){this._trigger("receive",u,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!s&&o.push(function(u){this._trigger("update",u,this._uiHash())}),this!==this.currentContainer&&(s||(o.push(function(u){this._trigger("remove",u,this._uiHash())}),o.push((function(u){return function(f){u._trigger("receive",f,this._uiHash(this))}}).call(this,this.currentContainer)),o.push((function(u){return function(f){u._trigger("update",f,this._uiHash(this))}}).call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)s||o.push((function(u){return function(f){u._trigger("deactivate",f,this._uiHash(this))}}).call(this,this.containers[r])),this.containers[r].containerCache.over&&(o.push((function(u){return function(f){u._trigger("out",f,this._uiHash(this))}}).call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!s){for(this._trigger("beforeStop",t,this._uiHash()),r=0;r<o.length;r++)o[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(s||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!s){for(r=0;r<o.length;r++)o[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var s=t||this;return{helper:s.helper,placeholder:s.placeholder||e([]),position:s.position,originalPosition:s.originalPosition,offset:s.positionAbs,item:s.currentItem,sender:t?t.element:null}}})})(jQuery);$.fn.clwidont=function(){function e(i){for(var n=$(i).contents(),a=n.length-1;a>=0;a--){var t=n[a].nodeType;if(t==3){var s=n[a].nodeValue,r=s.search(/\s\S*$/);if(r!=-1)return n[a].nodeValue=s.substring(0,r)+""+s.substring(r+1),!0}else if(t==1&&e(n[a]))return!0}}$(this).each(function(){e(this)})};jQuery.fn.clequalize=function(e,i){var n=0,a=0,t=$(this),s={init:function(){var r=t.parent().data("eqcols");r!=null&&(i=r),i!=null&&t.length>i?s.step():s.adjust()},step:function(){var r;a==0?r=t.filter(":lt("+i+")"):(r=t.filter(":gt("+(a-1)+")"),r=r.filter(":lt("+i+")")),s.setmax(r),r.css(""+e,n),n=0,a<t.length-i?s.step():(r=t.filter(":gt("+(a-1)+")"),s.setmax(r),r.css(""+e,n))},setmax:function(r){$(r).each(function(){var o=s.value(this,e);o>n&&(n=o),a++})},adjust:function(){t.each(function(){var r=s.value(this,e);r>n&&(n=r)}),t.css(""+e,n)},value:function(r){if(e=="height")return $(r).height();if(e=="width")return $(r).width()}};s.init()};(function(e){e.fn.clcarousel=function(i){var n=e.extend({},e.fn.clcarousel.defaultOptions,i);return this.each(function(){var a,t=e(this),s=e(this).children(n.children),r,o,u,f=!1,w=0;n.orientation=="horizontal"&&(u=!0);var b={init:function(){b.detectEasing(),b.structure(),b.navigation(),b.animateItems()},detectEasing:function(){e.easing.def||n.easing!="swing"&&n.easing!="linear"&&(n.easing="swing")},structure:function(){if(t.addClass("carousel").wrap('<div class="carousel-mask"></div>').parent().wrap('<div class="carousel-wrap"></div>'),a=t.closest(".carousel-wrap"),a.addClass("carousel-"+n.orientation),n.size&&(u?a.find(".carousel-mask").width(n.size):a.find(".carousel-mask").height(n.size)),u){var m=0;s.each(function(){m+=e(this).outerWidth(!0)}),t.width(m)}b.items()},checkIndex:function(){var m=s.length;w>=m-n.show?(o.addClass("carousel-disabled"),w=m-n.show):o.removeClass("carousel-disabled"),w<=0?(w=0,r.addClass("carousel-disabled")):r.removeClass("carousel-disabled")},animateItems:function(){b.checkIndex();for(var m=0,p=0;p<w;p++)u?m+=s.eq(p).outerWidth(!0):m+=s.eq(p).outerHeight(!0);u?t.stop().animate({left:-m},n.speed,n.easing,function(){f=!1,n.onAnimateEnd&&n.onAnimateEnd()}):t.stop().animate({top:-m},n.speed,n.easing,function(){f=!1,n.onAnimateEnd&&n.onAnimateEnd()})},navigation:function(){var m='<ul class="carousel-nav"><li class="carousel-prev"><a href="#"><span>'+n.prevlabel+'</span></a></li><li class="carousel-next"><a href="#"><span>'+n.nextlabel+"</span></a></li></ul>";a.prepend(m),r=a.find("li.carousel-prev a"),o=a.find("li.carousel-next a"),a.find(".carousel-nav a").click(function(){return!f&&!e(this).hasClass("carousel-disabled")&&(f=!0,e(this).parent().hasClass("carousel-prev")&&(n.interval?(w-=n.interval,w<0&&(w=0)):w--),e(this).parent().hasClass("carousel-next")&&(n.interval?(w+=n.interval,w>=s.length&&(w=s.length)):w++),b.animateItems()),!1})},items:function(){s.click(function(){typeof n.clickevent=="function"&&(b.selectitem(e(this)),n.clickevent.call(e(this)))})},selectitem:function(m){s.removeClass("carousel-selected"),e(m).addClass("carousel-selected")}};b.init()})},e.fn.clcarousel.defaultOptions={show:4,interval:null,children:"li",speed:250,prevlabel:"Prev",nextlabel:"Next",size:null,orientation:"horizontal",clickevent:null,onAnimateEnd:null,easing:"easeOutExpo"}})(jQuery);var Mt=function(){return Mt=Object.assign||function(e){for(var i,n=1,a=arguments.length;n<a;n++){i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},Mt.apply(this,arguments)},sr={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},rr=function(){function e(i){i===void 0&&(i={}),this.opts=Mt(Mt({},sr),i)}return e.prototype.spin=function(i){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),this.el.style.position=this.opts.position,this.el.style.width="0",this.el.style.zIndex=this.opts.zIndex.toString(),this.el.style.left=this.opts.left,this.el.style.top=this.opts.top,this.el.style.transform="scale(".concat(this.opts.scale,")"),i&&i.insertBefore(this.el,i.firstChild||null),ar(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&(this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function $i(e,i){return typeof e=="string"?e:e[i%e.length]}function ar(e,i){var n=Math.round(i.corners*i.width*500)/1e3+"px",a="none";i.shadow===!0?a="0 2px 4px #000":typeof i.shadow=="string"&&(a=i.shadow);for(var t=or(a),s=0;s<i.lines;s++){var r=~~(360/i.lines*s+i.rotate),o=document.createElement("div");o.style.position="absolute",o.style.top="".concat(-i.width/2,"px"),o.style.width=i.length+i.width+"px",o.style.height=i.width+"px",o.style.background=$i(i.fadeColor,s),o.style.borderRadius=n,o.style.transformOrigin="left",o.style.transform="rotate(".concat(r,"deg) translateX(").concat(i.radius,"px)");var u=s*i.direction/i.lines/i.speed;u-=1/i.speed;var f=document.createElement("div");f.style.width="100%",f.style.height="100%",f.style.background=$i(i.color,s),f.style.borderRadius=n,f.style.boxShadow=lr(t,r),f.style.animation="".concat(1/i.speed,"s linear ").concat(u,"s infinite ").concat(i.animation),o.appendChild(f),e.appendChild(o)}}function or(e){for(var i=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],a=0,t=e.split(",");a<t.length;a++){var s=t[a],r=s.match(i);if(r!==null){var o=+r[2],u=+r[5],f=r[4],w=r[7];o===0&&!f&&(f=w),u===0&&!w&&(w=f),f===w&&n.push({prefix:r[1]||"",x:o,y:u,xUnits:f,yUnits:w,end:r[8]})}}return n}function lr(e,i){for(var n=[],a=0,t=e;a<t.length;a++){var s=t[a],r=cr(s.x,s.y,i);n.push(s.prefix+r[0]+s.xUnits+" "+r[1]+s.yUnits+s.end)}return n.join(", ")}function cr(e,i,n){var a=n*Math.PI/180,t=Math.sin(a),s=Math.cos(a);return[Math.round((e*s+i*t)*1e3)/1e3,Math.round((-e*t+i*s)*1e3)/1e3]}var _t={exports:{}};/*!
 * typeahead.js 1.4.2
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT
 */var ur=_t.exports,Ui;function fr(){return Ui||(Ui=1,function(e){(function(i,n){e.exports?e.exports=n(zt()):i.Bloodhound=n(i.jQuery)})(ur,function(i){var n=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(p){return!p||/^\s*$/.test(p)},escapeRegExChars:function(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(p){return typeof p=="string"},isNumber:function(p){return typeof p=="number"},isArray:i.isArray,isFunction:i.isFunction,isObject:i.isPlainObject,isUndefined:function(p){return typeof p>"u"},isElement:function(p){return!!(p&&p.nodeType===1)},isJQuery:function(p){return p instanceof i},toStr:function(g){return n.isUndefined(g)||g===null?"":g+""},bind:i.proxy,each:function(p,g){i.each(p,c);function c(v,h){return g(h,v)}},map:i.map,filter:i.grep,every:function(p,g){var c=!0;return p?(i.each(p,function(v,h){if(!(c=g.call(null,h,v,p)))return!1}),!!c):c},some:function(p,g){var c=!1;return p?(i.each(p,function(v,h){if(c=g.call(null,h,v,p))return!1}),!!c):c},mixin:i.extend,identity:function(p){return p},clone:function(p){return i.extend(!0,{},p)},getIdGenerator:function(){var p=0;return function(){return p++}},templatify:function(g){return i.isFunction(g)?g:c;function c(){return String(g)}},defer:function(p){setTimeout(p,0)},debounce:function(p,g,c){var v,h;return function(){var l=this,d=arguments,x,_;return x=function(){v=null,c||(h=p.apply(l,d))},_=c&&!v,clearTimeout(v),v=setTimeout(x,g),_&&(h=p.apply(l,d)),h}},throttle:function(p,g){var c,v,h,l,d,x;return d=0,x=function(){d=new Date,h=null,l=p.apply(c,v)},function(){var _=new Date,k=g-(_-d);return c=this,v=arguments,k<=0?(clearTimeout(h),h=null,d=_,l=p.apply(c,v)):h||(h=setTimeout(x,k)),l}},stringify:function(p){return n.isString(p)?p:JSON.stringify(p)},guid:function(){function p(g){var c=(Math.random().toString(16)+"000000000").substr(2,8);return g?"-"+c.substr(0,4)+"-"+c.substr(4,4):c}return"tt-"+p()+p(!0)+p(!0)+p()},noop:function(){}}}(),a="1.4.2",t=function(){return{nonword:g,whitespace:p,ngram:c,obj:{nonword:v(g),whitespace:v(p),ngram:v(c)}};function p(h){return h=n.toStr(h),h?h.split(/\s+/):[]}function g(h){return h=n.toStr(h),h?h.split(/\W+/):[]}function c(h){h=n.toStr(h);var l=[],d="";return n.each(h.split(""),function(x){x.match(/\s+/)?d="":(l.push(d+x),d+=x)}),l}function v(h){return function(d){return d=n.isArray(d)?d:[].slice.call(arguments,0),function(_){var k=[];return n.each(d,function(y){k=k.concat(h(n.toStr(_[y])))}),k}}}}(),s=function(){function p(v){this.maxSize=n.isNumber(v)?v:100,this.reset(),this.maxSize<=0&&(this.set=this.get=i.noop)}n.mixin(p.prototype,{set:function(h,l){var d=this.list.tail,x;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(x=this.hash[h])?(x.val=l,this.list.moveToFront(x)):(x=new c(h,l),this.list.add(x),this.hash[h]=x,this.size++)},get:function(h){var l=this.hash[h];if(l)return this.list.moveToFront(l),l.val},reset:function(){this.size=0,this.hash={},this.list=new g}});function g(){this.head=this.tail=null}n.mixin(g.prototype,{add:function(h){this.head&&(h.next=this.head,this.head.prev=h),this.head=h,this.tail=this.tail||h},remove:function(h){h.prev?h.prev.next=h.next:this.head=h.next,h.next?h.next.prev=h.prev:this.tail=h.prev},moveToFront:function(v){this.remove(v),this.add(v)}});function c(v,h){this.key=v,this.val=h,this.prev=this.next=null}return p}(),r=function(){var p;try{p=window.localStorage,p.setItem("~~~","!"),p.removeItem("~~~")}catch(d){p=null}function g(d,x){this.prefix=["__",d,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+n.escapeRegExChars(this.prefix)),this.ls=x||p,!this.ls&&this._noop()}return n.mixin(g.prototype,{_prefix:function(d){return this.prefix+d},_ttlKey:function(d){return this._prefix(d)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=n.noop},_safeSet:function(d,x){try{this.ls.setItem(d,x)}catch(_){_.name==="QuotaExceededError"&&(this.clear(),this._noop())}},get:function(d){return this.isExpired(d)&&this.remove(d),h(this.ls.getItem(this._prefix(d)))},set:function(d,x,_){return n.isNumber(_)?this._safeSet(this._ttlKey(d),v(c()+_)):this.ls.removeItem(this._ttlKey(d)),this._safeSet(this._prefix(d),v(x))},remove:function(d){return this.ls.removeItem(this._ttlKey(d)),this.ls.removeItem(this._prefix(d)),this},clear:function(){var d,x=l(this.keyMatcher);for(d=x.length;d--;)this.remove(x[d]);return this},isExpired:function(d){var x=h(this.ls.getItem(this._ttlKey(d)));return!!(n.isNumber(x)&&c()>x)}}),g;function c(){return new Date().getTime()}function v(d){return JSON.stringify(n.isUndefined(d)?null:d)}function h(d){return i.parseJSON(d)}function l(d){var x,_,k=[],y=p.length;for(x=0;x<y;x++)(_=p.key(x)).match(d)&&k.push(_.replace(d,""));return k}}(),o=function(){var p=0,g={},c=new s(10);function v(h){h=h||{},this.maxPendingRequests=h.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=h.transport,this._get=h.limiter?h.limiter(this._get):this._get,this._cache=h.cache===!1?new s(0):c}return v.setMaxPendingRequests=function(l){this.maxPendingRequests=l},v.resetCache=function(){c.reset()},n.mixin(v.prototype,{_fingerprint:function(l){return l=l||{},l.url+l.type+i.param(l.data||{})},_get:function(h,l){var d=this,x,_;if(x=this._fingerprint(h),this.cancelled||x!==this.lastReq)return;(_=g[x])?_.done(k).fail(y):p<this.maxPendingRequests?(p++,g[x]=this._send(h).done(k).fail(y).always(C)):this.onDeckRequestArgs=[].slice.call(arguments,0);function k(S){l(null,S),d._cache.set(x,S)}function y(){l(!0)}function C(){p--,delete g[x],d.onDeckRequestArgs&&(d._get.apply(d,d.onDeckRequestArgs),d.onDeckRequestArgs=null)}},get:function(h,l){var d,x;l=l||i.noop,h=n.isString(h)?{url:h}:h||{},x=this._fingerprint(h),this.cancelled=!1,this.lastReq=x,(d=this._cache.get(x))?l(null,d):this._get(h,l)},cancel:function(){this.cancelled=!0}}),v}(),u=window.SearchIndex=function(){var p="c",g="i";function c(x){x=x||{},(!x.datumTokenizer||!x.queryTokenizer)&&i.error("datumTokenizer and queryTokenizer are both required"),this.identify=x.identify||n.stringify,this.datumTokenizer=x.datumTokenizer,this.queryTokenizer=x.queryTokenizer,this.matchAnyQueryToken=x.matchAnyQueryToken,this.reset()}return n.mixin(c.prototype,{bootstrap:function(_){this.datums=_.datums,this.trie=_.trie},add:function(x){var _=this;x=n.isArray(x)?x:[x],n.each(x,function(k){var y,C;_.datums[y=_.identify(k)]=k,C=v(_.datumTokenizer(k)),n.each(C,function(S){var T,E,A;for(T=_.trie,E=S.split("");A=E.shift();)T=T[p][A]||(T[p][A]=h()),T[g].push(y)})})},get:function(_){var k=this;return n.map(_,function(y){return k.datums[y]})},search:function(_){var k=this,y,C;return y=v(this.queryTokenizer(_)),n.each(y,function(S){var T,E,A,P;if(C&&C.length===0&&!k.matchAnyQueryToken)return!1;for(T=k.trie,E=S.split("");T&&(A=E.shift());)T=T[p][A];if(T&&E.length===0)P=T[g].slice(0),C=C?d(C,P):P;else if(!k.matchAnyQueryToken)return C=[],!1}),C?n.map(l(C),function(S){return k.datums[S]}):[]},all:function(){var _=[];for(var k in this.datums)_.push(this.datums[k]);return _},reset:function(){this.datums={},this.trie=h()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c;function v(x){return x=n.filter(x,function(_){return!!_}),x=n.map(x,function(_){return _.toLowerCase()}),x}function h(){var x={};return x[g]=[],x[p]={},x}function l(x){for(var _={},k=[],y=0,C=x.length;y<C;y++)_[x[y]]||(_[x[y]]=!0,k.push(x[y]));return k}function d(x,_){var k=0,y=0,C=[];x=x.sort(),_=_.sort();for(var S=x.length,T=_.length;k<S&&y<T;)x[k]<_[y]?k++:(x[k]>_[y]||(C.push(x[k]),k++),y++);return C}}(),f=function(){var p;p={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function g(c){this.url=c.url,this.ttl=c.ttl,this.cache=c.cache,this.prepare=c.prepare,this.transform=c.transform,this.transport=c.transport,this.thumbprint=c.thumbprint,this.storage=new r(c.cacheKey)}return n.mixin(g.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(v){this.cache&&(this.storage.set(p.data,v,this.ttl),this.storage.set(p.protocol,location.protocol,this.ttl),this.storage.set(p.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var v={},h;return this.cache?(v.data=this.storage.get(p.data),v.protocol=this.storage.get(p.protocol),v.thumbprint=this.storage.get(p.thumbprint),h=v.thumbprint!==this.thumbprint||v.protocol!==location.protocol,v.data&&!h?v.data:null):null},fromNetwork:function(c){var v=this,h;if(!c)return;h=this.prepare(this._settings()),this.transport(h).fail(l).done(d);function l(){c(!0)}function d(x){c(null,v.transform(x))}},clear:function(){return this.storage.clear(),this}}),g}(),w=function(){function p(g){this.url=g.url,this.prepare=g.prepare,this.transform=g.transform,this.indexResponse=g.indexResponse,this.transport=new o({cache:g.cache,limiter:g.limiter,transport:g.transport,maxPendingRequests:g.maxPendingRequests})}return n.mixin(p.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(c,v){var h=this,l;if(!v)return;return c=c||"",l=this.prepare(c,this._settings()),this.transport.get(l,d);function d(x,_){v(x?[]:h.transform(_))}},cancelLastRequest:function(){this.transport.cancel()}}),p}(),b=function(){return function(d){var x,_;return x={initialize:!0,identify:n.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},d=n.mixin(x,d||{}),!d.datumTokenizer&&i.error("datumTokenizer is required"),!d.queryTokenizer&&i.error("queryTokenizer is required"),_=d.sorter,d.sorter=_?function(k){return k.sort(_)}:n.identity,d.local=n.isFunction(d.local)?d.local():d.local,d.prefetch=p(d.prefetch),d.remote=g(d.remote),d};function p(l){var d;return l?(d={url:null,ttl:24*60*60*1e3,cache:!0,cacheKey:null,thumbprint:"",prepare:n.identity,transform:n.identity,transport:null},l=n.isString(l)?{url:l}:l,l=n.mixin(d,l),!l.url&&i.error("prefetch requires url to be set"),l.transform=l.filter||l.transform,l.cacheKey=l.cacheKey||l.url,l.thumbprint=a+l.thumbprint,l.transport=l.transport?h(l.transport):i.ajax,l):null}function g(l){var d;if(l)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:n.identity,transport:null},l=n.isString(l)?{url:l}:l,l=n.mixin(d,l),!l.url&&i.error("remote requires url to be set"),l.transform=l.filter||l.transform,l.prepare=c(l),l.limiter=v(l),l.transport=l.transport?h(l.transport):i.ajax,delete l.replace,delete l.wildcard,delete l.rateLimitBy,delete l.rateLimitWait,l}function c(l){var d,x,_;if(d=l.prepare,x=l.replace,_=l.wildcard,d)return d;return x?d=k:l.wildcard?d=y:d=C,d;function k(S,T){return T.url=x(T.url,S),T}function y(S,T){return T.url=T.url.replace(_,encodeURIComponent(S)),T}function C(S,T){return T}}function v(l){var d,x,_;return d=l.limiter,x=l.rateLimitBy,_=l.rateLimitWait,d||(d=/^throttle$/i.test(x)?y(_):k(_)),d;function k(C){return function(T){return n.debounce(T,C)}}function y(C){return function(T){return n.throttle(T,C)}}}function h(l){return function(x){var _=i.Deferred();return l(x,k,y),_;function k(C){n.defer(function(){_.resolve(C)})}function y(C){n.defer(function(){_.reject(C)})}}}}(),m=function(){var p;p=window&&window.Bloodhound;function g(c){c=b(c),this.sorter=c.sorter,this.identify=c.identify,this.sufficient=c.sufficient,this.indexRemote=c.indexRemote,this.local=c.local,this.remote=c.remote?new w(c.remote):null,this.prefetch=c.prefetch?new f(c.prefetch):null,this.index=new u({identify:this.identify,datumTokenizer:c.datumTokenizer,queryTokenizer:c.queryTokenizer}),c.initialize!==!1&&this.initialize()}return g.noConflict=function(){return window&&(window.Bloodhound=p),g},g.tokenizers=t,n.mixin(g.prototype,{__ttAdapter:function(){var v=this;return this.remote?h:l;function h(d,x,_){return v.search(d,x,_)}function l(d,x){return v.search(d,x)}},_loadPrefetch:function(){var v=this,h,l;return h=i.Deferred(),this.prefetch?(l=this.prefetch.fromCache())?(this.index.bootstrap(l),h.resolve()):this.prefetch.fromNetwork(d):h.resolve(),h.promise();function d(x,_){if(x)return h.reject();v.add(_),v.prefetch.store(v.index.serialize()),h.resolve()}},_initialize:function(){var v=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(h),this.initPromise;function h(){v.add(v.local)}},initialize:function(v){return!this.initPromise||v?this._initialize():this.initPromise},add:function(v){return this.index.add(v),this},get:function(v){return v=n.isArray(v)?v:[].slice.call(arguments),this.index.get(v)},search:function(v,h,l){var d=this,x;return h=h||n.noop,l=l||n.noop,x=this.sorter(this.index.search(v)),h(this.remote?x.slice():x),this.remote&&x.length<this.sufficient?this.remote.get(v,_):this.remote&&this.remote.cancelLastRequest(),this;function _(k){var y=[];n.each(k,function(C){!n.some(x,function(S){return d.identify(C)===d.identify(S)})&&y.push(C)}),d.indexRemote&&d.add(y),l(y)}},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),g}();return m})}(_t)),_t.exports}var dr=fr();const hr=As(dr);var Ct={exports:{}};/*!
 * typeahead.js 1.4.2
 * https://github.com/corejavascript/typeahead.js
 * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT
 */var pr=Ct.exports,Yi;function mr(){return Yi||(Yi=1,function(e){(function(i,n){e.exports?e.exports=n(zt()):n(i.jQuery)})(pr,function(i){var n=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(p){return!p||/^\s*$/.test(p)},escapeRegExChars:function(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(p){return typeof p=="string"},isNumber:function(p){return typeof p=="number"},isArray:i.isArray,isFunction:i.isFunction,isObject:i.isPlainObject,isUndefined:function(p){return typeof p>"u"},isElement:function(p){return!!(p&&p.nodeType===1)},isJQuery:function(p){return p instanceof i},toStr:function(g){return n.isUndefined(g)||g===null?"":g+""},bind:i.proxy,each:function(p,g){i.each(p,c);function c(v,h){return g(h,v)}},map:i.map,filter:i.grep,every:function(p,g){var c=!0;return p?(i.each(p,function(v,h){if(!(c=g.call(null,h,v,p)))return!1}),!!c):c},some:function(p,g){var c=!1;return p?(i.each(p,function(v,h){if(c=g.call(null,h,v,p))return!1}),!!c):c},mixin:i.extend,identity:function(p){return p},clone:function(p){return i.extend(!0,{},p)},getIdGenerator:function(){var p=0;return function(){return p++}},templatify:function(g){return i.isFunction(g)?g:c;function c(){return String(g)}},defer:function(p){setTimeout(p,0)},debounce:function(p,g,c){var v,h;return function(){var l=this,d=arguments,x,_;return x=function(){v=null,c||(h=p.apply(l,d))},_=c&&!v,clearTimeout(v),v=setTimeout(x,g),_&&(h=p.apply(l,d)),h}},throttle:function(p,g){var c,v,h,l,d,x;return d=0,x=function(){d=new Date,h=null,l=p.apply(c,v)},function(){var _=new Date,k=g-(_-d);return c=this,v=arguments,k<=0?(clearTimeout(h),h=null,d=_,l=p.apply(c,v)):h||(h=setTimeout(x,k)),l}},stringify:function(p){return n.isString(p)?p:JSON.stringify(p)},guid:function(){function p(g){var c=(Math.random().toString(16)+"000000000").substr(2,8);return g?"-"+c.substr(0,4)+"-"+c.substr(4,4):c}return"tt-"+p()+p(!0)+p(!0)+p()},noop:function(){}}}(),a=function(){var p={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight",disabled:"tt-disabled"};return g;function g(l){var d,x;return x=n.mixin({},p,l),d={css:h(),classes:x,html:c(x),selectors:v(x)},{css:d.css,html:d.html,classes:d.classes,selectors:d.selectors,mixin:function(_){n.mixin(_,d)}}}function c(l){return{wrapper:'<span class="'+l.wrapper+'"></span>',menu:'<div role="listbox" class="'+l.menu+'"></div>'}}function v(l){var d={};return n.each(l,function(x,_){d[_]="."+x}),d}function h(){var l={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return n.isMsie()&&n.mixin(l.input,{backgroundImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}),l}}(),t=function(){var p,g;p="typeahead:",g={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"};function c(v){(!v||!v.el)&&i.error("EventBus initialized without el"),this.$el=i(v.el)}return n.mixin(c.prototype,{_trigger:function(v,h){var l=i.Event(p+v);return this.$el.trigger.call(this.$el,l,h||[]),l},before:function(v){var h,l;return h=[].slice.call(arguments,1),l=this._trigger("before"+v,h),l.isDefaultPrevented()},trigger:function(v){var h;this._trigger(v,[].slice.call(arguments,1)),(h=g[v])&&this._trigger(h,[].slice.call(arguments,1))}}),c}(),s=function(){var p=/\s+/,g=_();return{onSync:h,onAsync:v,off:l,trigger:d};function c(y,C,S,T){var E;if(!S)return this;for(C=C.split(p),S=T?k(S,T):S,this._callbacks=this._callbacks||{};E=C.shift();)this._callbacks[E]=this._callbacks[E]||{sync:[],async:[]},this._callbacks[E][y].push(S);return this}function v(y,C,S){return c.call(this,"async",y,C,S)}function h(y,C,S){return c.call(this,"sync",y,C,S)}function l(y){var C;if(!this._callbacks)return this;for(y=y.split(p);C=y.shift();)delete this._callbacks[C];return this}function d(y){var C,S,T,E,A;if(!this._callbacks)return this;for(y=y.split(p),T=[].slice.call(arguments,1);(C=y.shift())&&(S=this._callbacks[C]);)E=x(S.sync,this,[C].concat(T)),A=x(S.async,this,[C].concat(T)),E()&&g(A);return this}function x(y,C,S){return T;function T(){for(var E,A=0,P=y.length;!E&&A<P;A+=1)E=y[A].apply(C,S)===!1;return!E}}function _(){var y;return window.setImmediate?y=function(S){setImmediate(function(){S()})}:y=function(S){setTimeout(function(){S()},0)},y}function k(y,C){return y.bind?y.bind(C):function(){y.apply(C,[].slice.call(arguments,0))}}}(),r=function(p){var g={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},c={A:"[Aa--------]",B:"[Bb--]",C:"[Cc--]",D:"[Dd-----]",E:"[Ee------]",F:"[Ff--]",G:"[Gg--]",H:"[Hh---]",I:"[Ii---------]",J:"[Jj--]",K:"[Kk--]",L:"[Ll----]",M:"[Mm----]",N:"[Nn---]",O:"[Oo-----]",P:"[Pp---]",Q:"[Qq]",R:"[Rr-----]",S:"[Ss---]",T:"[Tt--]",U:"[Uu------]",V:"[Vv----]",W:"[Ww--]",X:"[Xx---]",Y:"[Yy--]",Z:"[Zz----]"};return function(d){var x;if(d=n.mixin({},g,d),!d.node||!d.pattern)return;d.pattern=n.isArray(d.pattern)?d.pattern:[d.pattern],x=h(d.pattern,d.caseSensitive,d.wordsOnly,d.diacriticInsensitive),k(d.node,_);function _(y){var C,S,T;return(C=x.exec(y.data))&&(T=p.createElement(d.tagName),d.className&&(T.className=d.className),S=y.splitText(C.index),S.splitText(C[0].length),T.appendChild(S.cloneNode(!0)),y.parentNode.replaceChild(T,S)),!!C}function k(y,C){for(var S,T=3,E=0;E<y.childNodes.length;E++)S=y.childNodes[E],S.nodeType===T?E+=C(S)?1:0:k(S,C)}};function v(l){return c[l.toUpperCase()]||l}function h(l,d,x,_){for(var k=[],y,C=0,S=l.length;C<S;C++){var T=n.escapeRegExChars(l[C]);_&&(T=T.replace(/\S/g,v)),k.push(T)}return y=x?"\\b("+k.join("|")+")\\b":"("+k.join("|")+")",d?new RegExp(y):new RegExp(y,"i")}}(window.document),o=function(){var p;p={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function g(l,d){var x;l=l||{},l.input||i.error("input is missing"),d.mixin(this),this.$hint=i(l.hint),this.$input=i(l.input),this.$menu=i(l.menu),x=this.$input.attr("id")||n.guid(),this.$menu.attr("id",x+"_listbox"),this.$hint.attr({"aria-hidden":!0}),this.$input.attr({"aria-owns":x+"_listbox",role:"combobox","aria-autocomplete":"list","aria-expanded":!1}),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=c(this.$input),this._checkLanguageDirection(),this.$hint.length===0&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=n.noop),this.onSync("cursorchange",this._updateDescendent)}return g.normalizeQuery=function(l){return n.toStr(l).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},n.mixin(g.prototype,s,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(d){var x=p[d.which||d.keyCode];this._managePreventDefault(x,d),x&&this._shouldTrigger(x,d)&&this.trigger(x+"Keyed",d)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(d,x){var _;switch(d){case"up":case"down":_=!h(x);break;default:_=!1}_&&x.preventDefault()},_shouldTrigger:function(d,x){var _;switch(d){case"tab":_=!h(x);break;default:_=!0}return _},_checkLanguageDirection:function(){var d=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==d&&(this.dir=d,this.$hint.attr("dir",d),this.trigger("langDirChanged",d))},_setQuery:function(d,x){var _,k;_=v(d,this.query),k=_?this.query.length!==d.length:!1,this.query=d,!x&&!_?this.trigger("queryChanged",this.query):!x&&k&&this.trigger("whitespaceChanged",this.query)},_updateDescendent:function(d,x){this.$input.attr("aria-activedescendant",x)},bind:function(){var l=this,d,x,_,k;return d=n.bind(this._onBlur,this),x=n.bind(this._onFocus,this),_=n.bind(this._onKeydown,this),k=n.bind(this._onInput,this),this.$input.on("blur.tt",d).on("focus.tt",x).on("keydown.tt",_),!n.isMsie()||n.isMsie()>9?this.$input.on("input.tt",k):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(y){p[y.which||y.keyCode]||n.defer(n.bind(l._onInput,l,y))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(d,x){this.setInputValue(d),this._setQuery(d,x)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(d){this.$input.val(d),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(d){this.$hint.val(d)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var d,x,_,k;d=this.getInputValue(),x=this.getHint(),_=d!==x&&x.indexOf(d)===0,k=d!==""&&_&&!this.hasOverflow(),!k&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var d=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=d},isCursorAtEnd:function(){var l,d,x;return l=this.$input.val().length,d=this.$input[0].selectionStart,n.isNumber(d)?d===l:document.selection?(x=document.selection.createRange(),x.moveStart("character",-l),l===x.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=i("<div>")},setAriaExpanded:function(d){this.$input.attr("aria-expanded",d)}}),g;function c(l){return i('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:l.css("font-family"),fontSize:l.css("font-size"),fontStyle:l.css("font-style"),fontVariant:l.css("font-variant"),fontWeight:l.css("font-weight"),wordSpacing:l.css("word-spacing"),letterSpacing:l.css("letter-spacing"),textIndent:l.css("text-indent"),textRendering:l.css("text-rendering"),textTransform:l.css("text-transform")}).insertAfter(l)}function v(l,d){return g.normalizeQuery(l)===g.normalizeQuery(d)}function h(l){return l.altKey||l.ctrlKey||l.metaKey||l.shiftKey}}(),u=function(){var p,g;p={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},g=n.getIdGenerator();function c(d,x){d=d||{},d.templates=d.templates||{},d.templates.notFound=d.templates.notFound||d.templates.empty,d.source||i.error("missing source"),d.node||i.error("missing node"),d.name&&!l(d.name)&&i.error("invalid dataset name: "+d.name),x.mixin(this),this.highlight=!!d.highlight,this.name=n.toStr(d.name||g()),this.limit=d.limit||5,this.displayFn=v(d.display||d.displayKey),this.templates=h(d.templates,this.displayFn),this.source=d.source.__ttAdapter?d.source.__ttAdapter():d.source,this.async=n.isUndefined(d.async)?this.source.length>2:!!d.async,this._resetLastSuggestion(),this.$el=i(d.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return c.extractData=function(x){var _=i(x);return _.data(p.obj)?{dataset:_.data(p.dataset)||"",val:_.data(p.val)||"",obj:_.data(p.obj)||null}:null},n.mixin(c.prototype,s,{_overwrite:function(x,_){_=_||[],_.length?this._renderSuggestions(x,_):this.async&&this.templates.pending?this._renderPending(x):!this.async&&this.templates.notFound?this._renderNotFound(x):this._empty(),this.trigger("rendered",_,!1,this.name)},_append:function(x,_){_=_||[],_.length&&this.$lastSuggestion.length?this._appendSuggestions(x,_):_.length?this._renderSuggestions(x,_):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(x),this.trigger("rendered",_,!0,this.name)},_renderSuggestions:function(x,_){var k;k=this._getSuggestionsFragment(x,_),this.$lastSuggestion=k.children().last(),this.$el.html(k).prepend(this._getHeader(x,_)).append(this._getFooter(x,_))},_appendSuggestions:function(x,_){var k,y;k=this._getSuggestionsFragment(x,_),y=k.children().last(),this.$lastSuggestion.after(k),this.$lastSuggestion=y},_renderPending:function(x){var _=this.templates.pending;this._resetLastSuggestion(),_&&this.$el.html(_({query:x,dataset:this.name}))},_renderNotFound:function(x){var _=this.templates.notFound;this._resetLastSuggestion(),_&&this.$el.html(_({query:x,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(x,_){var k=this,y;return y=document.createDocumentFragment(),n.each(_,function(S){var T,E;E=k._injectQuery(x,S),T=i(k.templates.suggestion(E)).data(p.dataset,k.name).data(p.obj,S).data(p.val,k.displayFn(S)).addClass(k.classes.suggestion+" "+k.classes.selectable),y.appendChild(T[0])}),this.highlight&&r({className:this.classes.highlight,node:y,pattern:x}),i(y)},_getFooter:function(x,_){return this.templates.footer?this.templates.footer({query:x,suggestions:_,dataset:this.name}):null},_getHeader:function(x,_){return this.templates.header?this.templates.header({query:x,suggestions:_,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=i()},_injectQuery:function(x,_){return n.isObject(_)?n.mixin({_query:x},_):_},update:function(x){var _=this,k=!1,y=!1,C=0;this.cancel(),this.cancel=function(){k=!0,_.cancel=i.noop,_.async&&_.trigger("asyncCanceled",x,_.name)},this.source(x,S,T),!y&&S([]);function S(E){y||(y=!0,E=(E||[]).slice(0,_.limit),C=E.length,_._overwrite(x,E),C<_.limit&&_.async&&_.trigger("asyncRequested",x,_.name))}function T(E){if(E=E||[],!k&&C<_.limit){_.cancel=i.noop;var A=Math.abs(C-_.limit);C+=A,_._append(x,E.slice(0,A)),_.async&&_.trigger("asyncReceived",x,_.name)}}},cancel:i.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=i("<div>")}}),c;function v(d){return d=d||n.stringify,n.isFunction(d)?d:x;function x(_){return _[d]}}function h(d,x){return{notFound:d.notFound&&n.templatify(d.notFound),pending:d.pending&&n.templatify(d.pending),header:d.header&&n.templatify(d.header),footer:d.footer&&n.templatify(d.footer),suggestion:d.suggestion?_:k};function _(y){var C=d.suggestion;return i(C(y)).attr("id",n.guid())}function k(y){return i('<div role="option">').attr("id",n.guid()).text(x(y))}}function l(d){return/^[_a-zA-Z0-9-]+$/.test(d)}}(),f=function(){function p(g,c){var v=this;g=g||{},g.node||i.error("node is required"),c.mixin(this),this.$node=i(g.node),this.query=null,this.datasets=n.map(g.datasets,h);function h(l){var d=v.$node.find(l.node).first();return l.node=d.length?d:i("<div>").appendTo(v.$node),new u(l,c)}}return n.mixin(p.prototype,s,{_onSelectableClick:function(c){this.trigger("selectableClicked",i(c.currentTarget))},_onRendered:function(c,v,h,l){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",v,h,l)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return n.every(this.datasets,n.bind(function(v){var h=v.isEmpty();return this.$node.attr("aria-expanded",!h),h},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var c=this.getActiveSelectable();c&&c.removeClass(this.classes.cursor)},_ensureVisible:function(c){var v,h,l,d;v=c.position().top,h=v+c.outerHeight(!0),l=this.$node.scrollTop(),d=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),v<0?this.$node.scrollTop(l+v):d<h&&this.$node.scrollTop(l+(h-d))},_getNextNonDisabledIndex:function(c,v,h,l){var d=this;function x(C){return d._getSelectables().eq(C)}function _(C){return C[0].hasAttribute("disabled")||C[0].classList.contains(d.classes.disabled)}var k=x(v);if(!k||!_(k))return v;if(c>0){for(var y=v+1;y<h;y++)if(!_(x(y)))return y}else for(var y=v-1;y>=0;y--)if(!_(x(y)))return y;return l?c>0?d._getNextNonDisabledIndex(1,0,h,!1):d._getNextNonDisabledIndex(-1,h-1,h,!1):-1},bind:function(){var g=this,c;return c=n.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,c),this.$node.on("mouseover",this.selectors.selectable,function(v){g.setCursor(i(this),v)}),this.$node.on("mouseleave",function(){g._removeCursor()}),n.each(this.datasets,function(v){v.onSync("asyncRequested",g._propagate,g).onSync("asyncCanceled",g._propagate,g).onSync("asyncReceived",g._propagate,g).onSync("rendered",g._onRendered,g).onSync("cleared",g._onCleared,g)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(c){this.$node.attr("dir",c)},selectableRelativeToCursor:function(c){var v,h,l,d,x,_;return l=this.getActiveSelectable(),v=this._getSelectables(),h=v.filter(this.selectors.disabled),h.length===v.length?null:(d=l?v.index(l):-1,x=d+c,x=(x+1)%(v.length+1)-1,x=x<-1?v.length-1:x,_=this._getNextNonDisabledIndex(c,x,v.length,!0),_===-1?null:v.eq(_))},setCursor:function(c,v){if(!(c&&c.hasClass(this.classes.disabled))&&(this._removeCursor(),c=c&&c.first())){if(c.addClass(this.classes.cursor),v&&v.type==="mouseover")return;this._ensureVisible(c)}},getSelectableData:function(c){return c&&c.length&&!c.hasClass(this.classes.disabled)?u.extractData(c):null},getActiveSelectable:function(){var c=this._getSelectables().filter(this.selectors.cursor).first();return c.length?c:null},getTopSelectable:function(){var c=this._getSelectables().not(this.selectors.disabled).first();return c.length?c:null},disableSelectable:function(c){c.addClass(this.classes.disabled)},enableSelectable:function(c){c.removeClass(this.classes.disabled)},update:function(c){var v=c!==this.query;return v&&(this.query=c,n.each(this.datasets,h)),v;function h(l){l.update(c)}},empty:function(){n.each(this.datasets,c),this.query=null,this.$node.addClass(this.classes.empty);function c(v){v.clear()}},destroy:function(){this.$node.off(".tt"),this.$node=i("<div>"),n.each(this.datasets,c);function c(v){v.destroy()}}}),p}(),w=function(){function p(g){this.$el=i("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),g.$input.after(this.$el),n.each(g.menu.datasets,n.bind(function(c){c.onSync&&(c.onSync("rendered",n.bind(this.update,this)),c.onSync("cleared",n.bind(this.cleared,this)))},this))}return n.mixin(p.prototype,{update:function(c,v){var h=v.length,l;h===1?l={result:"result",is:"is"}:l={result:"results",is:"are"},this.$el.text(h+" "+l.result+" "+l.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),p}(),b=function(){var p=f.prototype;function g(){f.apply(this,[].slice.call(arguments,0))}return n.mixin(g.prototype,f.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),p.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),p.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),p._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),p._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(v){return this.$node.css(v==="ltr"?this.css.ltr:this.css.rtl),p.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),g}(),m=function(){function p(c,v){var h,l,d,x,_,k,y,C,S,T,E;c=c||{},c.input||i.error("missing input"),c.menu||i.error("missing menu"),c.eventBus||i.error("missing event bus"),v.mixin(this),this.eventBus=c.eventBus,this.minLength=n.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.autoselect=!!c.autoselect,this.clearOnSelect=!!c.clearOnSelect,this.persistQuery=!!c.persistQuery,this.preventClose=!!c.preventClose,this.disableSuggestionOnSelect=!!c.disableSuggestionOnSelect,this.disableOnDirectionKeyAutoCompletion=!!c.disableOnDirectionKeyAutoCompletion,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),h=g(this,"activate","open","_onFocused"),l=g(this,"deactivate","_onBlurred"),d=g(this,"isActive","isOpen","_onEnterKeyed"),x=g(this,"isActive","isOpen","_onTabKeyed"),_=g(this,"isActive","_onEscKeyed"),k=g(this,"isActive","open","_onUpKeyed"),y=g(this,"isActive","open","_onDownKeyed"),C=g(this,"isActive","isOpen","_onLeftKeyed"),S=g(this,"isActive","isOpen","_onRightKeyed"),T=g(this,"_openIfActive","_onQueryChanged"),E=g(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",h,this).onSync("blurred",l,this).onSync("enterKeyed",d,this).onSync("tabKeyed",x,this).onSync("escKeyed",_,this).onSync("upKeyed",k,this).onSync("downKeyed",y,this).onSync("leftKeyed",C,this).onSync("rightKeyed",S,this).onSync("queryChanged",T,this).onSync("whitespaceChanged",E,this).onSync("langDirChanged",this._onLangDirChanged,this)}return n.mixin(p.prototype,{_hacks:function(){var v,h;v=this.input.$input||i("<div>"),h=this.menu.$node||i("<div>"),v.on("blur.tt",function(l){var d,x,_;d=document.activeElement,x=h.is(d),_=h.has(d).length>0,n.isMsie()&&(x||_)&&(l.preventDefault(),l.stopImmediatePropagation(),n.defer(function(){v.focus()}))}),h.on("mousedown.tt",function(l){l.preventDefault()})},_onSelectableClicked:function(v,h){this.select(h)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(v,h,l,d){if(this._updateHint(),this.autoselect){var x=this.selectors.cursor.substr(1);this.menu.$node.find(this.selectors.suggestion).first().addClass(x)}this.menu.$node[0].scrollTop=0,this.eventBus.trigger("render",h,l,d)},_onAsyncRequested:function(v,h,l){this.eventBus.trigger("asyncrequest",l,h)},_onAsyncCanceled:function(v,h,l){this.eventBus.trigger("asynccancel",l,h)},_onAsyncReceived:function(v,h,l){this.eventBus.trigger("asyncreceive",l,h)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(v,h){var l;(l=this.menu.getActiveSelectable())?this.select(l)&&(h.preventDefault(),h.stopPropagation()):this.autoselect&&this.select(this.menu.getTopSelectable())&&(h.preventDefault(),h.stopPropagation())},_onTabKeyed:function(v,h){var l;(l=this.menu.getActiveSelectable())?this.select(l)&&h.preventDefault():this.autoselect&&(l=this.menu.getTopSelectable())&&this.autocomplete(l)&&h.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){!this.disableOnDirectionKeyAutoCompletion&&this.dir==="rtl"&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){!this.disableOnDirectionKeyAutoCompletion&&this.dir==="ltr"&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(v,h){this._minLengthMet(h)?this.menu.update(h):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(v,h){this.dir!==h&&(this.dir=h,this.menu.setLanguageDirection(h))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(v){return v=n.isString(v)?v:this.input.getQuery()||"",v.length>=this.minLength},_updateHint:function(){var v,h,l,d,x,_,k;v=this.menu.getTopSelectable(),h=this.menu.getSelectableData(v),l=this.input.getInputValue(),h&&!n.isBlankString(l)&&!this.input.hasOverflow()?(d=o.normalizeQuery(l),x=n.escapeRegExChars(d),_=new RegExp("^(?:"+x+")(.+$)","i"),k=_.exec(h.val),k&&this.input.setHint(l+k[1])):this.input.clearHint()},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return!this.isOpen()&&!this.eventBus.before("open")&&(this.input.setAriaExpanded(!0),this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return!this.preventClose&&this.isOpen()&&!this.eventBus.before("close")&&(this.input.setAriaExpanded(!1),this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(v){this.input.setQuery(n.toStr(v))},getVal:function(){return this.input.getQuery()},select:function(v){var h=this.menu.getSelectableData(v);return h&&!this.eventBus.before("select",h.obj,h.dataset)?(this.persistQuery||(this.clearOnSelect?this.setVal(""):this.input.setQuery(h.val,!0)),this.disableSuggestionOnSelect&&this.menu.disableSelectable(v),this.eventBus.trigger("select",h.obj,h.dataset),this.close(),!0):!1},autocomplete:function(v){var h,l,d;return h=this.input.getQuery(),l=this.menu.getSelectableData(v),d=l&&h!==l.val,d&&!this.eventBus.before("autocomplete",l.obj,l.dataset)?(this.persistQuery||this.input.setQuery(l.val),this.eventBus.trigger("autocomplete",l.obj,l.dataset),!0):!1},moveCursor:function(v){var h,l,d,x,_,k,y;return h=this.input.getQuery(),l=this.menu.selectableRelativeToCursor(v),d=this.menu.getSelectableData(l),x=d?d.obj:null,_=d?d.dataset:null,y=l?l.attr("id"):null,this.input.trigger("cursorchange",y),k=this._minLengthMet()&&this.menu.update(h),!k&&!this.eventBus.before("cursorchange",x,_)?(this.menu.setCursor(l),!this.persistQuery&&d?typeof d.val=="string"&&this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",x,_),!0):!1},destroy:function(){this.input.destroy(),this.menu.destroy()}}),p;function g(c){var v=[].slice.call(arguments,1);return function(){var h=[].slice.call(arguments);n.each(v,function(l){return c[l].apply(c,h)})}}}();(function(){var p,g,c;p=i.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},c={initialize:function(y,C){var S;return C=n.isArray(C)?C:[].slice.call(arguments,1),y=y||{},S=a(y.classNames),this.each(T);function T(){var E,A,P,D,O,M,L,I,z,j,B;n.each(C,function(N){N.highlight=!!y.highlight}),E=i(this),A=i(S.html.wrapper),P=_(y.hint),D=_(y.menu),O=y.hint!==!1&&!P,M=y.menu!==!1&&!D,O&&(P=h(E,S)),M&&(D=i(S.html.menu).css(S.css.menu)),P&&P.val(""),E=l(E,S),(O||M)&&(A.css(S.css.wrapper),E.css(O?S.css.input:S.css.inputWithNoHint),E.wrap(A).parent().prepend(O?P:null).append(M?D:null)),B=M?b:f,L=new t({el:E}),I=new o({hint:P,input:E,menu:D},S),z=new B({node:D,datasets:C},S),new w({$input:E,menu:z}),j=new m({input:I,menu:z,eventBus:L,minLength:y.minLength,autoselect:y.autoselect,clearOnSelect:y.clearOnSelect,persistQuery:y.persistQuery,preventClose:y.preventClose,disableSuggestionOnSelect:y.disableSuggestionOnSelect,disableOnDirectionKeyAutoCompletion:y.disableOnDirectionKeyAutoCompletion},S),E.data(g.www,S),E.data(g.typeahead,j)}},isEnabled:function(){var y;return v(this.first(),function(C){y=C.isEnabled()}),y},enable:function(){return v(this,function(y){y.enable()}),this},disable:function(){return v(this,function(y){y.disable()}),this},isActive:function(){var y;return v(this.first(),function(C){y=C.isActive()}),y},activate:function(){return v(this,function(y){y.activate()}),this},deactivate:function(){return v(this,function(y){y.deactivate()}),this},isOpen:function(){var y;return v(this.first(),function(C){y=C.isOpen()}),y},open:function(){return v(this,function(y){y.open()}),this},close:function(){return v(this,function(y){y.close()}),this},select:function(y){var C=!1,S=i(y);return v(this.first(),function(T){C=T.select(S)}),C},autocomplete:function(y){var C=!1,S=i(y);return v(this.first(),function(T){C=T.autocomplete(S)}),C},moveCursor:function(y){var C=!1;return v(this.first(),function(S){C=S.moveCursor(y)}),C},val:function(y){var C;return arguments.length?(v(this,function(S){S.setVal(n.toStr(y))}),this):(v(this.first(),function(S){C=S.getVal()}),C)},destroy:function(){return v(this,function(y,C){x(C),y.destroy()}),this}},i.fn.typeahead=function(k){return c[k]?c[k].apply(this,[].slice.call(arguments,1)):c.initialize.apply(this,arguments)},i.fn.typeahead.noConflict=function(){return i.fn.typeahead=p,this};function v(k,y){k.each(function(){var C=i(this),S;(S=C.data(g.typeahead))&&y(S,C)})}function h(k,y){return k.clone().addClass(y.classes.hint).removeData().css(y.css.hint).css(d(k)).prop({readonly:!0,required:!1}).removeAttr("id name placeholder").removeClass("required").attr({spellcheck:"false",tabindex:-1})}function l(k,y){k.data(g.attrs,{dir:k.attr("dir"),autocomplete:k.attr("autocomplete"),spellcheck:k.attr("spellcheck"),style:k.attr("style")}),k.addClass(y.classes.input).attr({spellcheck:!1});try{!k.attr("dir")&&k.attr("dir","auto")}catch(C){}return k}function d(k){return{backgroundAttachment:k.css("background-attachment"),backgroundClip:k.css("background-clip"),backgroundColor:k.css("background-color"),backgroundImage:k.css("background-image"),backgroundOrigin:k.css("background-origin"),backgroundPosition:k.css("background-position"),backgroundRepeat:k.css("background-repeat"),backgroundSize:k.css("background-size")}}function x(k){var y,C;y=k.data(g.www),C=k.parent().filter(y.selectors.wrapper),n.each(k.data(g.attrs),function(S,T){n.isUndefined(S)?k.removeAttr(T):k.attr(T,S)}),k.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(y.classes.input),C.length&&(k.detach().insertAfter(C),C.remove())}function _(k){var y,C;return y=n.isJQuery(k)||n.isElement(k),C=y?i(k).first():[],C.length?C:null}})()})}(Ct)),Ct.exports}mr();(function(){var i=14,n=70,a=10,t=!1,s=!1,r=document.createElement("div");r.classList.add("debug-grid");var o=document.createElement("div");function u(){var l=document.createElement("div"),d=i*(n+a),x="display: flex; z-index: 9999; position: fixed; top: 0; bottom: 0; left: 0; right: 0; margin-left: auto; margin-right: auto; pointer-events: none; opacity: 0.05; box-sizing: content-box !important;";x+=" max-width: "+d+"px;";var _="flex: 1; background-color: #f00; margin-left: "+a/2+"px; margin-right: "+a/2+"px;";r.setAttribute("style",x),l.setAttribute("style",_);for(var k=0;k<i;k++){var y=l.cloneNode(!0);r.appendChild(y)}}function f(){var l=document.createElement("div"),d=i*(n+a),x="display: flex; z-index: 9999; position: fixed; top: 0; bottom: 0; left: 0; right: 0; margin-left: auto; margin-right: auto; pointer-events: none; opacity: 0.1; box-sizing: content-box !important;";x+=" max-width: "+d+"px;";var _="flex: 1; display: flex; justify-content: space-between;";o.setAttribute("style",x),l.setAttribute("style",_);for(var k=0;k<i;k++){var y=l.cloneNode(!0),C=document.createElement("div"),S=document.createElement("div");C.style.backgroundColor="#f00",C.style.width=a/2+"px",S.style.backgroundColor="#00f",S.style.width=a/2+"px",y.appendChild(C),y.appendChild(S),o.appendChild(y)}}function w(){s&&p(),console.log(document.body,document),document.body.appendChild(r),t=!0}function b(){document.body.removeChild(r),t=!1}function m(){t&&b(),document.body.appendChild(o),s=!0}function p(){document.body.removeChild(o),s=!1}document.addEventListener("keydown",function(l){l.ctrlKey&&l.altKey&&l.shiftKey&&l.key==="/"?s?p():m():l.ctrlKey&&l.altKey&&l.key==="/"&&(t?b():w())}),u(),f();const g=window.location.search,c=new URLSearchParams(g),v=c.has("columns"),h=c.has("gutters");window.onload=function(){v?w():h&&m()}})();var Sn,_n,Cn,kn;kn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function Lt(e,i){for(var n=0,a=e.length,t=[];n<a;n++)t[n]=i(e[n],n);return t}function Vi(e){return e}Sn=[96,130,165,200,235,270,304,340,375,410,445,485,520,555,590,625,660,695,736];_n=typeof Object.keys=="function"?Object.keys:function(e){var i=[],n;for(n in e)i.push(n);return i};Cn=function(i){return Object.prototype.toString.call(i)==="[object Array]"};function oe(e,i){var n=this,a=document;i=i||{},e!==void 0&&(typeof e=="string"?(i.selector=e,e=void 0):e.hasOwnProperty("length")||(i=e,e=void 0)),this.imagesOffScreen=[],this.viewportHeight=a.documentElement.clientHeight,this.selector=i.selector||".delayed-image-load",this.className=i.className||"image-replace",this.gif=a.createElement("img"),this.gif.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7",this.gif.className=this.className,this.gif.alt="",this.scrollDelay=i.scrollDelay||250,this.onResize=i.hasOwnProperty("onResize")?i.onResize:!0,this.lazyload=i.hasOwnProperty("lazyload")?i.lazyload:!1,this.lazyloadOffset=i.hasOwnProperty("lazyloadOffset")?i.lazyloadOffset:0,this.scrolled=!1,this.devicePixelRatio=oe.getPixelRatio(),i.availableWidths===void 0&&(i.availableWidths=Sn),typeof i.afterChange=="function"&&(this.afterChange=i.afterChange),Cn(i.availableWidths)?(this.availableWidths=i.availableWidths,this.widthsMap=oe.createWidthsMap(this.availableWidths)):(this.availableWidths=_n(i.availableWidths),this.widthsMap=i.availableWidths),this.availableWidths=this.availableWidths.sort(function(t,s){return t-s}),e?(this.divs=Lt(e,Vi),this.selector=null):this.divs=Lt(a.querySelectorAll(this.selector),Vi),this.changeDivsToEmptyImages(),kn(function(){n.init()})}oe.prototype.scrollCheck=function(){this.scrolled&&(this.imagesOffScreen.length||window.clearInterval(this.interval),this.divs=this.imagesOffScreen.slice(0),this.imagesOffScreen.length=0,this.changeDivsToEmptyImages(),this.scrolled=!1)};oe.prototype.init=function(){this.initialized=!0,this.checkImagesNeedReplacing(this.divs),this.onResize&&this.registerResizeEvent(),this.lazyload&&this.registerScrollEvent()};oe.prototype.createGif=function(e){if(e.className.match(new RegExp("(^| )"+this.className+"( |$)")))return e;var i=this.gif.cloneNode(!1);return i.width=e.getAttribute("data-width"),i.setAttribute("data-src",e.getAttribute("data-src")),i.setAttribute("alt",e.getAttribute("data-alt")||this.gif.alt),e.parentNode.replaceChild(i,e),i};oe.prototype.changeDivsToEmptyImages=function(){var e=this;Lt(this.divs,function(i,n){e.lazyload?e.isThisElementOnScreen(i)?e.divs[n]=e.createGif(i):e.imagesOffScreen.push(i):e.divs[n]=e.createGif(i)}),this.initialized&&this.checkImagesNeedReplacing(this.divs)};oe.prototype.isThisElementOnScreen=function(e){var i=window.hasOwnProperty("pageYOffset")?window.pageYOffset:document.documentElement.scrollTop,n=0;if(e.offsetParent)do n+=e.offsetTop;while(e=e.offsetParent);return n<this.viewportHeight+i+this.lazyloadOffset};oe.prototype.checkImagesNeedReplacing=function(e){var i=this;this.isResizing||(this.isResizing=!0,Lt(e,function(n){i.replaceImagesBasedOnScreenDimensions(n)}),this.isResizing=!1)};oe.prototype.replaceImagesBasedOnScreenDimensions=function(e){var i,n;i=typeof this.availableWidths=="function"?this.availableWidths(e):this.determineAppropriateResolution(e),n=this.changeImageSrcToUseNewImageDimensions(e.getAttribute("data-src"),i),e.src=n,typeof this.afterChange=="function"&&this.afterChange(e)};oe.prototype.determineAppropriateResolution=function(e){for(var i=e.clientWidth,n=this.availableWidths.length,a=this.availableWidths[n-1];n--;)i<=this.availableWidths[n]&&(a=this.availableWidths[n]);return a};oe.prototype.changeImageSrcToUseNewImageDimensions=function(e,i){return e.replace(/{width}/g,oe.transforms.width(i,this.widthsMap)).replace(/{pixel_ratio}/g,oe.transforms.pixelRatio(this.devicePixelRatio))};oe.getPixelRatio=function(){return window.devicePixelRatio||1};oe.createWidthsMap=function(i){for(var n={},a=i.length;a--;)n[i[a]]=null;return n};oe.transforms={pixelRatio:function(e){return e===1?"":"-"+e+"x"},width:function(e,i){return i[e]||e}};oe.prototype.registerResizeEvent=function(){var e=this;window.addEventListener("resize",function(){e.checkImagesNeedReplacing(e.divs)},!1)};oe.prototype.registerScrollEvent=function(){var e=this;this.scrolled=!1,this.interval=window.setInterval(function(){e.scrollCheck()},e.scrollDelay),window.addEventListener("scroll",function(){e.scrolled=!0},!1)};typeof module=="object"&&typeof module.exports=="object"?module.exports=exports=oe:typeof define=="function"&&define.amd?define(function(){return oe}):typeof window=="object"&&(window.Imager=oe);const gr=()=>Ps("viewingable")||{};var Tn={};(function(){var e=!1,i=!1;Tn.initialise=function(){if(i)return;i=!0;var n,a,t=$("#frm-tags"),s=$("#current-tags");t.length?(n=t,a=!1):(n=$("#list-tags"),$(".autocomplete-tags-data").data("has-more-tags")?person.hasMoreTags=!0:person.viewingTags=$(".autocomplete-tags-data").data("autocomplete-tags"),a=!0),n.attr("autocomplete","off");function r(){const b=s[0].querySelectorAll('input[name="'.concat(es.inputName,'"]'));return Array.from(b).map(m=>m.value.trim())}function o(b){b.each(function(){const m=this.querySelector('input[type="hidden"]').value;$(this).remove(),Ae("change",s[0],{tags:r(),removed:m})})}var u=null;if(n.on("focus",function(){var b="";u=setInterval(function(){var m=n.typeahead("val");m!==b&&(m?f("in-progress"):o(s.find(".in-progress")),b=m)},50)}).on("blur",function(){u&&(clearInterval(u),u=null),$(this).val()&&f("blurring")}),s.find("ul").length==0&&s.append('<ul class="tags"/>'),n.length&&!e){const b={BACKSPACE:8,TAB:9,ENTER:13,COMMA:188};n.on("keydown",function(g){const c=typeof g.which=="number"?g.which:g.keyCode,v=n.typeahead("val"),h=Ds(n[0]);if(!(c===b.BACKSPACE&&v==="")){if(c===b.ENTER||c===b.COMMA&&!g.shiftKey){g.preventDefault();const l=h.menu.getActiveSelectable();return c===b.ENTER&&l?h.autocomplete(l):f(),!1}else if(c===b.TAB){const l=h.menu.getTopSelectable();if(v!==""){if(l)return h.autocomplete(l),!1;if(!h.menu.getActiveSelectable()&&!h.menu.getTopSelectable())return f(),!1}}}return!0}),n.on("paste",function(g){if(n.typeahead("val")===""){const v=(g.originalEvent.clipboardData||window.clipboardData).getData("text");if(v){const h=v.split("\n");for(let l=0;l<h.length;l++){const d=h[l].trim();d?h[l]=d:(h.splice(l,1),l--)}if(h.length>1){g.preventDefault();for(let l=0;l<h.length;l++)w(h[l]);return!1}}}return!0}),e=!0;const m="%QUERY";let p=n.data("url")+"?q=".concat(m);a&&(p="".concat(p,"&isList=true")),person.hasMoreTags?n.typeahead({hint:!1,autoselect:!1,classNames:{menu:"tags-menu"}},{name:"tags",display:"value",source:new Bloodhound({remote:{url:p,transform:g=>g.data?g.data.map(c=>({value:c})):[],wildcard:m},datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace}),limit:Number.MAX_SAFE_INTEGER}):n.typeahead({hint:!1,autoselect:!1},{name:"tags",source:new Bloodhound({local:person.viewingTags,datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace}),limit:Number.MAX_SAFE_INTEGER}),n.on("typeahead:select",function(){f("autocompleted")}),n.on("typeahead:autocomplete",function(){f("autocompleted")})}function f(b){var m=n.typeahead("val");m!=""&&(b==="autocompleted"||b==="blurring"?o(s.find(".in-progress,.blurring")):b==="in-progress"&&o(s.find(".blurring")),w(m,b)),b!=="in-progress"&&b!=="blurring"&&(s.find(".in-progress").removeClass("in-progress"),n.typeahead("val",""))}function w(b,m){let p=null;if(s.find("ul li.tag input").each(function(){$(this).val().toLowerCase()==b.toLowerCase()&&(p=$(this))}),p){var g=p.closest("li");m==="in-progress"?(o(s.find(".in-progress")),g.fadeOut("fast",function(){g.fadeIn("fast")})):g.hasClass("in-progress")?g.removeClass("in-progress"):g.fadeOut("fast",function(){g.fadeIn("fast")})}else{m==="in-progress"&&o(s.find(".in-progress"));const c=Zn(b,{...m&&m.length?{classNames:m}:{}});s[0].querySelector("ul").insertAdjacentHTML("beforeend",c),Ae("change",s[0],{tags:r(),added:b})}}$(document).on("click",".tag-content",function(){var b=$(this).attr("title");$(".tag-content").each(function(){$(this).attr("title")===b&&$(this).parent().fadeOut("fast",function(){o($(this))})})})}})();const vr=function(e,i){var n=e.split(" ");n.forEach(a=>{var t=a.indexOf("-");if(t>=0){var s=a.substring(0,t),r=a.substring(t+1);i[r]=s}})},br=function(e){var i="";for(var n in e){var a=e[n];i.length>0&&(i+=" "),i+=a+"-"+n}return i},En=function(e){var i={};try{$.cookie(e)===""?$.cookie(e,null,{expires:0,path:"/"}):$.cookie(e)&&vr($.cookie(e),i)}catch(n){$.cookie(e,null,{expires:0,path:"/"})}return i},In=function(e,i,n,a){var t=$("body");t.addClass("show-hide-toggle"),$(e).each((s,r)=>{var o=$(r),u=o.data("category"),f=o.data("type");n[u]===f?o.addClass("smenu-subselected").find("a").data("toggle","on"):o.removeClass("smenu-subselected").find("a").data("toggle","off")}),$(e.concat(" a")).click(function(s){s.preventDefault();var r=$(this),o=r.parent().data("category"),u=r.parent().data("type"),f=$(this).data("toggle");f==="off"?($(this).data("toggle","on"),i[o]=u):f==="on"&&($(this).data("toggle","off"),delete i[o]),$.cookie(a,br(i),{expires:730,path:"/"}),location.reload()})},An=function(e,i){$(e.concat(" .smenu-subselected")).not(".fade-toggle-off").length?$(i).closest(".sorting-selects").add(e).addClass("hide-toggle-active"):$(i).closest(".sorting-selects").add(e).removeClass("hide-toggle-active")};$(function(){var e=En("filmFilter"),i=Object.assign({},e),n=$("body"),a=n.stringData("owner")===person.username;a&&n.addClass("my-own-page"),person.role!=="staff"&&($(".js-film-filter[data-category='backdropped']").hide(),delete i.backdropped,$(".js-film-filter[data-category='nanocrowd']").hide(),delete i.nanocrowd),person.canAccessEnhancedFilters||($(".js-film-filter[data-category='obscure']").hide(),delete i.obscure),person.canFilterOwned?a&&n.hasClass("owned-list")&&delete i.owned:($(".js-film-filter[data-category='owned']").hide(),delete i.owned),person.canHaveCustomPosters||($(".js-film-filter[data-category='customised']").hide(),delete i.customised),person.canHaveCustomBackdrops||($(".js-film-filter[data-category='customisedbackdrop']").hide(),delete i.customisedBackdrop);var t=n.hasClass("my-own-films");if(!t&&!n.hasClass("watchlist")&&$(".js-profile-header").stringData("person")===person.username&&(t=!0,n.addClass("my-own-films")),t&&delete i.watched,(i.rated==="show"||i.logged==="show"||i.reviewed==="show")&&(n.addClass("watched-films-subset"),delete i.watched),t&&n.hasClass("films-reviewed")&&delete i.reviewed,t&&n.hasClass("films-rated")&&delete i.rated,t&&n.hasClass("films-diary")&&delete i.logged,t&&n.hasClass("likes")&&delete i.liked,$("#frm-watchlist-autocomplete").length&&delete i.watchlisted,n.hasClass("unreleased-films-only")&&delete i.unreleased,window.location.href.includes("genre/documentary/")&&(n.addClass("documentaries-only"),delete i.docs),i.watched==="show"?n.addClass("hide-unwatched"):i.watched==="hide"&&n.addClass("hide-watched"),$.isEmptyObject(i)&&$("#hide-toggle-menu .js-film-filter-remover").closest("li").hide(),$(".hide-toggle-menu").length){In(".js-film-filter",e,i,"filmFilter");var s=function(){var f=$.cookie("hideMyWatchedFilms")=="true";f?$("#hide-toggle-menu .js-fade-toggle input").prop("checked",!0):$("#hide-toggle-menu .js-fade-toggle input").prop("checked",!1),f&&!t&&!i.watched?n.addClass("hide-films-seen"):n.removeClass("hide-films-seen"),An("#hide-toggle-menu",".hide-toggle-menu")};s(),$("#hide-toggle-menu .js-fade-toggle input").on("change",function(f){f.preventDefault(),!t&&!i.watched&&($(this).prop("checked")?$.cookie("hideMyWatchedFilms","true",{expires:730,path:"/"}):$.cookie("hideMyWatchedFilms",null,{expires:0,path:"/"}),s())});const r=document.querySelector(".js-custom-poster-toggle"),o=document.querySelector(".js-custom-poster-control"),u={_doAjaxAsDeferred:zi,updatePosterMode:function(f,w,b,m){if(w!==b){const p={url:f,type:"POST",data:{__csrf:window.supermodelCSRF,posterMode:w},dataType:"json",traditional:!0};this._doAjaxAsDeferred(p).fail(()=>{m&&m(w,b)}).done((g,c,v)=>{g&&g.result&&window.location.reload()})}}};if(person.canHaveCustomPosters){if(r){const f=r.parentNode;f&&f.parentNode.removeChild(f)}if(o){const f=new ts(o,{togglable:!1,initialValue:null}),w=person&&person.loggedIn&&person.posterMode;let b;f.values.indexOf(w)>-1?b=w:w===Ce.YOURS?b=Ce.NONE:b=Ce.ALL,f.update(b);const m=o.dataset.action;m&&(f._doAjaxAsDeferred=zi,f.on(is.CHANGE,(p,g)=>{u.updatePosterMode(m,p,g,()=>{f.update(g)})}))}}else{if(o){const f=o.parentNode;f&&f.parentNode.removeChild(f)}if(r){const f=r.querySelector("input"),w=person&&person.loggedIn&&(person.posterMode===Ce.NONE||person.posterMode===Ce.YOURS)?Ce.NONE:Ce.ALL;f.checked=w===Ce.ALL;const b=r.dataset.action;b&&f.addEventListener("change",function(){const m=this.checked?Ce.ALL:Ce.NONE;u.updatePosterMode(b,m,w,()=>{f.checked=w===Ce.ALL})})}}}$(document).on("click",".js-film-filter-remover",function(r){r.preventDefault(),$.cookie("filmFilter",null,{expires:0,path:"/"}),location.reload()})});window.urlFixerPromise=$.Deferred();const Xi="inApp";if(typeof window.history<"u"){var Ie=window.location.href;typeof fixURL<"u"&&(Ie=baseURL+fixURL),(Ie.indexOf("__requestid=")>0||typeof fixURL<"u")&&typeof window.history.replaceState<"u"&&(Ie=Ie.replace(/__requestid=[^&]*/,"").replace(/\?$/,"").replace("&&","&").replace("?&","?"),window.history.replaceState(null,null,Ie))}(function(){var e,i,n;try{n=new Date,(e=window.sessionStorage).setItem(n,n),i=e.getItem(n)!=n,e.removeItem(n),i&&(e=!1)}catch(r){}if(e){var a=e.getItem("sessionState")?JSON.parse(e.getItem("sessionState")):[];Ie.indexOf("fromApp=")>0&&(Ie.indexOf("fromApp=true")>0?(a.push(Xi),e.setItem("sessionState",JSON.stringify(a))):(e.removeItem("sessionState"),a=[]),typeof window.history<"u"&&typeof window.history.replaceState<"u"&&(Ie=Ie.replace(/fromApp=[^&]*/,"").replace(/\?$/,"").replace("&&","&").replace("?&","?"),window.history.replaceState(null,null,Ie)))}if(a.length&&a[0]==="inApp")try{const r="user-scalable=no,maximum-scale=1.0",o=",",u=document.head.querySelector('[name="viewport"][content]');if(u&&u.content)u.content=u.content.replace(/^((?:(?!user-scalable\=(no|yes)).)*)(?:user-scalable\=(no|yes))?/,(f,w)=>{const b=w.length&&w.charAt(w.length-1)!==o;return"".concat(w).concat(b?o:"").concat(r)});else{const f=document.createElement("meta");f.name="viewport",f.content=r,document.head.appendChild(f)}}catch(r){}const t=a.length&&a[0]===Xi,s=document.documentElement.classList;s.remove("context-client-unknown"),s.toggle("context-client-app",t),s.toggle("context-client-not-app",!t),$(function(){t?($(".js-hide-in-app").remove(),document.querySelectorAll(".js-show-in-app").forEach(o=>o.hidden=!1),renderMobile&&$(".backdrop-container").css("top",0),$("body").hasClass("signin-page")&&$("body").addClass("flat-bg")):$(".js-show-in-app").remove(),window.urlFixerPromise.resolve()})})();$(function(){if(!$("body").hasClass("activity-stream"))return;var e=$(".activity-table");if(person.username===e.stringData("owner")){if(typeof window.history<"u"&&typeof window.history.replaceState<"u"){var i=window.location.href,n=baseURL+"/"+person.username+"/activity/following/";i.indexOf(n)>0?(i=i.replace(n,baseURL+"/activity/"),window.history.replaceState(null,null,i),$(".main-nav-activity").addClass("selected")):(n=baseURL+"/"+person.username+"/activity/",i.indexOf(n)>0&&(i=i.replace(n,baseURL+"/activity/you/"),window.history.replaceState(null,null,i),$(".main-nav-activity").addClass("selected")))}}else e.addClass("generic-person-activity");function a(g,c){$("#pagination-errors").remove();var v=$(c).filter(".error-message");if(v.length){var h=[];v.each(function(){h.push($(this).html())}),$(".pagination").after("<div id='pagination-errors' class='messages'></div>"),bxd.showMessages("error",h)}else{var l=$(g.data("ajax-target")),d=$(c);l.append(d),d.hide().fadeIn("slow");var x=d.filter("section.no-activity-message");if(x.length)g.attr("hidden",!0);else{var _=l.children("section:last-child").data("activityId");typeof _>"u"&&(_=0),g.data("after-id",_)}bxd.layout(d),xi(d.get())}}$(document).on("click",".load-more-activity",function(g){g.preventDefault(),t($(this))}).on("ajax-success",".load-more-activity",function(g,c,v,h){var l=$(this);$("#pagination-errors").remove(),a(l,c)}).on("ajax-working",".load-more-activity",function(g,c,v,h){$(this).lbSpinner({size:12,fallback:globals.spinners.spinner_12_2C3641})}).on("ajax-error",".load-more-activity",function(){$(this).lbSpinner("stop")}).on("ajax-work-complete",".load-more-activity",function(g,c,v,h){$(this).lbSpinner("stop")});function t(g){s(g),g.trigger("ajax-action")}function s(g){var c=g.data("url"),v=g.data("after-id"),h=g.data("combined-person"),l=g.data("combined-incoming"),d=[];v!=null&&d.push("after="+v),h&&d.push("combinedPerson="+h),l&&d.push("combinedIncoming="+l),$("#activity-stream-tab").hasClass("selected")?r().forEach(x=>{d.push(x+"=true")}):r().forEach(x=>{x==="groupActivity"&&d.push(x+"=true")}),d.length&&(c=c+"?"+d.join("&")),g.data("action",c)}function r(){var g=JSON.parse($.cookie("activity-streams-"+person.username));return g!=null?g.map(c=>{if(c.name)return c.name;if(typeof c=="string")return c}):["diaryEntries","reviews","lists","stories","reviewComments","listComments","storyComments","watchlistAdditions","reviewLikes","listLikes","storyLikes","follows","yourActivity","incomingActivity"]}const o=$(".paginate-ajax > .load-more-activity");$("section.no-activity-message").length?o.attr("hidden",!0):$(document).bind("keydown",function(g){g.key==="l"&&!o.attr("hidden")&&o.trigger("click")}),t(o);const f=$(".js-activity-filter-options");function w(){const g=r();f.find("input").each(function(){let c=!1;g.forEach(v=>{(v==this.name||v=="contentLikes"&&(this.name=="reviewLikes"||this.name=="listLikes")||v=="ratings"&&this.name=="diaryEntries")&&(c=!0)}),c?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$(".js-hide-filter").hide()}w();let b=!1,m=!1;o.on("ajax-working",function(){m=!0}).on("ajax-ready-for-next-action",function(){m=!1,b?($("#activity-table-body").hide(),b=!1,p()):$("#activity-table-body").show()}),f.find("input").on("click",function(){let g=[];r().forEach(c=>{c!=this.name&&g.push(c)}),this.checked&&g.push(this.name),g.sort(),$.cookie("activity-streams-"+person.username,JSON.stringify(g),{expires:730}),m?b=!0:p()});function p(){$("#activity-table-body").empty(),o.attr("hidden",!1),o.removeData("after-id"),o.trigger("click")}$(".js-activity-filters").on("click",".js-toggle-settings-panel",function(g){g.preventDefault();var c=$(this).closest(".js-activity-filters"),v=c.find(".js-activity-filter-options"),h=c.find(".js-toggle-settings-panel");c.attr("data-panel-open")=="on"?(c.attr("data-panel-open","off"),h.attr("title","Edit Filters")):(c.attr("data-panel-open","on"),h.attr("title","Close Filters")),v.stop().slideToggle()}),document.body.addEventListener("click",function(g){if(g.target.classList.contains("js-truncate")){g.preventDefault();var c=g.target.closest(".sub-activity-details");c.querySelectorAll(".details").forEach(v=>{v.classList.add("-hidden")}),c.querySelector(".js-untruncate").classList.remove("-hidden"),g.target.classList.add("-hidden")}},!1),document.body.addEventListener("click",function(g){if(g.target.classList.contains("js-untruncate")){g.preventDefault();var c=g.target.closest(".sub-activity-details");if(!c.querySelector("section.activity-row")){const v=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});c.querySelector(".load-more-activity").dispatchEvent(v)}c.querySelectorAll(".details").forEach(v=>{v.classList.remove("-hidden")}),c.querySelector(".js-truncate").classList.remove("-hidden"),g.target.classList.add("-hidden")}},!1)});$(document).on("click","a.track-event",function(e){var i=$(this).data("track-category")||"Link",n=$(this).data("track-action")||"Click",a=$(this).data("track-params")||{};gtag("event",n,{...a,event_category:i,event_label:e.target.href,transport_type:"beacon"}),ga("send","event",{eventCategory:i,eventAction:n,eventLabel:e.target.href,transport:"beacon"})});const yr=["GET","HEAD"],wr=(e,i)=>{if(i!=null&&i.method&&!yr.includes(i.method.toUpperCase())){const n=new Headers(i.headers);n.set("X-CSRF-TOKEN",Ms()),i.headers=n}return fetch(e,i)},xr=new ps({baseUri:window.baseURL+"/api/v0",fetch:wr});ms(xr);const Gi=(e=!0,i)=>{const n=i.querySelectorAll('[data-js-trigger="block"]'),a=i.querySelectorAll('[data-js-trigger="unblock"]'),t=e?a:n,s=e?n:a;t.forEach(r=>r.removeAttribute("hidden")),s.forEach(r=>r.setAttribute("hidden",""))},Sr=(e=!0,i)=>{i instanceof NodeList||Array.isArray(i)?Array.from(i).filter(n=>n.nodeType===1).forEach(n=>Gi(e,n)):i instanceof HTMLElement&&Gi(e,i)};var kt={};kt.layoutCommentSection=function(e){let i;if(e?(i=e.find("#comments"),kt.savedSection=i):i=kt.savedSection,i&&i.length){let u=function(){person&&(person.moderator||person.username===o)?$("li.comment").addClass("editable"):($("li.comment.editable").removeClass("editable"),person.loggedIn&&$("li.comment[data-person="+person.username+"]").each(function(m,p){var g=parseInt($(p).data("editWindowExpiry"),10)+6e4;g>new Date().getTime()&&$(p).addClass("editable")}),$("li.comment").not(".editable").find(".js-edit-comment, .js-delete-comment").fadeOut("slow",function(){$(this).remove()}))};const r=i.find(".comment-list"),o=r.stringData("owner");u(),setInterval(u,6e4),person.loggedIn&&($.ajax({url:i.data("reports-url")}).done(function(m){var p=$(".flag-content");p.length&&(m.reportedContent||p.show())}),person.blockedMembers.length&&i.find("li.comment").each(function(){var m=$(this);person.hasBlocked(m.stringData("person"))&&!m.hasClass("comment-blocked")&&(m.addClass("comment-blocked comment-collapsed has-icon icon-16"),m.find(".comment-body").replaceWith("<div class='comment-body col-12 body-text -small'><p>Youve blocked the author of this comment.</p></div>"),bxd.layout(m))}),i.on("submit","#post-comment-form",function(m){var p=$(this);return m.preventDefault(),p.hasClass("ajax-working")||(p.addClass("ajax-working"),$.post(p.attr("action"),p.serialize()).done(function(g){g.result?(bxd.showMessages("success",g.messages),p.find("[name=comment]").val(""),p.protectUnsavedChanges({reset:!0}),g.audienceMemberState&&$("#join-audience").data("state",g.audienceMemberState).trigger("subscriptionChanged"),bxd.fetchMissingComments({done:()=>{$(m.delegateTarget).trigger("newcommentsubmission")}})):bxd.showMessages("error",g.messages)}).always(function(){p.removeClass("ajax-working")})),!1}),$("#join-audience").mouseover(function(m){if(!$(this).data("ajax-working")){var p=$(this).data("state");p==="NotSubscribed"?$(this).addClass("button-subscribe").removeClass("button-unsubscribe").find(".subscription-text").text("Enable notifications for this thread"):p==="Unsubscribed"?$(this).addClass("button-subscribe").removeClass("button-unsubscribe").find(".subscription-text").text("Enable notifications for this thread"):p==="Subscribed"&&$(this).addClass("button-unsubscribe").removeClass("button-subscribe").find(".subscription-text").text("Mute notifications for this thread")}}).mouseout(function(m){var p=$(this);$(this).data("ajax-working")||p.trigger("subscriptionChanged")}).bind("subscriptionChanged",function(m){var p=$(this),g=p.data("state");g==="NotSubscribed"?p.addClass("button-subscribe").removeClass("button-unsubscribe").data("action",p.data("subscribe-action")).find(".subscription-text").text("Notify me"):g==="Unsubscribed"?p.addClass("button-subscribe").removeClass("button-unsubscribe").data("action",p.data("subscribe-action")).find(".subscription-text").text("Notifications muted"):g==="Subscribed"&&p.addClass("button-unsubscribe").removeClass("button-subscribe").data("action",p.data("unsubscribe-action")).find(".subscription-text").text("Notifications enabled")}).bind("ajax-action",function(m){$(this).data("start-time",new Date)}).bind("ajax-working",function(m){$(this).find(".subscription-text").text("Saving...")}).bind("ajax-success",function(m,p,g,c){var v=$(this),h=v.data("start-time"),l=new Date-h,d=Math.max(0,1e3-l);v.trigger("ajax-working"),setTimeout(function(){v.trigger("ajax-work-complete"),p.messages&&bxd.showMessages(p.result?"success":"error",p.messages),p.result&&v.data("state",p.audienceMemberState),v.trigger("subscriptionChanged")},d)}).trigger("subscriptionChanged")),i.on("click","#show-all-comments",function(m){m.preventDefault();var p=$(this).parent().data("comments-link");p&&(document.location=p)}),i.on("click","#load-all-comments",function(m){m.preventDefault(),$(this).data("ajax-working")||($(this).data("ajax-working",!0),$(this).text("Loading"),bxd.fetchMissingComments({preload:!0}))}),i.on("click","#load-previous-comments",function(m){if(m.preventDefault(),!$(this).data("ajax-working")){$(this).data("ajax-working",!0),$(this).text("loading");var p=r.data("comments-start"),g=20;p=Math.max(0,p-g),bxd.fetchMissingComments({start:p,howMany:g})}}),i.on("click","li.comment-collapsed",function(m){m.preventDefault(),$(this).removeClass("comment-collapsed").addClass("comment-expanded");for(var p=$(this).next();p.hasClass("comment-collapsed");)p.removeClass("comment-collapsed").addClass("comment-expanded"),p=p.next()});var n=function(){var m=r.data("num-comments");if(m>0)if($("body.profile-hq").length){var p=$("li.comment:not(.removed-by-admin):not(.removed-by-owner):not(.deleted):not(.comment-blocked)",i).filter(":visible").length;if(p<m){var g="<a href='#' id='show-all-comments'><span class='comment-count'>"+bxd.pluralise(p,"Comment","Comments","")+" of "+m+"</span></a>";$("#comments").addClass("has-comment-controls").find(".section-heading").html(g)}else $("#comments .section-heading").text(p==1?"1 Comment":m+" Comments")}else{var p=$("li.comment:not(.removed-by-admin):not(.removed-by-owner):not(.deleted):not(.comment-blocked)",i).length;if(p<m){var g="<span class='comment-count'>"+bxd.pluralise(m,"Comment","Comments","")+"</span><span class='comment-controls'>Newest "+bxd.formatNumber(p)+(m<100?"  <a href='#' id='load-all-comments'>Show all</a>":"  <a href='#' id='load-previous-comments'><span class='mob-sm-hide'>Show previous</span><span class='mob-sm-show' aria-hidden='true'>Prev</span></a>")+"</span>";$("#comments").addClass("has-comment-controls").find(".section-heading").html(g)}else $("#comments .section-heading").text(p==1?"1 Comment":m+" Comments")}else $("#comments .section-heading").text("Comment?");if(u(),person.loggedIn){var c=person.moderator||person.username===o?"li.comment":"li.comment.editable[data-person="+person.username+"]";$(c,i).each(function(){var v=$(this),h=v.find(".js-comment-actions");h.length===0&&(h=$('<div class="actions action-icon-list -lowcontrast js-comment-actions show-on-hover"></div>'),v.find(".js-comment-person").append(h));var l=person.moderator||person.username===v.stringData("person");if(l&&v.data("edit-url")){var d=h.find(".js-edit-comment");if(d.length===0){d=$('<a href class="inlineicon icon-16 -ignoreactionpseudo icon-edit -hidelabel js-edit-comment tooltip" title="Edit comment"><span class="icon"></span><span class="label">Edit</span></a>'),h.append(d);var x={href:v.data("edit-url")+"#modal",initialWidth:"510px",overlayClose:!1,title:" ",onComplete:function(){$("#edit-comment-cancel-button").on("click",function(){d.colorbox.close()})}};renderMobile&&(x.width="100%",x.initialWidth="288px",x.initialHeight="200px",x.transition="fade",x.speed=0,x.fixed=!0),d.colorbox(x)}}var _=person.moderator||person.username===o||person.username===v.stringData("person");if(_&&v.data("delete-url")){var k=h.find(".js-delete-comment");k.length===0&&(k=$('<a href class="inlineicon icon-16 -ignoreactionpseudo icon-delete -hidelabel js-delete-comment ajax-click-action tooltip" title="Delete comment" data-action="'.concat(v.data("delete-url"),'" data-confirm="Are you sure you want to delete this&nbsp;comment?"><span class="icon"></span><span class="label">Delete<span></a>')),k.data("modal-confirm",{ok:"Delete",okClass:"-red"}),h.append(k),k.on("ajax-success",function(S,T){T.result&&v.fadeOut(function(){bxd.fetchMissingComments()}),T.messages&&bxd.showMessages(T.result?"success":"error",T.messages)}))}var y=person.moderator;if(y&&v.data("undelete-url")){var C=h.find(".js-delete-comment");C.length===0&&(C=$('<a href class="inlineicon icon-16 -ignoreactionpseudo icon-undelete -hidelabel ajax-click-action icon-16 tooltip" title="Undelete comment" data-action="'.concat(v.data("undelete-url"),'"><span class="icon"></span><span class="label">Undelete<span></a>')),h.append(C),C.on("ajax-success",function(S,T){T.result&&v.fadeOut(function(){bxd.fetchMissingComments()}),T.messages&&bxd.showMessages(T.result?"success":"error",T.messages)}))}bxd.layout(h)})}};n();var a=10*1e3,t=function(){var m=r.data("timestamp"),p=10*60*1e3;return m>new Date().getTime()-p?a=10*1e3:a=5*60*1e3,{latest:m}};bxd.fetchMissingComments=function(m){var p=typeof m<"u"&&m.preload,g=typeof m<"u"&&m.start,c=typeof m<"u"&&m.howMany,v=r.find("li.comment"),h=i.data("url"),l={},d=null;if(p){var x=r.data("comments-start");if(x===0)return;var _=256;l.start=Math.max(0,x-_),l.howMany=_}else typeof g=="number"?(l.start=g,typeof c=="number"&&(l.howMany=c)):(l.since=t().latest,d=l.since);var k=$.ajax({url:h,type:"GET",data:l});k.done(function(y,C,S){if(S==k){if($.trim(y)!==""){var T=$(y);bxd.layout(T),r.data("num-comments",T.data("num-comments"));const D=T.data("comments-start");if((D||D===0)&&r.data("comments-start",D),T.data("blocked-comments")){var E=T.data("blocked-timestamp"),A=r.data("timestamp");E>A&&r.data("timestamp",E);var P=T.stringData("blocked-comments").split(",");$.each(P,function(O,M){v.filter("[data-comment-id="+M+"]").not(".comment-collapsed").each(function(){$(this).addClass("comment-blocked comment-collapsed has-icon icon-16").removeClass("comment-expanded"),person.loggedIn&&person.moderator?$(this).find(".comment-body").prepend("<p><span class='replace-if-you' data-replacement='Youve' data-person='"+o+"'>The "+r.data("commentableType")+"s owner has</span> blocked the author of this comment.</p>"):$(this).html("<div class='comment-body col-12 body-text -small'><p><span class='replace-if-you' data-replacement='Youve' data-person='"+o+"'>The "+r.data("commentableType")+"s owner has</span> blocked the author of this comment.</p></div>"),bxd.layout($(this))})})}T.find("li.comment").each(function(){var O=$(this),M=O.data("timestamp"),L=r.data("timestamp");M>L&&r.data("timestamp",M);var I=O.stringData("person");person.hasBlocked(I)&&(O.addClass("comment-blocked comment-collapsed has-icon icon-16"),O.find(".comment-body").replaceWith("<div class='comment-body col-12 body-text -small'><p>Youve blocked the author of this comment.</p></div>"),bxd.layout(O));var z=O.data("comment-id"),j=v.filter("[data-comment-id="+z+"]");if(j.length>=1)(j.data("timestamp")!=O.data("timestamp")||O.hasClass("comment-blocked")!==j.hasClass("comment-blocked"))&&(O.insertAfter(j),j.remove());else{var B=O.data("creation-timestamp");if(d===null||d<=B){for(var N=r.find("li.comment"),X=null,V=N.length-1;V>=0&&$(N[V]).data("creation-timestamp")>B;V--)X=$(N[V]);X?O.insertBefore(X):r.append(O)}}})}n(),m&&m.done&&m.done()}}).always(function(){t(),clearTimeout(s),s=setTimeout(bxd.fetchMissingComments,a)})};let f="",w=10;const b=m=>{m&&m.startsWith("#comment-")&&f!=m&&(r.find("a.comment-permalink").toArray().reduce((g,c)=>g||c.hash===m,!1)||w<=0?(f=m,location.hash="",location.hash=f,w<10&&(w=10)):(w=w-1,bxd.fetchMissingComments({preload:!0,done:function(){setTimeout(function(){b(m)},0)}})))};window.onhashchange=m=>{b(new url("./m.newURL.html").hash)},b(location.hash),t();var s=setTimeout(bxd.fetchMissingComments,a)}};$(function(){$("body").on("submit","#comment-editor-modal form",function(e){var i=$(this);return e.preventDefault(),i.hasClass("ajax-working")||(i.addClass("ajax-working"),$.post(i.attr("action"),i.serialize()).done(function(n){n.result?(bxd.showMessages("success",n.messages),$("#comments .js-edit-comment").colorbox.close(),bxd.fetchMissingComments()):bxd.showMessages("error",n.messages)}).always(function(){i.removeClass("ajax-working")})),!1})});window.commentSection=kt;class _r{constructor(i,n,a){const t=new vn;a.then(s=>{PubSub.publish(i),t.resolve(s)},t.reject).catch(s=>{console.error(s)}),Object.defineProperties(this,{topic:{get:()=>i},onReady:{get:()=>t.promise},el:{get:()=>n}})}}(function(){function e(s,r){const o=s.data("refresh-trigger");o&&PubSub.subscribe(o,function(){i(s,o)}),i(s,o,r)}function i(s,r,o){s.removeClass("js-csi").removeClass("js-csi-loaded").addClass("loading-csi");const u=s.data("on-load"),f=new vn;$.ajax({url:s.data("src"),success:function(w,b,m){const p=$(w);if(p.length){let g=!1;s.empty().append(p),bxd.layout(s),r?s.removeClass("loading-csi").addClass("js-csi-loaded"):(p.unwrap(),g=!0),u&&(g&&p.children().length>1?f.resolve(p.parent()[0]):f.resolve(p[0]))}else r?s.empty():s.remove(),u&&f.resolve()},complete:function(){o&&o()},error:function(w,b,m){const p=!!m&&m||b;f.reject(p)}}),f.promise.catch(()=>{bxd.componentFailed()}),u&&bxd.setCSIRequestReference(new _r(u,s[0],f.promise))}const n=[];let a=!1;function t(){if(!a){a=!0;const s=n.shift();e(s,function(){a=!1,n.length&&t()})}}PubSub.subscribe("csi",function(){$(".js-csi").each(function(){e($(this))}),$(".js-serial-csi").each(function(){$(this).removeClass("js-serial-csi").addClass("loading-csi"),n.push($(this)),t()})})})();(function(e){jQuery.expr[":"].Contains=function(n,a,t){return(n.textContent||n.innerText||"").toUpperCase().indexOf(t[3].toUpperCase())>=0};function i(n,a){var t=e("<form>").attr({class:"filterform",action:"#"}),s=e("<input>").attr({class:"filterinput",placeholder:"Quick find",type:"text"}),r=e("<span>").attr("class","filterclear").html("&times;");e(t).append(s).append(r).appendTo(n),e(r).hide(),e(a).find(".js-filter-listitem");var o=new URLSearchParams(window.location.search).get("s");e(t).submit(function(){return!1}),e(s).change(function(){e("#filter-no-matches, #filter-matches").remove();var u=e(this).val(),f=u.trim().split(/\s+/);if(f.length&&f[0].length){e(r).show(),e(a).find(".section-heading").show();var w=e(a).children("li");for(var b in f)b.length&&(w=w.filter(e(a).children("li:Contains("+f[b]+")")));e(a).children("li").hide(),w.show().children(".section-heading").hide(),e(a).find(":visible").length===0?e(a).append("<li class='filtermessage' id='filter-no-matches'><h1>Sorry, no matches!</h1><p>These arent the droids youre looking for.</p></li>"):e(a).prepend("<li class='filtermessage' id='filter-matches'><h2 class='section-heading'>Matching answers</h2></li>")}else e(r).hide(),e(a).children("li").show().children(".section-heading").show();return!1}).keyup(function(){e(this).change()}),o&&e(s).val(o).trigger("change")}e(function(){if(e("body").hasClass("editorial")){e(".filterable-list").length&&(i(e("#sidebar"),e(".filterable-list")),e("body").on("click",".filterclear",function(){e(".filterinput").val("").trigger("change"),e(this).hide()}));for(const n of document.querySelectorAll('[data-js-trigger="copylinktoclipboard"]'))new Ss(n,{clipboard:{text:a=>a.href}})}})})(jQuery);(function(e){e.fn.posterMenu=function(i){var n={parent:function(t){return t.closest(".poster")}};i=e.extend({},n,i);var a='<div class="popmenu film-poster-popmenu" hidden><ul>';return a+='<li class="fm-rate"><input class="fm-rateit-field film-popmenu-rating-${FilmId}" type="range" min="0" max="10" step="1" value="0"/><div class="fm-rateit instant-rating" data-rateit-backingfld=".film-popmenu-rating-${FilmId}" data-rateit-starwidth="10" data-rateit-starheight="19" data-rateit-resetable="false"></div></li>',a+='{{if ActivityPage}}<li class="fm-show-activity popmenu-textitem -centered"><a href="${ActivityPage}">Show your activity</a></li>{{/if}}',a+='{{if AddToFilms}}<li class="fm-add-to-films popmenu-textitem -centered"><a href="#" class="menu-item-add-this-film" data-film-id="${FilmId}" data-diary-entry-form-options=\'{&quot;mode&quot;: &quot;compose&quot;{{if ViewingableDataEndpoint}}, &quot;endpoints&quot;: { &quot;data&quot;: "${ViewingableDataEndpoint}" }{{else}}, &quot;slug&quot;: &quot;${FilmSlug}&quot; {{/if}}}\' data-bs-toggle="modal" data-bs-target="#diary-entry-form-modal">Log or review ${ViewingableType}&hellip;</a></li>{{/if}}',a+='{{if Watchlist}}<li class="fm-add-to-watchlist popmenu-textitem -centered"><a href="#" class="add-to-watchlist ajax-click-action" data-film-id="${FilmId}" data-action="${AddToWatchlistAction}">Add to watchlist</a></li>{{/if}}',a+='{{if Watchlist}}<li class="fm-remove-from-watchlist popmenu-textitem -centered"><a href="#" class="remove-from-watchlist ajax-click-action" data-film-id="${FilmId}" data-action="${RemoveFromWatchlistAction}">Remove from watchlist</a></li>{{/if}}',a+='{{if AddToList}}<li class="fm-add-to-list popmenu-textitem -centered"><a href="#" class="menu-item-add-to-list" data-film-id="${FilmId}" data-film-name="${FilmName}" data-new-list-with-film-action="${StartNewListURL}">Add to lists&hellip;</a></li>{{/if}}',a+='{{if RemoveFromList}}<li class="fm-remove-from-list popmenu-textitem -centered"><a href="#" class="remove-from-list ajax-click-action ajax-reload-on-success" data-confirm="Are you sure you want to remove &lsquo;${FilmName}&rsquo; from this&nbsp;list?" data-modal-confirm="{&quot;title&quot;:&quot;Confirm Removal&quot;,&quot;ok&quot;:&quot;Remove Film&quot;}" data-data="filmId=${FilmId}" data-action="${RemoveFromListAction}">Remove from this list</a></li>{{/if}}',a+='{{if FilmListsPage}}<li class="fm-show-in-lists popmenu-textitem -centered"><a href="${FilmListsPage}">Show in lists</a></li>{{/if}}',a+='{{if IsFilmPage}}<li class="popmenu-textitem -centered"><a href="#" class="js-more-services-popup">Where to watch</a></li>{{else}}<li class="popmenu-textitem -centered"><a href="${FilmPageLink}watch/">Where to watch</a></li>{{/if}}',a+='{{if PosterPickerEndpoint}}<li class="popmenu-textitem -centered"><a id="open-poster-picker-${FilmId}" href data-bs-toggle="modal" data-bs-target="#poster-picker-modal" data-js-trigger-content-media-picker="poster" data-endpoint="${PosterPickerEndpoint}" data-object-id="${ObjectId}" data-object-name="${ObjectName}" data-can-customise-object="true" data-switch-link-name="${SwitchLinkName}" data-switch-link-selector="#open-backdrop-picker-${FilmId}">Change poster&hellip;</a></li>{{/if}}',a+='{{if BackdropPickerEndpoint}}<li class="popmenu-textitem -centered"><a id="open-backdrop-picker-${FilmId}" href data-bs-toggle="modal" data-bs-target="#backdrop-picker-modal" data-js-trigger-content-media-picker="backdrop" data-endpoint="${BackdropPickerEndpoint}" data-object-id="${ObjectId}" data-object-name="${ObjectName}" data-can-customise-object="${BackdropPickerCanCustomiseObject}" data-switch-link-name="${HiddenSwitchLinkName}" data-switch-link-selector="#open-poster-picker-${FilmId}">Change backdrop&hellip;</a></li>{{/if}}',a+='{{if CanSeePrivateNotes}}<li class="popmenu-textitem -centered"><button type="button" data-js-trigger="#private-note-modal" data-id="${PrivateNoteId}">${PrivateNoteLabel}</button></li>{{/if}}',a+='{{if Backstage}}<li class="popmenu-textitem -centered"><a href="${BackstageLink}">Backstage analytics</a></li>{{/if}}',a+="</ul></div>",e.template("filmMenuTemplate",a),e(this).each(function(){var t=e(this),s=e(this).find("span.js-film-options"),r=i.parent(e(this)),o,u=null,f=null,w=!1,b=!1;r.hasClass("poster")&&(b=!0),t.click(function(T){if(e(T.target).hasClass("overlay")||e(T.target).hasClass("has-menu"))if(e(T.target).hasClass("has-menu")||e(T.target).parent().hasClass("has-menu"))if(e(".film-popmenu:visible").length)T.preventDefault();else if(!s.is(":visible"))T.preventDefault();else return d(),!0;else return!0;else T.preventDefault()}),t.mouseenter(function(T){b&&(f=setTimeout(function(){s.show(),f=null},50)),v.appendTo("body")}),t.mouseleave(function(T){S(T,!0)||(f!==null&&b&&(clearTimeout(f),f=null),d())}),s.appendTo(t),b&&s.hide(),o=s.find("span.menu-link");var m=[],p={};const g=r.data("type");if(person.loggedIn){p.AddToFilms=!0,p.ActivityPage=person.profileLink+r.data("film-link").substring(1+baseURL.length)+"activity/",p.AddToList=g===Xt.Film.code,p.Watchlist=g===Xt.Film.code,p.AddToWatchlistAction=r.data("add-to-watchlist-action"),p.RemoveFromWatchlistAction=r.data("remove-from-watchlist-action"),p.RemoveFromListAction=r.closest(".js-list-entries").data("remove-from-list-action");const T=O=>e("body.list-page").data("owner")||e("body.lists-edit").data("owner")||O.closest("section.list").data("person")||O.closest(".viewing-poster-container").data("owner")||O.closest(".favourite-film-poster-container").data("owner");let E=!1;const A=r.closest(".poster-container, .js-production-record, .viewing-poster-container, .favourite-film-poster-container");A&&T(r)==person.username&&(p.ObjectId=A.data("object-id"),p.ObjectName=A.data("object-name"),A.data("customise-object-backdrop")&&(E=!0)),p.RemoveFromListAction&&(p.RemoveFromList=!0),person.canAccessFilmStats&&(p.Backstage=!0);const P=person.canHaveCustomPosters||r.data("film-poster-freely-customisable")&&person.canCustomiseCustomisablePosters,D=!r.data("film-hide-change-backdrop")&&(person.canHaveCustomBackdrops||r.data("film-backdrop-freely-customisable")&&person.canCustomiseCustomisableBackdrops);P&&(p.PosterPickerEndpoint=r.data("film-link")+"poster-picker/"),D&&(p.BackdropPickerEndpoint=r.data("film-link")+"backdrop-picker/",E&&(p.BackdropPickerCanCustomiseObject=!0))}const c=gr();c.uid!=null&&(p.IsFilmPage=fn()&&c.type===Xt.Film.code&&c.uid===r[0].dataset.itemUid),p.FilmPageLink=p.IsFilmPage?null:r.data("film-link"),p.FilmListsPage=e("body").hasClass("lists-with-film")?null:r.data("film-link")+"lists/by/popular/",p.FilmId=r.data("film-id"),p.FilmName=r.attr("data-film-name"),p.ViewingableType=g,p.PosterUrl=r.data("poster-url"),p.StartNewListURL=r.data("new-list-with-film-action"),p.BackstageLink=r.data("film-link")+"backstage/",p.ViewingableDataEndpoint=r.data("details-endpoint"),p.FilmSlug=r[0].dataset.filmSlug,p.CanSeePrivateNotes=person.canSeePrivateNotes,p.PrivateNoteLabel="Edit private note",p.PrivateNoteId=r[0].getAttribute("data-private-note-id"),m.push(p);var v=e.tmpl("filmMenuTemplate",m);ds(v[0]);const h=document.createElement("div");h.className="popmenu-arrow ir",v[0].appendChild(h),v[0].classList.toggle("-has-arrow",!0);let l;o.bind("click",function(T){T.preventDefault(),T.stopPropagation(),v.is(":visible")?(e(this).css({opacity:1}),C()):(u&&(clearTimeout(u),u=null),e(this).css({opacity:.5}),k())}),o.mouseleave(function(){u===null&&(u=setTimeout(function(){u=null,w||(o.css({opacity:1}),C())},500))});function d(){b&&s.hide(),v.is(":visible")&&C()}function x(){if(!o[0].offsetParent){_();return}let T="right-".concat(pn[1]);bi(o[0],v[0],{placement:T,middleware:[Wt(({elements:E,placement:A,rects:P})=>ui(A)==="x"?{mainAxis:Hi.x.mainAxis,crossAxis:_s(E.floating,P.floating,h)}:Hi.y),yi({padding:Pe.shift.padding,limiter:wi({offset:({middlewareData:E})=>({mainAxis:E.offset.y})})}),Bt(E=>({padding:Pe.flip.padding,crossAxis:!1})),mn({...Pe.arrow,element:h})]}).then(gn.bind(null,o[0],v[0],h))}function _(){try{l()}catch(T){}}function k(){var T=r.filter("[data-film-id="+p.FilmId+"]").data("film-in-watchlist");T?(v.find("a.add-to-watchlist").closest("li").addClass("hidden"),v.find("a.remove-from-watchlist").closest("li").removeClass("hidden")):(v.find("a.add-to-watchlist").closest("li").removeClass("hidden"),v.find("a.remove-from-watchlist").closest("li").addClass("hidden")),s.hasClass("-w70");var E=v.find("li.fm-rate .fm-rateit"),A=r.data("rateable-rating")||0;if(!E.hasClass("rateit")){const P=document.createElement("button");P.type="button",P.className="removetrigger",P.insertAdjacentHTML("beforeend",['<span class="label _sr-only">Remove rating</span>','<svg class="glyph" xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" role="presentation"><path d="m9.97-.03 1.06 1.06L6.56 5.5l4.47 4.47-1.06 1.06L5.5 6.56l-4.47 4.47-1.06-1.06L4.44 5.5-.03 1.03 1.03-.03 5.5 4.44 9.97-.03Z"/></svg>'].join("")),E[0].insertAdjacentElement("afterend",P),P.addEventListener("click",O=>{O.preventDefault(),O.stopPropagation(),!O.currentTarget.disabled&&E.rateit("value",0)});const D=v[0].querySelector("li.fm-rate input");if(D){const O=Object.getPrototypeOf(D),M=Object.getOwnPropertyDescriptor(O,"value"),L=M.set;M.set=(...I)=>{L.call(D,I),D.dispatchEvent(new Event("input",{bubbles:!0}))},Object.defineProperty(D,"value",M),D.addEventListener("input",I=>{const z=B=>{const N=I.target.closest("li").classList;N.toggle("-has-rating",B),N.toggle("-has-no-rating",!B)},j=I.target.value&&parseInt(I.target.value)>0;z(j),P.disabled=!j}),D.value=A}E.data("rate-action",r.data("rate-action")),E.rateit().bind("rated",function(){C()})}E.rateit("display",A),_(),v[0].removeAttribute("hidden"),x(),l=vi(o[0],v[0],x,{ancestorScroll:!1,layoutShift:!1})}v.mouseenter(function(){w=!0,u&&(clearTimeout(u),u=null)});function y(T){w=!1,o.css({opacity:1}),S(T,!1)?C():(C(),d())}v.mouseleave(y),v.find("a, button").click(y);function C(T){setTimeout(function(){v[0].setAttribute("hidden",""),_()},50)}function S(T,E){return Ot(T,t)?!0:E&&v.is(":visible")?!!Ot(T,v):!1}})}})(jQuery);const Ki=(e,i,n={})=>{$('.follow-button-wrapper[data-username="'.concat(i,'"]')).each(function(){Ae(e,this,n)})};$(function(){$(document).on("mouseover",".js-button-following",function(e){$(this).addClass("button-unfollow -unfollow").find("span.button-text").text("Unfollow")}).on("mouseout",".js-button-following",function(e){$(this).removeClass("button-unfollow -unfollow").find("span.button-text").text("Following")}).on("ajax-success",".js-button-following",function(e,i,n,a){var t=$(this);t.trigger("ajax-working"),i.result?t.fadeOut("fast",function(){t.parent().find(".js-button-follow").fadeIn("fast",function(){t.trigger("ajax-work-complete")})}):(i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")),gtag("event","unfollow",{event_category:"account",transport_type:"beacon"}),ga("send","event","Following","Unfollowed")}),$(document).on("ajax-success",".js-button-follow",function(e,i,n,a){var t=$(this);t.trigger("ajax-working"),i.result?t.fadeOut("fast",function(){t.parent().find(".js-button-following").fadeIn("fast",function(){t.trigger("ajax-work-complete")})}):(i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")),gtag("event","follow",{event_category:"account",transport_type:"beacon"}),ga("send","event","Following","Followed")}),$(document).on("click","a.link-blocked",function(e){e.preventDefault()}),$(document).on("mouseover","a.js-button-blocked",function(e){$(this).addClass("button-unblock").find("span.button-text").text("Unblock")}).on("mouseout","a.js-button-blocked",function(e){$(this).removeClass("button-unblock").find("span.button-text").text("Blocked")}).on("ajax-success","a.js-button-blocked",function(e,i,n,a){var t=$(this);if(t.trigger("ajax-working"),i.result){const s=t.closest(".follow-button-wrapper").data("username");PubSub.publish("block-member",{member:s,blocked:!1}),t.fadeOut("fast",function(){Ki("block-button.change",s,{blocked:!1}),t.parent().find(".js-button-follow").fadeIn("fast",function(){t.trigger("ajax-work-complete")})})}else i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")}),$(document).on("change",".js-close-friend-triggers",function(e){person.canSeePrivateViewings&&(e.detail.friend?($(this).find('[data-js-trigger="unfriend"]').css("visibility","visible").removeAttr("hidden"),$(this).find('[data-js-trigger="befriend"]').css("visibility","hidden").attr("hidden","")):($(this).find('[data-js-trigger="unfriend"]').css("visibility","hidden").attr("hidden",""),$(this).find('[data-js-trigger="befriend"]').css("visibility","visible").removeAttr("hidden")))}),$(document).on("ajax-success",'[data-js-trigger="befriend"]',function(e,i,n,a){if(i.result){bxd.showMessages("success","Added to Close Friends");const t=this.closest(".js-close-friend-triggers").dataset.owner;$(".js-close-friend-triggers[data-owner="+t+"]").each(function(){Ae("change",this,{username:t,friend:!0})})}else i.messages&&bxd.showMessages("error",i.messages)}),$(document).on("ajax-success",'[data-js-trigger="unfriend"]',function(e,i,n,a){if(i.result){bxd.showMessages("success","Removed from Close Friends");const t=this.closest(".js-close-friend-triggers").dataset.owner;$(".js-close-friend-triggers[data-owner="+t+"]").each(function(){Ae("change",this,{username:t,friend:!1})})}else i.messages&&bxd.showMessages("error",i.messages)}),$(document).on("ajax-success",'[data-js-trigger="block"]',function(e,i,n,a){var t=$(this);if(t.trigger("ajax-working"),i.result){const s=this.closest("[data-owner]").dataset.owner;PubSub.publish("block-member",{member:s,blocked:!0}),t.trigger("ajax-work-complete")}else i.messages&&bxd.showMessages("error",i.messages),t.trigger("ajax-work-complete")}),PubSub.subscribe("block-member",function(e,i){const n=i.member;if(i.blocked){var a=person.blockedMembers.indexOf(n);a<0&&person.blockedMembers.push(n);const t=()=>{Ki("block-button.change",n,{blocked:!0})};$('.follow-button-wrapper[data-username="'.concat(n,'"]')).each(function(){var s=$(this).find(".js-button-blocked");s.length?$(this).css("visibility")==="hidden"?($(this).find(".js-button-following, .js-button-follow, .follows-message").hide(),s.show(),$(this).css("visibility","visible"),t()):$(this).find(".js-button-following:visible, .js-button-follow:visible, .follows-message:visible").fadeOut("fast",function(){s.fadeIn("fast"),t()}):$(this).remove()})}else{var a=person.blockedMembers.indexOf(n);a>=0&&person.blockedMembers.splice(a,1)}Sr(i.blocked,document.querySelectorAll('.js-block-triggers[data-owner="'.concat(n,'"]'))),commentSection.layoutCommentSection()})});(function(){var e={productions:[],follows:[],followers:[],friends:[],likeables:[]},i={productions:[],follows:[],followers:[],friends:[],likeables:[]},n;PubSub.subscribe("letterboxd-metadata",function(s,r){r.reset&&(i={productions:[],follows:[],followers:[],friends:[],likeables:[]}),r.production&&$.inArray(r.production,i.productions)===-1&&(e.productions.push(r.production),i.productions.push(r.production)),r.follows&&$.inArray(r.follows,i.follows)===-1&&(e.follows.push(r.follows),i.follows.push(r.follows)),r.followers&&$.inArray(r.followers,i.followers)===-1&&(e.followers.push(r.followers),i.followers.push(r.followers)),r.friends&&$.inArray(r.friends,i.friends)===-1&&(e.friends.push(r.friends),i.friends.push(r.friends)),r.likeable&&$.inArray(r.likeable,i.likeables)===-1&&(e.likeables.push(r.likeable),i.likeables.push(r.likeable)),clearTimeout(n),n=setTimeout(t,200)});var a=2;function t(s,r){var o;if(r?o=r:(o=e,e={productions:[],follows:[],followers:[],friends:[],likeables:[]}),o.productions.length>0||o.follows.length>0||o.followers.length>0||o.friends.length>0||o.likeables.length>0){const u={posters:o.productions,follows:o.follows,followers:o.followers,friends:o.friends,likeables:o.likeables};$.ajax({url:baseURL+"/ajax/letterboxd-metadata/",data:u,traditional:!0,type:"POST",dataType:"json",error:function(){s||(s=0),s<a?setTimeout(function(){t(s+1,o)},200):bxd.componentFailed()},success:function(f,w,b){f.csrf&&(supermodelCSRF=f.csrf,$("input[name=__csrf]").val(f.csrf)),$.each(f.usersFollowed,function(m,p){$(".follow-button-wrapper[data-username="+p+"]").each(function(){$(this).find(".js-button-following").show(),$(this).find(".js-button-follow").hide(),$(this).css("visibility","visible"),Ae("follow-button.change",this,{username:p})}),$(".js-show-if-following[data-username="+p+"]").show()}),$.each(f.usersNotFollowed,function(m,p){$(".follow-button-wrapper[data-username="+p+"]").each(function(){$(this).find(".js-button-following").hide(),$(this).find(".js-button-follow").show(),$(this).css("visibility","visible"),Ae("follow-button.change",this,{username:p})})}),$.each(f.usersFriends,function(m,p){$(".js-close-friend-triggers[data-owner="+p+"]").each(function(){Ae("change",this,{username:p,friend:!0})})}),$.each(f.usersNotFriends,function(m,p){$(".js-close-friend-triggers[data-owner="+p+"]").each(function(){Ae("change",this,{username:p,friend:!1})})}),$.each(f.usersFollowing,function(m,p){$(".follow-button-wrapper[data-username="+p+"]").each(function(){$(this).find(".follows-message").css("display","inline-block")})}),$.each(f.usersBlocked,function(m,p){PubSub.publish("block-member",{member:p,blocked:!0})}),$.each(f.filmsInWatchlist,function(m,p){bxd.addToWatchlist(p)}),$.each(f.filmsNotInWatchlist,function(m,p){bxd.removeFromWatchlist(p)}),$.each(f.likeables,function(m,p){const g={type:gs.InitialData,data:{isLiked:p.liked}};PubSub.publish("like:"+p.likeableUid,g)}),$.each(f.watchables,function(m,p){PubSub.publish("watch:"+p.watchableUid,p),bxd.setAsWatched(p.watchableUid,p.watched)}),$.each(f.rateables,function(m,p){const g=p.rating||0;$('.film-poster[data-item-uid="'.concat(p.rateableUid,'"], .film-actions[data-item-uid="').concat(p.rateableUid,'"]')).data("rateable-rating",g);const c=$("#frm-sidebar-rating[data-rateable-uid='"+p.rateableUid+"']");c.length&&c.val(g)}),$(".instant-rating").trigger("rating-changed")}})}}})();$(function(){var e=En("listFilter");$("#hide-list-toggle-menu").length&&(In(".js-list-filter",e,Object.assign({},e),"listFilter"),An("#hide-list-toggle-menu",".hide-list-toggle-menu"))});$(function(){$(document).on("click","a.menu-item-add-to-list",function(e){e.preventDefault();const i=parseInt($(this).data("film-id"),10),n=$(this).attr("data-film-name");$("#add-to-a-list-modal").removeClass("-addalltolist");const a=$(this).data("new-list-with-film-action");$("#add-to-a-list-modal .js-new-list").off("click.newlist").prop("href",function(){return a+"?privateList="+$(this).data("privateList")}),$("#add-to-a-list-modal").off("change.add-all-to-list"),$("#add-to-a-list-modal input.film-id:gt(0)").remove(),$("#add-to-a-list-modal input.film-id").val(i),$("#add-to-a-list-modal h1.title-2").html("Add <span class='film-name'></span> to lists"),$("#add-to-a-list-modal span.film-name").text(""+n+""),$("#js-modal-warning").hide(),$("#add-to-a-list").trigger("click")}),$(document).on("submit","#add-to-a-list-modal form",function(){$("#add-to-a-list-modal").closest("#colorbox").addClass("-loading"),$("#add-to-a-list-modal .js-add-to-list-body").lbSpinner({size:16,insertion:"prepend",element:"span"});var e=$(this);return $.ajax({url:e.attr("action"),data:e.serialize(),type:"POST",dataType:"json",complete:function(){e.find(".sending-ajax").removeClass("sending-ajax"),$("#add-to-a-list-modal .js-add-to-list-body").lbSpinner("stop"),$("#add-to-a-list").colorbox.close()},error:function(i,n,a){bxd.showMessages("error",[a])},success:function(i,n,a){i.messages&&bxd.showMessages(i.result?"success":"error",i.messages),i.result&&i.films&&i.films.forEach(function(t){PubSub.publish("letterboxd-metadata",{reset:!0,production:"film:"+t.id}),i.list?gtag("event","add_to_list",{event_category:"lists",list_id:i.list.boxdItCode,film_id:t.boxdItCode,transport_type:"beacon"}):i.lists.forEach(function(s){gtag("event","add_to_list",{event_category:"lists",list_id:s.boxdItCode,film_id:t.boxdItCode,transport_type:"beacon"})})})}}),!1})});$(function(){const s=function(f,w){const m=(w.changedTouches?w.changedTouches[0].pageX:w.pageX)-$(f).offset().left;if(m<0)return 0;const p=Math.ceil(m/13/1);return p>10?10:p},r=function(f,w,b){const m=(+w-0)*13*1,p=(10-(+b-0))*13*1;return f.css("clip-path","inset(0px ".concat(p,"px 0px ").concat(m,"px)")),f},o=function(f){return f===1?".5":f%2===0?""+f/2:Math.floor(f/2)+".5"};$("div.js-rating-filter").each(function(){const f=$(this),w=f.find(".rateit-range"),b=f.find(".rateit-selected"),m=f.find(".rateit-hover"),p=f.data("action"),g=f.data("lower"),c=f.data("upper"),v=function(k,y){m.hide(),k&&y?k===y?r(b.show(),0,k):r(b.show(),k-1,y):b.hide()},h=function(k,y){b.hide(),k&&y?k===y?r(m.show(),0,k):r(m.show(),k-1,y):m.hide()},l=k=>(k.preventDefault(),!1);v(g,c);let d=!1,x=null,_=null;w.mousemove(function(k){const y=s(this,k);_!=y&&(_=y,d&&x!==y?(w.addClass("-selecting"),h(0+Math.min(x,y),0+Math.max(x,y))):h(0+y,0+y))}),w.mouseleave(function(k){_=null,x=null,v(g,c),d&&(d=!1,w.removeClass("-selecting"),document.removeEventListener("selectstart",l))}),w.mousedown(function(k){d||(x=s(this,k),d=!0,document.addEventListener("selectstart",l))}),w.mouseup(function(k){if(d){const y=s(this,k),C=Math.min(y,x)+0,S=Math.max(y,x)+0;if(x=null,_=null,d=!1,w.removeClass("-selecting"),document.removeEventListener("selectstart",l),v(C,S),C!==g||S!==c){const T=C===S?o(C):o(C)+"-"+o(S),E=p.replace("%7B%7Bvalue%7D%7D",T);document.location.href=E}}}),w.bind("touchstart touchmove touchend",u)});function u(f){var w=f.originalEvent.changedTouches,b=w[0],m="";switch(f.type){case"touchstart":m="mousedown";break;case"touchmove":m="mousemove";break;case"touchend":m="mouseup";break;default:return}var p=document.createEvent("MouseEvent");p.initMouseEvent(m,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(p),f.preventDefault()}});$(function(){function e(u,f){$("#pagination-errors").remove();const w=$(f),b=w.filter(".error-message"),m=w.filter(".no-results");if(b.length){const g=[];b.each(function(){g.push($(this).html())}),$(".pagination").after("<div id='pagination-errors' class='messages'></div>"),bxd.showMessages("error",g)}else if(m.length)u.hide(),$("#search-header").after(m.html());else{w.find(".truncate").each(function(){const v=$(this),h=v.data("truncate");v.condense({condensedLength:h,moreText:"&hellip;more",lessText:"&times;",ellipsis:"",moreSpeed:0,lessSpeed:0})});const g=$(u.data("ajax-target")),c=w.data("cursor");if(g.append(w),w.hide().fadeIn("slow"),c){u.data("cursor",c);var p=g.children("section:last-child").data("searchId");typeof p>"u"&&(p=0),u.data("after-id",p)}else u.hide();bxd.layout(w),xi(w.get())}}$(document).on("click",".load-more-search",function(u){u.preventDefault(),i($(this))}).on("ajax-success",".load-more-search",function(u,f,w,b){const m=$(this);$("#pagination-errors").remove(),e(m,f)}).on("ajax-working",".load-more-search",function(u,f,w,b){$(this).lbSpinner({size:12,fallback:globals.spinners.spinner_12_2C3641})}).on("ajax-error",".load-more-search",function(){$(this).lbSpinner("stop")}).on("ajax-work-complete",".load-more-search",function(u,f,w,b){$(this).lbSpinner("stop")});function i(u){n(u),u.trigger("ajax-action")}function n(u){var f=u.data("url");const w=u.data("cursor"),b=f.indexOf("?")===-1?"?":"&";w&&(f+=b+"cursor="+w),u.data("action",f)}const a=$(".paginate-ajax > .load-more-search");a.length&&i(a);const t=$(".js-search-filter-options");var s=!1,r=!1;a.on("ajax-working",function(){r=!0}).on("ajax-ready-for-next-action",function(){r=!1,s?($("#search-table-body").hide(),s=!1,o()):$("#search-table-body").show()}),t.find("input").on("click",function(){r?s=!0:o()});function o(){$("#search-table-body").empty(),a.show(),a.removeData("after-id"),a.trigger("click")}});(function(e){e.fn.stringData=function(i){return e(this).attr("data-"+i)}})(jQuery);$(function(){if(!$("body").hasClass("tags"))return;const e=$(".saving");$(".js-delete").data("modal-confirm",{ok:"Delete Tag"}).on("ajax-action",function(){e.closest("section").addClass("sending-ajax"),e.lbSpinner({size:14,fallback:globals.spinners.spinner_14_20272f,insertion:"prepend",element:"span"})}).on("ajax-error",function(){e.lbSpinner("stop"),e.closest("section").removeClass("sending-ajax")});const i=$(".js-tags-section").data("edit-modal-action"),n=$(".js-tags-section").data("edit-action"),a=$(".js-tags-section").data("check-action"),t=function(o){e.text("Updating tags..."),e.closest("section").addClass("sending-ajax"),e.lbSpinner({size:14,fallback:globals.spinners.spinner_14_20272f,insertion:"prepend",element:"span"}),$.ajax({url:n,type:"POST",data:o,traditional:!0,xhrFields:{withCredentials:!0},success:function(u,f,w){u&&u.csrf&&(supermodelCSRF=u.csrf,$("input[name=__csrf]").val(u.csrf)),u&&u.result?document.location.reload():u&&u.messages&&(bxd.showMessages(u.result?"success":"error",u.messages),e.lbSpinner("stop"),e.closest("section").removeClass("sending-ajax"))},error:function(u,f,w){bxd.showMessages("error","An unexpected network error occurred.  Please try saving the form again."),e.lbSpinner("stop"),e.closest("section").removeClass("sending-ajax")}})},s=function(o,u){if(!o.data("ajax-working")){o.data("ajax-working",!0);const f=o.serialize();$.ajax({url:a,type:"POST",data:f,traditional:!0,xhrFields:{withCredentials:!0},success:function(w,b,m){w.result&&w.count>0?bxd.colorboxModalConfirm("A ".concat(w.tagCode," tag already exists on ")+bxd.pluralise(w.count,"item")+". This action will merge ".concat(w.count==1?"that tag":"those tags"," with the tag youre renaming, which exists on ")+bxd.pluralise(u,"item")+". There is no undo! Do you wish to continue?",{ok:"Merge Tags"},function(){t(f)}):($(".js-edit").colorbox.close(),w.messages&&w.errorCodes.indexOf("tag.same.name")>-1?bxd.showMessages(w.result?"success":"error",w.messages):t(f))},complete:function(w,b){o.data("ajax-working",!1)},error:function(w,b,m){bxd.showMessages("error","An unexpected network error occurred.  Please try saving the form again.")}})}};var r={href:i+"#modal",innerWidth:"510px",overlayClose:!1,title:" ",onComplete:function(){var o=$(this);$("#tag-editor-modal input[name=tagCode]").val(o.data("rawTag")),$("#tag-editor-modal input[name=code]").val(o.data("code")),$("#tag-editor-modal input[name=rawTag]").val(o.data("rawTag")),$("#tag-editor-modal input[name=newTagCode]").val(o.data("rawTag")).focus();const u=$("#tag-editor-modal form"),f=o.data("count");u.on("submit",function(w){w.preventDefault(),s(u,f)}),$("#edit-tag-cancel-button").on("click",function(){$(".js-edit").colorbox.close()}),$(".js-edit").colorbox.resize()}};$(".js-edit").colorbox(r)});$(function(){$(".js-tmdb-bio").condense({condensedLength:200,moreText:" more",lessText:"&times;",ellipsis:"&hellip;",moreSpeed:0,lessSpeed:0}),Ls()});(function(e){var i=[];function n(t){t.data("form-state-before-submit",t.data("form-initial-state"))}function a(t){t.data("form-initial-state",t.sanitisedSerialisedFormForProtection())}e.fn.sanitisedSerialisedFormForProtection=function(){return e(this).serialize().replace(/__csrf=[^&]*/,"__csrf=").replace(/&(shareOnFacebook|json)=(true|false)/g,"")},e.fn.revertUnsavedChanges=function(t){var s=e(this);s.data("form-initial-state",s.data("form-state-before-submit"))},e.fn.protectUnsavedChanges=function(t){var s={warning:"You have unsaved changes"};return t&&e.extend(s,t),e(this).each(function(){var r=e(this);if(s.clear){r.data("form-initial-state","");return}a(r),s.reset||(r.revertUnsavedChanges=function(){},r.data("protect-unsaved-changes-warning",s.warning),r.submit(function(){n(r),a(r)}),i.push(r))})},e(window).bind("beforeunload",function(t){t=t||window.event;for(let s=0;s<i.length;s++){const r=i[s];if(r.data("form-initial-state")!=r.sanitisedSerialisedFormForProtection()){r.trigger("unsaved-changes");const o=r.data("protect-unsaved-changes-warning");return t&&(t.preventDefault(),t.returnValue=o),o}}})})(jQuery);$(document).on("click","a.js-form-action",function(e){if(e.preventDefault(),!$(this).hasClass("btn-loading")){$(this).addClass("btn-loading");var i=$(this).data("form-id"),n=$("#"+i);n.find("input[name=__csrf]").value=window.supermodelCSRF,n.submit()}});$(document).on("unsaved-changes","form",function(){$(this).find("a.js-form-action").removeClass("btn-loading")});$(document).on("click","a.popup",function(e){e.preventDefault(),$.fn.popupWindow({windowURL:this.href,windowName:$(this).data("popup-name"),width:$(this).data("popup-width"),height:$(this).data("popup-height"),centerBrowser:!0})});function Cr(){try{const e=function(i){return i.indexOf("anal")>=0||i.indexOf("arse")>=0||i.indexOf("cunt")>=0||i.indexOf("dick")>=0||i.indexOf("faggot")>=0||i.indexOf("fuck")>=0||i.indexOf("nigga")>=0||i.indexOf("nigger")>=0||i.indexOf("rape")>=0||i.indexOf("sex")>=0||i.indexOf("shit")>=0||i.indexOf("slut")>=0||i.indexOf("wank")>=0||i.indexOf("whore")>=0};if($("div.site-body h1").filter(function(){const i=$(this).text().toLowerCase();return e(i)}).length)return!1}finally{}return!0}window.word_check=Cr;$(function(){$(document).on("ajax-success","a.add-to-watchlist",function(e,i,n,a){i.messages&&bxd.showMessages(i.result?"success":"error",i.messages),i.result&&(bxd.addToWatchlist(i.film.id),PubSub.publish("add-film-to-watchlist",{film:i.film}),PubSub.publish("film-member-relationship"),gtag("event","add_to_watchlist",{event_category:"films",film_id:i.film.boxdItCode,transport_type:"beacon"}))}),$(document).on("ajax-success","a.remove-from-watchlist",function(e,i,n,a){i.messages&&bxd.showMessages(i.result?"success":"error",i.messages),i.result&&(bxd.removeFromWatchlist(i.film.id),PubSub.publish("film-member-relationship"),gtag("event","remove_from_watchlist",{event_category:"films",film_id:i.film.boxdItCode,transport_type:"beacon"}))}),renderMobile||$(document).on("mouseover","a.remove-from-watchlist",function(){$(this).children(".watchlist-link-text").html('Remove<span class="_hidetext"> this film from your watchlist</span>')}).on("mouseout","a.remove-from-watchlist",function(){$(this).children(".watchlist-link-text").html('<span class="_hidetext">This film is in your </span>Watchlist')}),$("#import-to-watchlist").click(function(e){e.preventDefault(),$("#import-to-watchlist-input").trigger("click")}),$("#import-to-watchlist-input").change(function(){var e=$("#import-to-watchlist-form");e.find("input[name=__csrf]").value=window.supermodelCSRF,e.submit()})});$(function(){$("body").hasClass("filmography-page")&&document.querySelectorAll(".js-".concat(qt)).forEach(e=>{new $t(e)})});$(function(){$("#favourite-films").sortable({axis:"x",helper:"clone"});var e=328;renderMobile&&(e=262),$("#frm-favourite-film-name").autocomplete($("#frm-favourite-film-name").data("url"),$.extend({},bxd.autocompleteConfig,{width:e})).result(function(n,a,t){var s=$("#favourite-film-search-modal").data("list-index");$("#frm-favourite-film-name").val("").trigger("flushCache"),$("#favourite-film-search-modal").colorbox.close();var r=$($("#favourite-films li")[s]);r.addClass("poster -placeholder").html('<div class="loading-poster"></div><input type="hidden" name="favouriteFilmIds" value="'+a.id+'"/>');var o=r.find("div");$.get(a.image125,function(u){o.removeClass("loading-poster"),o.empty().prepend(u),r.removeClass("poster-container -placeholder"),renderMobile&&r.append('<a href="#" class="replace remove-favourite-film">remove</a>'),bxd.layout(o)})}),renderMobile?($("a.remove-favourite-film").remove(),$("#favourite-films li").each(function(){$(this).hasClass("poster")&&$(this).append('<a href="#" class="replace remove-favourite-film">remove</a>')})):$("#favourite-films li").on("mouseenter",function(){$("a.remove-favourite-film").remove(),$(this).hasClass("poster")&&$(this).append('<a href="#" class="replace remove-favourite-film">remove</a>')}).on("mouseleave",function(){$("a.remove-favourite-film").remove()}),$("#favourite-films").on("click","a.remove-favourite-film",function(n){n.preventDefault(),$(this).closest("li").fadeOut(function(){$(this).appendTo($("#favourite-films")).html("").removeClass("poster").addClass("poster-container -placeholder").show()})}),$("#favourite-films li").on("click",function(n){if(!$(n.target).hasClass("remove-favourite-film")){n.preventDefault();var a=$("#favourite-films li").index($(this));$("#favourite-film-search-modal").data("list-index",a),$("#open-favourite-film-modal").trigger("click")}});var i={inline:!0,fixed:!0,overlayClose:!1,href:"#favourite-film-search-modal",onComplete:function(){$("#frm-favourite-film-name").focus()},onClosed:function(){$("#frm-favourite-film-name").trigger("close")}};renderMobile&&(i.width="100%",i.initialWidth="288px",i.initialHeight="200px",i.transition="fade",i.speed=0),$("#open-favourite-film-modal").colorbox(i)});const kr="vertical-list",Qi={EXPANDED:"vertical-list-expanded"};class Tr extends Hs{constructor(n,a,t={}){super(n);ne(this,"_wake",()=>{!this.isExpanded&&this.showAllTrigger&&(this.showAllTrigger.removeAttribute("disabled"),this.el.insertAdjacentElement("beforeend",this.showAllTrigger),this.showAllTrigger.addEventListener("click",this._onClickShowAllTrigger,{once:!0}))});ne(this,"_suspend",()=>{this.contextController.detachShowAllTrigger()});ne(this,"_onClickShowAllTrigger",n=>{if(n.preventDefault(),n.currentTarget.disabled)return;const a=this.contextController.detachShowAllTrigger();a.disabled="disabled",a.ariaExpanded="true",a.removeEventListener("click",this._onClickShowAllTrigger),this.el.removeAttribute("data-".concat(Qi.EXPANDED))});this.el=a,this.showAllTrigger=n.showAllTrigger,Object.defineProperties(this,{isExpanded:{get:()=>this.el.getAttribute("data-".concat(Qi.EXPANDED))==="true"}}),this.on(Wi.WAKE,this._wake),this.on(Wi.SUSPEND,this._suspend)}}const Pn="card-summary-list",Er={CARD_SUMMARY:"card-summary"},Ir={cardSummaryClassName:"card-summary"};class Ar extends Rs{constructor(n,a={}){const t=yn({},Ir,a,bn(n,Pn)),s={};s[kr]=Tr;super(Ns,s,n,t);ne(this,"detachShowAllTrigger",()=>{if(!(!this.showAllTrigger||!this.showAllTrigger.parentNode))return this.showAllTrigger.parentNode.removeChild(this.showAllTrigger)});Object.defineProperties(this,{el:{get:()=>this._el},cardSummaries:{get:()=>this._cardSummaries},showAllTrigger:{get:()=>this._showAllTrigger}}),this._el=n,this._cardSummaries=Array.from(this.el.querySelectorAll(":scope > .js-".concat(Er.CARD_SUMMARY))),this._showAllTrigger=this.el.querySelector('[data-js-trigger="showall"]'),this.detachShowAllTrigger(),this.showAllTrigger&&this.showAllTrigger.removeAttribute("hidden")}}const Pr=e=>{const n=e.nodeName==="IMG"?e:e.querySelector("img");return n?n.classList.contains("-empty-poster-image"):null},Ji="js-open-content-media-picker-modal-",Dr=e=>{const i=document.querySelector('[data-js-trigger="postermodal"]'),n=document.getElementById("poster-modal");if(n){const u=w=>{w?(i.href=w,i.target="_blank"):i.removeAttribute("href")};n.parentElement!==document.body&&document.body.appendChild(n);const f=n.querySelector(".film-poster");if(f)if(f.classList.contains("really-lazy-load")||Pr(f))u();else{const w=f.querySelector("img");u(w.src)}n.addEventListener("postersrcchange",w=>{u(w.detail.src.newValue)})}if(i&&n){const u=new ns(n);i.addEventListener("click",f=>{if(!f.currentTarget.hasAttribute("href"))return;const w=f.currentTarget.querySelector(".overlay-actions");w&&(f.target===w||w.contains(f.target))||(f.preventDefault(),u.show())})}const a=e.getCSIRequestsByTopic("sidebar-user-actions"),t=[ss,rs],s=u=>{for(const f of Array.from(document.body.classList)){const[,w]=f.split(Ji);if(w&&t.includes(w))return w}return null},r=t.map(u=>"".concat(Ji).concat(u));let o=!1;for(const u of Array.from(document.body.classList))if(r.includes(u)){o=!0;break}o&&a.length&&a[0].onReady.then(u=>{if(!u)return;const f=s(document.body.classList);if(!f)return;const w=u.querySelector('[data-bs-toggle="modal"][data-js-trigger-content-media-picker="'.concat(f,'"]'));if(w){const b=new Event("click",{bubbles:!0,cancelable:!0});w.dispatchEvent(b)}}).catch(u=>{console.error(u)})},Or="js-open-diary-entry-form-modal",Dn=(e,i)=>{document.getElementById(os).addEventListener("shown.bs.modal",()=>{e.remove()},{once:!0}),ls(i).show(e)},Mr=e=>{const i=document.createElement("div");i.setAttribute("data-".concat(dn,"-options"),JSON.stringify({mode:hn.SEARCH})),document.body.appendChild(i),Dn(i,e)},Lr=e=>{if(!document.body.classList.contains(Or))return;const i=new url("./window.location.html");let n=!1,a;i.searchParams.has("date")&&(a=i.searchParams.get("date"),Number.isNaN(new Date(a).valueOf())?e.showMessages("error","".concat(a," is not a valid date string. Please use YYYY-MM-DD format")):n=!0);const t=document.createElement("div");t.setAttribute("data-".concat(dn,"-options"),JSON.stringify({endpoints:{data:as(window.location)},mode:hn.COMPOSE,viewingOrProductionData:{...n?{viewingDate:new Date(a)}:{}}})),document.body.appendChild(t),Dn(t,e)},jr="film-news";$(function(){var e=$("#popular-reviews");person.loggedIn&&person.blockedMembers.length&&e.find(".js-listitem > .js-production-record").each(function(){const s=$(this);person.hasBlocked(s.attr("data-person"))&&s.parent().remove()});var i=!1,n=!1;PubSub.subscribe("csi-recent-reviews",function(){var s=$("#recent-reviews");person.loggedIn&&person.blockedMembers.length&&s.find(".js-listitem > .js-production-record").each(function(){const r=$(this);person.hasBlocked(r.attr("data-person"))&&r.parent().remove()}),i=!0,n&&a()}),PubSub.subscribe("csi-friend-reviews",function(){n=!0,i&&a()}),PubSub.subscribe("csi-popular-lists",function(){bxd.filterPopularLists($("#film-popular-lists"),3)}),PubSub.subscribe("film-availability-loaded",function(){Fs()});var a=function(){var s=$("#recent-reviews");$("#popular-reviews-with-friends .js-listitem > .js-production-record").each(function(){const o=$(this).data("viewing-id");e.find('.js-listitem > .js-production-record[data-viewing-id="'.concat(o,'"]')).parent().remove(),s.find('.js-listitem > .js-production-record[data-viewing-id="'.concat(o,'"]')).parent().remove()}),t(e,e.data("how-many"),function(r){const o=r.data("viewing-id");return!person.hasBlocked(r.attr("data-person"))&&$('#popular-reviews-with-friends .js-listitem > .js-production-record[data-viewing-id="'.concat(o,'"]')).length===0},function(){var r=e.find(".js-listitem > .js-production-record");r.length===0?e.remove():(r.length>3&&r.slice(3).parent().remove(),e.find(".js-listitem > .js-production-record").each(function(){const u=$(this).data("viewing-id");$('#recent-reviews .js-listitem > .js-production-record[data-viewing-id="'.concat(u,'"]')).parent().remove()})),t(s,s.data("how-many"),function(o){const u=o.data("viewing-id");return!person.hasBlocked(o.attr("data-person"))&&$('#popular-reviews-with-friends .js-listitem > .js-production-record[data-viewing-id="'.concat(u,'"]')).length===0&&e.find('.js-listitem > .js-production-record[data-viewing-id="'.concat(u,'"]')).length===0},function(){var o=s.find(".js-listitem > .js-production-record");o.length===0?s.remove():o.length>3&&o.slice(3).parent().remove()})})},t=function(s,r,o,u){var f=3-s.find(".js-listitem > .js-production-record").length;if(s.length===0||f<=0){u();return}var w=s.data("url"),b={start:r,howMany:12};$.ajax({url:w,type:"GET",data:b,success:function(m,p,g){if($.trim(m)!==""){var c=$(m);bxd.layout(c);var v=0,h=s.find(".js-viewing-list");c.find(".js-listitem > .js-production-record").each(function(){var l=$(this);v<f&&o(l)&&(v++,h.append(l.parent()))}),u()}},error:function(){u()}})};fn()&&(document.querySelectorAll(".js-".concat(qt)).forEach(s=>{new $t(s)}),Si().then(s=>s.onCSIRequestReady).then(s=>{Dr(s),Lr(s);const r=s.getCSIRequestsByTopic("sidebar-user-actions");r.length&&r[0].onReady.then(u=>{if(!u)return;const f=u.querySelector(".js-customise-media-menu");f&&new js(f,{triggerInteraction:"click",floatingConfig:{placement:"right-start",middleware:[Wt({mainAxis:12,alignmentAxis:-12}),yi({mainAxis:!1,crossAxis:!0,padding:Pe.shift.padding,limiter:wi({offset:({rects:w})=>({crossAxis:w.reference.width*.75+w.floating.width})})}),Bt({padding:Pe.flip.padding})]}},s)}).catch(u=>{console.error(u)});const o=s.getCSIRequestsByTopic(jr);o.length&&o[0].onReady.then(u=>{u&&u.querySelectorAll("[data-js-".concat(Pn,"]")).forEach(f=>{new Ar(f)})})}))});$(function(){var e=$("#films-browser-list-container");if(e.length){let i=function(){e.find(".placeholder-empty").html('<p class="calculating">Calculating</p>'),$(".calculating").lbSpinner({size:14,fallback:globals.spinners.spinner_14_20272f,insertion:"prepend",element:"span"}),$.get(e.data("url"),function(n,a,t){a=="success"?(e.empty().prepend(n),bxd.layout(e)):e.find(".placeholder-empty").html('<p>Unable to contact Letterboxd. Please&nbsp;<a href="#">try&nbsp;again</a>.</p></div>').find("a").click(function(s){s.preventDefault(),i()})})};e.append('<div class="placeholder-empty"></div>'),i()}});const Rr="home",Nr="person-home";function Zi(){const e=$(".js-story-list"),i=bxd.getTrailerModalConfig();if(e.length){const n=new Ts(e,{});e.data(Es,n),e.find(".js-video-zoom").colorbox(i)}}Promise.all([wn,Si()]).then(([,e])=>{if(ci(Rr)||ci(Nr)){globals.autoAddFilm&&(person.loggedIn?Mr(e):(bxd.showMessages("error","Please sign in to add a film to your diary"),$("#header .sign-in-menu a").trigger("click")));var i=$("#user-homepage-container");i.length?(person.validated===!1&&bxd.showMessages("error",'Your Letterboxd account has not been validated. Check your email or <a href="'+baseURL+'/settings/">update your details</a> to resend the validation link.',{sticky:!0}),i.find("ul li.placeholder-empty").append('<p class="calculating">Calculating...</p>'),i.find("p.calculating").lbSpinner({size:16,fallback:globals.spinners.spinner_16_161B21,insertion:"prepend",element:"span"}),$.get(i.data("url"),function(n){i.empty().prepend(n),bxd.layout(i),xi(i[0]),Zi()})):Zi()}});$(function(){$("body").hasClass("list-page")&&document.querySelectorAll(".js-".concat(qt)).forEach(e=>{new $t(e)})});$(function(){if($("#imdb-importer-matched-form").protectUnsavedChanges(),$("input[name=hide-successful-matches]").on("change",function(s){s.preventDefault(),$("input[name=hide-successful-matches]").is(":checked")?($($(".import-film").not(":has(.import-no-match, .duplicate-match)")).hide(),$(".import-film").is(":visible")||($("#only-successful-matches-message").show(),$("#import-films").hide())):($($(".import-film").not(":has(.import-no-match, .duplicate-match)")).show(),$("#only-successful-matches-message").is(":visible")&&($("#only-successful-matches-message").hide(),$("#import-films").show())),n()}),$("#imdb-import-button").length){var e=$("#imdb-import-button");e.click(function(s){s.preventDefault(),$("#upload-imdb-import").trigger("click")}),$("#upload-imdb-import").change(function(){$("#imdb-form").submit()})}if($("#importer-matched-form").length){t(),n();var i=$("#importer-matched-form");i.on("click","#replace-original",function(s){n()}),i.on("click","#mark-list-films-as-watched",function(s){n()}),i.on("click","#add-ratings-from-list",function(s){$("#add-ratings-from-list").is(":checked")?$(".js-import-match-reactions").show():$(".js-import-match-reactions").hide(),n()}),i.on("click","#add-notes-from-list",function(s){$(".import-review").is(":visible")?$(".import-review").hide():$(".import-review").show(),n()})}if($("#imdb-importer-matched-form").length){$(".profile-link").hide(),t(),n();var i=$("#imdb-importer-matched-form");i.on("click","#mark-list-films-as-watched",function(r){n()}),i.on("click","#add-ratings-from-list",function(r){$("#add-ratings-from-list").is(":checked")?$(".js-import-match-reactions").show():$(".js-import-match-reactions").hide(),n()}),i.on("click","#add-reviews-from-list",function(r){$(".import-review").is(":visible")?$(".import-review").hide():$(".import-review").show(),n()}),i.on("click","#add-watchedDates-from-list",function(r){$(".view-date").is(":visible")?$(".view-date,.duplicate-entry").hide():$(".view-date,.duplicate-entry").show(),n()}),i.on("click","#add-tags-from-list",function(r){$(".import-tags").is(":visible")?$(".import-tags").hide():$(".import-tags").show(),n()})}function n(){var s="",r="",o=[],u="",f=!1,w=!1,b=!1,m=!1;$("a.save-users-imported-imdb-history").removeClass("import-button-disabled").css({opacity:1}),$("#import-text-suffix").show(),$("#replace-original").is(":checked")&&(s=s+"The existing list will be replaced",w=!0,f=!0),($("#mark-list-films-as-watched").is(":checked")||$("#mark-list-films-as-watched").is(":hidden"))&&(f?r=" films will be marked as watched ":r="Films will be marked as watched ",w=!0,m=!0),$("#add-watchedDates-from-list").is(":checked")&&(o.push(o.length||f||m?"diary entries":"Diary entries"),w=!0,b=!0),$("#add-reviews-from-list").is(":checked")&&(o.push(o.length||f||m?"reviews":"Reviews"),w=!0,b=!0),$("#add-notes-from-list").is(":checked")&&(o.push(o.length||f||m?"list notes":"List notes"),w=!0,b=!0),$("#add-ratings-from-list").is(":checked")&&(o.push(o.length||f||m?"ratings":"Ratings"),w=!0),$("#add-tags-from-list").is(":checked")&&(b?o.push(o.length||f||m?"tags":"Tags"):u=" Tags cannot be added without a review or a viewing date."),f&&(m&&o.length?s=s+",":m?s=s+" and":s+=" "),m&&(s=s+r),(f||m)&&o.length&&(s=s+" and ");for(var p=0;p<o.length;p++)p==o.length-1&&o.length>1&&(s=s+" and "),s=s+o[p],p<o.length-2&&(s=s+", ");o.length&&(s=s+" will be added "),s.length&&(s=s+"as part of this import. There is no undo, so please be careful!"),w||($(".save-users-imported-imdb-history").length?($("#import-text-suffix").hide(),u="",s="You cannot import tags by themselves. You must import them with reviews or watched dates."):s="No changes will be made to your watched films.",$("a.save-users-imported-imdb-history").addClass("import-button-disabled").css({opacity:.35})),s=s+u,$("#import-options-text").text(s)}function a(s){s.hide(),$(".import-buttons").hide(),$(".import-toggle").hide();var r=s.find("#import-films").children().length,o=0;$("p.js-import-progress").html('<span id="import-count"><strong>0</strong></span> films processed from <strong>'+bxd.formatNumber(r)+"</strong> in your file.");var u=25;$("p.js-import-progress").prepend('<span id="spinner" class="small"></span>'),$("#spinner").lbSpinner({size:18});var f=$("<form></form>"),w=["importRating","importReview","importTags","importWatchedDate","importRewatch","importCreatedDate","importFilmId","importViewingId","shouldImportFilm"];$.each(w,function(p,g){var c=s.find($("[name="+g+"]"));f.append(c)});var b=s.serialize();function m(){var p=$("<form></form>");if($.each(w,function(c,v){var h=f.find("[name="+v+"]:lt("+u+")");p.append(h)}),p.children().length>0){let c=function(){$.ajax({url:s.attr("action"),type:"POST",data:b+"&"+p.serialize(),success:function(v){v.result?(o=o+p.children('input[name="shouldImportFilm"][value="true"]').length,$("p.js-import-progress #import-count").html("<strong>"+bxd.formatNumber(o)+"</strong>"),m()):v.messages&&bxd.showMessages("error",v.messages)},error:function(){g++,g>3?($("#spinner").remove(),$("a.submit-matched-films").addClass("import-button-disabled").css({opacity:.35}),bxd.showMessages("error","Oh no! Somethings gone wrong. Please <a href='"+$(".btn-cancel-import").attr("href")+"'>retry</a> later.",{sticky:!0}),$("#imdb-importer-matched-form").protectUnsavedChanges({reset:!0})):setTimeout(c,50*Math.pow(2,g))}})};var g=0;c()}else $("p.js-import-progress").html("<strong>Saved "+bxd.pluralise(o,"film")+".</strong>"),$(".import-buttons").hide(),$(".profile-link").show(),$("#imdb-importer-matched-form").protectUnsavedChanges({reset:!0})}m()}function t(){var s="NoMatch",r="Matched",o="Rejected",u=$("#import-count"),f,w,b=$("#import-films");f=0,w=b.children("li").length,$("p.js-import-progress").prepend('<span id="spinner" class="small"></span>'),$("#spinner").lbSpinner({size:18}),$(window).resize(function(){b.find(".import-film input.film-search").trigger("close")}),b.on("click",".js-replace-film",function(l){l.preventDefault();var d=$(this).closest(".import-film");m.clickedSearch(d)}),b.on("click","a.mark-match-inaccurate",function(l){l.preventDefault();var d=$(this).closest(".import-film");m.clickedSearch(d)}),b.on("click",".close-film-replace",function(l){l.preventDefault();var d=$(this).closest(".import-film");m.clickedSearch(d)}),b.on("click","a.mark-match-accurate",function(l){l.preventDefault();var d=$(this).closest(".import-film");m.clickedIsAccurate(d)}),b.on("click",".js-remove-film",function(l){l.preventDefault();var d=$(this).closest(".import-film");m.clickedRejectFilm(d)}),b.on("click",".import-search-link",function(l){l.preventDefault();var d=$(this).closest(".import-film");m.setState(d,s),m.clickedSearch(d)});var m={};m.updateDOM=function(l){var d=l.find(".import-film-details");d.removeClass("poor-match").removeClass("dont-add").removeClass("duplicate-match").removeClass("icon-hidden"),l.find(".import-match").css({opacity:1}),l.find(".import-search-text").show();var x=!0,_=m.getState(l);switch(_){case r:break;case o:d.addClass("icon-hidden"),l.find(".import-match").css({opacity:.2}),x=!1;break;case s:l.find(".import-search-text").show(),d.addClass("import-no-match"),x=!1;break}_==r&&m.isDuplicate(l)?(l.find(".duplicate-film").show(),d.addClass("duplicate-match"),x=!1):l.find(".duplicate-film").hide(),m.isSearching(l)?(l.addClass("import-state-search"),l.find(".js-production-record").hide(),l.find(".import-search").show().find("input").focus(),l.find("div.icon-matched").hide(),l.find(".import-search-text").hide(),x=!1):(l.find(".import-search").hide(),l.removeClass("import-state-search"),l.find(".js-production-record").show(),l.find("div.icon-matched").show());var k=m.isShouldImport(l);x!=k&&(m.setShouldImport(l,x),m.checkIfDuplicate(l))},m.checkIfDuplicate=function(l){var d=!1,x=m.getFilmId(l),_=[];$("#importer-matched-form input[name=filmId]").each(function(){_.push($(this).val())});var k=[];$("#importer-matched-form input[name=importFilmId]").each(function(){k.push($(this).val()||-1)});var y=[];$("#importer-matched-form input[name=shouldImportFilm]").each(function(){y.push($(this).val())});for(var C=0;C<_.length;C++)x==_[C]&&(d=!0);if(!d){for(var S=0,T=0;T<k.length;T++)x==k[T]&&y[T]=="true"&&S++;m.isShouldImport(l)||S++,S>1&&(d=!0)}l.data("duplicate",d),m.updateDOM(l)},m.isDuplicate=function(l){var d=l.data("duplicate");return typeof d>"u"&&(d=!1),d},m.isShouldImport=function(l){return l.find("input[name=shouldImportFilm]").val()=="true"},m.setShouldImport=function(l,d){l.find("input[name=shouldImportFilm]").val(d)},m.getFilmId=function(l){return l.find("input[name=importFilmId]").val()},m.getState=function(l){return l.data("state")},m.setState=function(l,d){l.data("state",d)},m.isSearching=function(l){var d=l.data("searching");return typeof d>"u"&&(d=!1),d},m.setSearching=function(l,d){l.data("searching",d)},m.clickedRejectFilm=function(l){var d=m.getState(l),x="Remove this film";m.isSearching(l)&&m.setSearching(l,!1),d==o?l.find(".import-search-text").length?m.setState(l,s):m.setState(l,r):(m.setState(l,o),x="Restore this film"),m.updateDOM(l),l.find(".js-remove-film").attr("data-original-title",x).twipsy("show")},m.clickedSearch=function(l){var d=m.isSearching(l);d?m.setSearching(l,!1):m.setSearching(l,!0),m.updateDOM(l)},m.clickedIsAccurate=function(l){m.updateDOM(l)},m.initImportFilm=function(l){l.find("input[name=importFilmId]").val()!==""?m.setState(l,r):m.setState(l,s),m.setSearching(l,!1),m.updateDOM(l),m.checkIfDuplicate(l)};var p;$("#diary-importer-identifier").length?p="diary":$("#list-importer-identifier").length?p="list":$("#watchlist-importer-identifier").length&&(p="watchlist");var g=$("#import-films");c(g,p),$("#import-films").fadeIn();function c(l,d,x){for(var _=x!==void 0?x.next(".import-film").first():l.find(".import-film").first(),k=[],y=100,C=0;C<y;C++)k[C]=_,_=_.next(".import-film"),k[C].data("matchThisFilmOnly",!1);$("a.submit-matched-films").addClass("import-button-disabled").css({opacity:.35}),k[0].length?v(k,y,d,function(){c(l,d,k[k.length-1])}):($("a.submit-matched-films").removeClass("import-button-disabled").css({opacity:1}),$("#imdb-importer-matched-form").show(),$("#importer-matched-form").show(),n())}function v(l,d,x,_){for(var k,y='{ importType: "'+x+'", importFilms: [ ',C=0;C<d;C++)k=l[C].attr("data-json"),y=y+k,C<d-1&&(y=y+", ");y=y+" ]}";var S;$("#imdb-importer-matched-form").length?S=$("#imdb-importer-matched-form").data("url"):S=$("#importer-matched-form").data("url");var T=0;function E(){$.ajax({url:S,type:"POST",data:{json:y,__csrf:supermodelCSRF},dataType:"html",success:function(P){A(P,-1)},error:function(P){T++,T>3?($("#spinner").remove(),$("a.submit-matched-films").addClass("import-button-disabled").css({opacity:.35}),bxd.showMessages("error","Oh no! Somethings gone wrong. Please <a href='"+$(".btn-cancel-import").attr("href")+"'>retry</a> later.",{sticky:!0}),$("#importer-matched-form").protectUnsavedChanges({reset:!0}),$(".btn-cancel-import").text("Retry"),$(".save-users-imported-imdb-history").hide()):setTimeout(E,50*Math.pow(2,T))}})}E();function A(P,D){var O=$("<div></div>").html(P).children(),M=O.length;if(f+=M,f>=w)$("h1.js-import-title").html("Import summary"),$("p.js-import-progress").html("<strong>Matching complete.</strong> Check the results and complete your import below."),$("div.js-hide-successful-matches").show();else{var L="<strong>"+bxd.formatNumber(f)+"</strong> "+(f===1?"film":"films");u.html(L)}var I=[];I[0]=O.first();for(var z=1;z<M;z++)I[z]=I[z-1].next();function j(he,Ee){var we=he.find("input.film-search");we.autocomplete(we.data("url"),$.extend({},bxd.autocompleteConfig,{width:328})).result(function(Ve,J){var Z="{ filmId: "+J.id+", importFilms: [ "+he.attr("data-json")+"] }",Fe;$("#imdb-importer-matched-form").length?Fe=$("#imdb-importer-matched-form").data("url"):Fe=$("#importer-matched-form").data("url"),$.ajax({url:Fe,type:"POST",data:{json:Z,__csrf:supermodelCSRF},dataType:"html",success:function(nt){A(nt,Ee)},error:function(){}})}),we.blur(function(){setTimeout(function(){we.trigger("close")},300)})}for(var B=function(){for(var he=$(this).text().split(","),Ee=$('<ul class="tags"></ul>'),we=0;we<he.length;we++){const Ve=$('<li class="tag"><span></span></li>');Ve.find("span").text($.trim(he[we])),Ee.append(Ve)}$(this).empty().append(Ee)},N=0;N<M;N++){var X,V;D==-1?V=l[N]:V=l[D],X=V.find(".matched"),X.html(I[N]),bxd.layout(X),D==-1?j(V,N):j(V,D),X.find(".import-tags").each(B),V.find(".import-film-details").data("already-rated")===!0&&V.addClass("import-film-already-rated"),$(V.find(".import-match")).length&&m.initImportFilm(V)}if(l[0].data("matchThisFilmOnly")===!1){for(var te=0;te<d;te++)l[te].data("matchThisFilmOnly",!0);_()}}}$("a.add-import-films-to-list").click(function(l){l.preventDefault(),$(this).hasClass("import-button-disabled")||($(this).html("Adding Films"),$(this).addClass("import-button-disabled").css({opacity:.35}),$("#importer-matched-form").trigger("submit"))}),$("a.cancel-import").on("click",function(l){l.preventDefault();var d=$("#importer-matched-form");d.find("input[name=cancelled]").val("true"),d.find("input[name=name]").remove(),d.find("input[name=notes]").remove(),d.find("input[name=publicList]").remove(),d.find("input[name=numberedList]").remove(),d.find("input[name=tag]").remove(),d.find("input[name=importFilmId]").remove(),d.find("input[name=importViewingId]").remove(),d.find("input[name=shouldImportFilm]").remove(),d.find("input[name=importReview]").remove(),d.find("input[name=importRating]").remove(),$("#importer-matched-form").trigger("submit")}),$("a.add-import-films-to-watchlist").click(function(l){l.preventDefault(),$(this).hasClass("import-button-disabled")||($(this).html("Adding Films"),$(this).addClass("import-button-disabled").css({opacity:.35}),$("#imdb-importer-matched-form").trigger("submit"))}),$("a.save-users-imported-imdb-history").click(function(l){l.preventDefault(),$(this).hasClass("import-button-disabled")||($(this).html("Saving"),$(this).addClass("import-button-disabled").css({opacity:.35}),$("#imdb-importer-matched-form").trigger("submit"))}),$("#imdb-importer-matched-form").submit(function(l){l.preventDefault();var d=$("#imdb-importer-matched-form");return a(d),!1}),$("#importer-matched-form").submit(function(l){var d=$("#importer-matched-form");return d.append(h(d)),d.find("input[name=importFilmId]").remove(),d.find("input[name=importViewingId]").remove(),d.find("input[name=shouldImportFilm]").remove(),d.find("input[name=importReview]").remove(),d.find("input[name=importRating]").remove(),d.protectUnsavedChanges({reset:!0}),!0});function h(l){var d=[];l.find("li.import-film").each(function(){var _=$(this),k=_.find("input[name=shouldImportFilm]").val();if(k&&k=="true"){var y=_.find("input[name=importFilmId]").val(),C={film:y},S=_.find("input[name=importReview]").val();S&&S.trim().length>0&&(C.review=S.trim());var T=_.find("input[name=importRating]").val();T&&(C.rating=T),d.push(C)}});var x=$("<input type='hidden' name='entries'/>");return x.val(JSON.stringify(d)),x}$("#importer-matched-form").protectUnsavedChanges({warning:"Your list import will be canceled."})}});$(function(){function e(){var a=$(".really-lazy-load").filter(function(){return $.inviewport(this,{threshold:1e3,container:window})});bxd.loadReallyLazyPosters(a)}var i;function n(){clearTimeout(i),i=setTimeout(e,30)}$(window).bind("scroll",n),PubSub.subscribe("really-lazy-load",n),n()});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function en(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Oe(e){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?en(Object(n),!0).forEach(function(a){Hr(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Tt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tt=function(i){return typeof i}:Tt=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Tt(e)}function Hr(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function Le(){return Le=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Le.apply(this,arguments)}function Fr(e,i){if(e==null)return{};var n={},a=Object.keys(e),t,s;for(s=0;s<a.length;s++)t=a[s],!(i.indexOf(t)>=0)&&(n[t]=e[t]);return n}function zr(e,i){if(e==null)return{};var n=Fr(e,i),a,t;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)a=s[t],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var Wr="1.15.6";function Me(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var je=Me(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),mt=Me(/Edge/i),tn=Me(/firefox/i),ct=Me(/safari/i)&&!Me(/chrome/i)&&!Me(/android/i),ki=Me(/iP(ad|od|hone)/i),On=Me(/chrome/i)&&Me(/android/i),Mn={capture:!1,passive:!1};function Q(e,i,n){e.addEventListener(i,n,!je&&Mn)}function K(e,i,n){e.removeEventListener(i,n,!je&&Mn)}function jt(e,i){if(i){if(i[0]===">"&&(i=i.substring(1)),e)try{if(e.matches)return e.matches(i);if(e.msMatchesSelector)return e.msMatchesSelector(i);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(i)}catch(n){return!1}return!1}}function Ln(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Te(e,i,n,a){if(e){n=n||document;do{if(i!=null&&(i[0]===">"?e.parentNode===n&&jt(e,i):jt(e,i))||a&&e===n)return e;if(e===n)break}while(e=Ln(e))}return null}var nn=/\s+/g;function xe(e,i,n){if(e&&i)if(e.classList)e.classList[n?"add":"remove"](i);else{var a=(" "+e.className+" ").replace(nn," ").replace(" "+i+" "," ");e.className=(a+(n?" "+i:"")).replace(nn," ")}}function q(e,i,n){var a=e&&e.style;if(a){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),i===void 0?n:n[i];!(i in a)&&i.indexOf("webkit")===-1&&(i="-webkit-"+i),a[i]=n+(typeof n=="string"?"":"px")}}function tt(e,i){var n="";if(typeof e=="string")n=e;else do{var a=q(e,"transform");a&&a!=="none"&&(n=a+" "+n)}while(!i&&(e=e.parentNode));var t=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return t&&new t(n)}function jn(e,i,n){if(e){var a=e.getElementsByTagName(i),t=0,s=a.length;if(n)for(;t<s;t++)n(a[t],t);return a}return[]}function De(){var e=document.scrollingElement;return e||document.documentElement}function ce(e,i,n,a,t){if(!(!e.getBoundingClientRect&&e!==window)){var s,r,o,u,f,w,b;if(e!==window&&e.parentNode&&e!==De()?(s=e.getBoundingClientRect(),r=s.top,o=s.left,u=s.bottom,f=s.right,w=s.height,b=s.width):(r=0,o=0,u=window.innerHeight,f=window.innerWidth,w=window.innerHeight,b=window.innerWidth),(i||n)&&e!==window&&(t=t||e.parentNode,!je))do if(t&&t.getBoundingClientRect&&(q(t,"transform")!=="none"||n&&q(t,"position")!=="static")){var m=t.getBoundingClientRect();r-=m.top+parseInt(q(t,"border-top-width")),o-=m.left+parseInt(q(t,"border-left-width")),u=r+s.height,f=o+s.width;break}while(t=t.parentNode);if(a&&e!==window){var p=tt(t||e),g=p&&p.a,c=p&&p.d;p&&(r/=c,o/=g,b/=g,w/=c,u=r+w,f=o+b)}return{top:r,left:o,bottom:u,right:f,width:b,height:w}}}function sn(e,i,n){for(var a=He(e,!0),t=ce(e)[i];a;){var s=ce(a)[n],r=void 0;if(r=t>=s,!r)return a;if(a===De())break;a=He(a,!1)}return!1}function it(e,i,n,a){for(var t=0,s=0,r=e.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==U.ghost&&(a||r[s]!==U.dragged)&&Te(r[s],n.draggable,e,!1)){if(t===i)return r[s];t++}s++}return null}function Ti(e,i){for(var n=e.lastElementChild;n&&(n===U.ghost||q(n,"display")==="none"||i&&!jt(n,i));)n=n.previousElementSibling;return n||null}function _e(e,i){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==U.clone&&(!i||jt(e,i))&&n++;return n}function rn(e){var i=0,n=0,a=De();if(e)do{var t=tt(e),s=t.a,r=t.d;i+=e.scrollLeft*s,n+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[i,n]}function Br(e,i){for(var n in e)if(e.hasOwnProperty(n)){for(var a in i)if(i.hasOwnProperty(a)&&i[a]===e[n][a])return Number(n)}return-1}function He(e,i){if(!e||!e.getBoundingClientRect)return De();var n=e,a=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var t=q(n);if(n.clientWidth<n.scrollWidth&&(t.overflowX=="auto"||t.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(t.overflowY=="auto"||t.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return De();if(a||i)return n;a=!0}}while(n=n.parentNode);return De()}function qr(e,i){if(e&&i)for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e}function Jt(e,i){return Math.round(e.top)===Math.round(i.top)&&Math.round(e.left)===Math.round(i.left)&&Math.round(e.height)===Math.round(i.height)&&Math.round(e.width)===Math.round(i.width)}var ut;function Rn(e,i){return function(){if(!ut){var n=arguments,a=this;n.length===1?e.call(a,n[0]):e.apply(a,n),ut=setTimeout(function(){ut=void 0},i)}}}function $r(){clearTimeout(ut),ut=void 0}function Nn(e,i,n){e.scrollLeft+=i,e.scrollTop+=n}function Hn(e){var i=window.Polymer,n=window.jQuery||window.Zepto;return i&&i.dom?i.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Fn(e,i,n){var a={};return Array.from(e.children).forEach(function(t){var s,r,o,u;if(!(!Te(t,i.draggable,e,!1)||t.animated||t===n)){var f=ce(t);a.left=Math.min((s=a.left)!==null&&s!==void 0?s:1/0,f.left),a.top=Math.min((r=a.top)!==null&&r!==void 0?r:1/0,f.top),a.right=Math.max((o=a.right)!==null&&o!==void 0?o:-1/0,f.right),a.bottom=Math.max((u=a.bottom)!==null&&u!==void 0?u:-1/0,f.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var ye="Sortable"+new Date().getTime();function Ur(){var e=[],i;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(t){if(!(q(t,"display")==="none"||t===U.ghost)){e.push({target:t,rect:ce(t)});var s=Oe({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=tt(t,!0);r&&(s.top-=r.f,s.left-=r.e)}t.fromRect=s}})}},addAnimationState:function(a){e.push(a)},removeAnimationState:function(a){e.splice(Br(e,{target:a}),1)},animateAll:function(a){var t=this;if(!this.options.animation){clearTimeout(i),typeof a=="function"&&a();return}var s=!1,r=0;e.forEach(function(o){var u=0,f=o.target,w=f.fromRect,b=ce(f),m=f.prevFromRect,p=f.prevToRect,g=o.rect,c=tt(f,!0);c&&(b.top-=c.f,b.left-=c.e),f.toRect=b,f.thisAnimationDuration&&Jt(m,b)&&!Jt(w,b)&&(g.top-b.top)/(g.left-b.left)===(w.top-b.top)/(w.left-b.left)&&(u=Vr(g,m,p,t.options)),Jt(b,w)||(f.prevFromRect=w,f.prevToRect=b,u||(u=t.options.animation),t.animate(f,g,b,u)),u&&(s=!0,r=Math.max(r,u),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},u),f.thisAnimationDuration=u)}),clearTimeout(i),s?i=setTimeout(function(){typeof a=="function"&&a()},r):typeof a=="function"&&a(),e=[]},animate:function(a,t,s,r){if(r){q(a,"transition",""),q(a,"transform","");var o=tt(this.el),u=o&&o.a,f=o&&o.d,w=(t.left-s.left)/(u||1),b=(t.top-s.top)/(f||1);a.animatingX=!!w,a.animatingY=!!b,q(a,"transform","translate3d("+w+"px,"+b+"px,0)"),this.forRepaintDummy=Yr(a),q(a,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),q(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){q(a,"transition",""),q(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},r)}}}}function Yr(e){return e.offsetWidth}function Vr(e,i,n,a){return Math.sqrt(Math.pow(i.top-e.top,2)+Math.pow(i.left-e.left,2))/Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2))*a.animation}var Ke=[],Zt={initializeByDefault:!0},gt={mount:function(i){for(var n in Zt)Zt.hasOwnProperty(n)&&!(n in i)&&(i[n]=Zt[n]);Ke.forEach(function(a){if(a.pluginName===i.pluginName)throw"Sortable: Cannot mount plugin ".concat(i.pluginName," more than once")}),Ke.push(i)},pluginEvent:function(i,n,a){var t=this;this.eventCanceled=!1,a.cancel=function(){t.eventCanceled=!0};var s=i+"Global";Ke.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][s]&&n[r.pluginName][s](Oe({sortable:n},a)),n.options[r.pluginName]&&n[r.pluginName][i]&&n[r.pluginName][i](Oe({sortable:n},a)))})},initializePlugins:function(i,n,a,t){Ke.forEach(function(o){var u=o.pluginName;if(!(!i.options[u]&&!o.initializeByDefault)){var f=new o(i,n,i.options);f.sortable=i,f.options=i.options,i[u]=f,Le(a,f.defaults)}});for(var s in i.options)if(i.options.hasOwnProperty(s)){var r=this.modifyOption(i,s,i.options[s]);typeof r<"u"&&(i.options[s]=r)}},getEventProperties:function(i,n){var a={};return Ke.forEach(function(t){typeof t.eventProperties=="function"&&Le(a,t.eventProperties.call(n[t.pluginName],i))}),a},modifyOption:function(i,n,a){var t;return Ke.forEach(function(s){i[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(t=s.optionListeners[n].call(i[s.pluginName],a))}),t}};function Xr(e){var i=e.sortable,n=e.rootEl,a=e.name,t=e.targetEl,s=e.cloneEl,r=e.toEl,o=e.fromEl,u=e.oldIndex,f=e.newIndex,w=e.oldDraggableIndex,b=e.newDraggableIndex,m=e.originalEvent,p=e.putSortable,g=e.extraEventProperties;if(i=i||n&&n[ye],!!i){var c,v=i.options,h="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!je&&!mt?c=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent(a,!0,!0)),c.to=r||n,c.from=o||n,c.item=t||n,c.clone=s,c.oldIndex=u,c.newIndex=f,c.oldDraggableIndex=w,c.newDraggableIndex=b,c.originalEvent=m,c.pullMode=p?p.lastPutMode:void 0;var l=Oe(Oe({},g),gt.getEventProperties(a,i));for(var d in l)c[d]=l[d];n&&n.dispatchEvent(c),v[h]&&v[h].call(i,c)}}var Gr=["evt"],be=function(i,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=a.evt,s=zr(a,Gr);gt.pluginEvent.bind(U)(i,n,Oe({dragEl:R,parentEl:ae,ghostEl:Y,rootEl:ie,nextEl:Ue,lastDownEl:Et,cloneEl:se,cloneHidden:Ne,dragStarted:at,putSortable:ue,activeSortable:U.active,originalEvent:t,oldIndex:Ze,oldDraggableIndex:ft,newIndex:Se,newDraggableIndex:Re,hideGhostForTarget:qn,unhideGhostForTarget:$n,cloneNowHidden:function(){Ne=!0},cloneNowShown:function(){Ne=!1},dispatchSortableEvent:function(o){me({sortable:n,name:o,originalEvent:t})}},s))};function me(e){Xr(Oe({putSortable:ue,cloneEl:se,targetEl:R,rootEl:ie,oldIndex:Ze,oldDraggableIndex:ft,newIndex:Se,newDraggableIndex:Re},e))}var R,ae,Y,ie,Ue,Et,se,Ne,Ze,Se,ft,Re,bt,ue,Je=!1,Rt=!1,Nt=[],Be,ke,ei,ti,an,on,at,Qe,dt,ht=!1,yt=!1,It,de,ii=[],fi=!1,Ht=[],Ut=typeof document<"u",wt=ki,ln=mt||je?"cssFloat":"float",Kr=Ut&&!On&&!ki&&"draggable"in document.createElement("div"),zn=function(){if(Ut){if(je)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Wn=function(i,n){var a=q(i),t=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),s=it(i,0,n),r=it(i,1,n),o=s&&q(s),u=r&&q(r),f=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+ce(s).width,w=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ce(r).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&o.float!=="none"){var b=o.float==="left"?"left":"right";return r&&(u.clear==="both"||u.clear===b)?"vertical":"horizontal"}return s&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||f>=t&&a[ln]==="none"||r&&a[ln]==="none"&&f+w>t)?"vertical":"horizontal"},Qr=function(i,n,a){var t=a?i.left:i.top,s=a?i.right:i.bottom,r=a?i.width:i.height,o=a?n.left:n.top,u=a?n.right:n.bottom,f=a?n.width:n.height;return t===o||s===u||t+r/2===o+f/2},Jr=function(i,n){var a;return Nt.some(function(t){var s=t[ye].options.emptyInsertThreshold;if(!(!s||Ti(t))){var r=ce(t),o=i>=r.left-s&&i<=r.right+s,u=n>=r.top-s&&n<=r.bottom+s;if(o&&u)return a=t}}),a},Bn=function(i){function n(s,r){return function(o,u,f,w){var b=o.options.group.name&&u.options.group.name&&o.options.group.name===u.options.group.name;if(s==null&&(r||b))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return n(s(o,u,f,w),r)(o,u,f,w);var m=(r?o:u).options.group.name;return s===!0||typeof s=="string"&&s===m||s.join&&s.indexOf(m)>-1}}var a={},t=i.group;(!t||Tt(t)!="object")&&(t={name:t}),a.name=t.name,a.checkPull=n(t.pull,!0),a.checkPut=n(t.put),a.revertClone=t.revertClone,i.group=a},qn=function(){!zn&&Y&&q(Y,"display","none")},$n=function(){!zn&&Y&&q(Y,"display","")};Ut&&!On&&document.addEventListener("click",function(e){if(Rt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Rt=!1,!1},!0);var qe=function(i){if(R){i=i.touches?i.touches[0]:i;var n=Jr(i.clientX,i.clientY);if(n){var a={};for(var t in i)i.hasOwnProperty(t)&&(a[t]=i[t]);a.target=a.rootEl=n,a.preventDefault=void 0,a.stopPropagation=void 0,n[ye]._onDragOver(a)}}},Zr=function(i){R&&R.parentNode[ye]._isOutsideThisEl(i.target)};function U(e,i){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=i=Le({},i),e[ye]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Wn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,o){r.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:U.supportPointer!==!1&&"PointerEvent"in window&&(!ct||ki),emptyInsertThreshold:5};gt.initializePlugins(this,e,n);for(var a in n)!(a in i)&&(i[a]=n[a]);Bn(i);for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));this.nativeDraggable=i.forceFallback?!1:Kr,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?Q(e,"pointerdown",this._onTapStart):(Q(e,"mousedown",this._onTapStart),Q(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Q(e,"dragover",this),Q(e,"dragenter",this)),Nt.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),Le(this,Ur())}U.prototype={constructor:U,_isOutsideThisEl:function(i){!this.el.contains(i)&&i!==this.el&&(Qe=null)},_getDirection:function(i,n){return typeof this.options.direction=="function"?this.options.direction.call(this,i,n,R):this.options.direction},_onTapStart:function(i){if(i.cancelable){var n=this,a=this.el,t=this.options,s=t.preventOnFilter,r=i.type,o=i.touches&&i.touches[0]||i.pointerType&&i.pointerType==="touch"&&i,u=(o||i).target,f=i.target.shadowRoot&&(i.path&&i.path[0]||i.composedPath&&i.composedPath()[0])||u,w=t.filter;if(oa(a),!R&&!(/mousedown|pointerdown/.test(r)&&i.button!==0||t.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&ct&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=Te(u,t.draggable,a,!1),!(u&&u.animated)&&Et!==u)){if(Ze=_e(u),ft=_e(u,t.draggable),typeof w=="function"){if(w.call(this,i,u,this)){me({sortable:n,rootEl:f,name:"filter",targetEl:u,toEl:a,fromEl:a}),be("filter",n,{evt:i}),s&&i.preventDefault();return}}else if(w&&(w=w.split(",").some(function(b){if(b=Te(f,b.trim(),a,!1),b)return me({sortable:n,rootEl:b,name:"filter",targetEl:u,fromEl:a,toEl:a}),be("filter",n,{evt:i}),!0}),w)){s&&i.preventDefault();return}t.handle&&!Te(f,t.handle,a,!1)||this._prepareDragStart(i,o,u)}}},_prepareDragStart:function(i,n,a){var t=this,s=t.el,r=t.options,o=s.ownerDocument,u;if(a&&!R&&a.parentNode===s){var f=ce(a);if(ie=s,R=a,ae=R.parentNode,Ue=R.nextSibling,Et=a,bt=r.group,U.dragged=R,Be={target:R,clientX:(n||i).clientX,clientY:(n||i).clientY},an=Be.clientX-f.left,on=Be.clientY-f.top,this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,R.style["will-change"]="all",u=function(){if(be("delayEnded",t,{evt:i}),U.eventCanceled){t._onDrop();return}t._disableDelayedDragEvents(),!tn&&t.nativeDraggable&&(R.draggable=!0),t._triggerDragStart(i,n),me({sortable:t,name:"choose",originalEvent:i}),xe(R,r.chosenClass,!0)},r.ignore.split(",").forEach(function(w){jn(R,w.trim(),ni)}),Q(o,"dragover",qe),Q(o,"mousemove",qe),Q(o,"touchmove",qe),r.supportPointer?(Q(o,"pointerup",t._onDrop),!this.nativeDraggable&&Q(o,"pointercancel",t._onDrop)):(Q(o,"mouseup",t._onDrop),Q(o,"touchend",t._onDrop),Q(o,"touchcancel",t._onDrop)),tn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,R.draggable=!0),be("delayStart",this,{evt:i}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(mt||je))){if(U.eventCanceled){this._onDrop();return}r.supportPointer?(Q(o,"pointerup",t._disableDelayedDrag),Q(o,"pointercancel",t._disableDelayedDrag)):(Q(o,"mouseup",t._disableDelayedDrag),Q(o,"touchend",t._disableDelayedDrag),Q(o,"touchcancel",t._disableDelayedDrag)),Q(o,"mousemove",t._delayedDragTouchMoveHandler),Q(o,"touchmove",t._delayedDragTouchMoveHandler),r.supportPointer&&Q(o,"pointermove",t._delayedDragTouchMoveHandler),t._dragStartTimer=setTimeout(u,r.delay)}else u()}},_delayedDragTouchMoveHandler:function(i){var n=i.touches?i.touches[0]:i;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){R&&ni(R),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var i=this.el.ownerDocument;K(i,"mouseup",this._disableDelayedDrag),K(i,"touchend",this._disableDelayedDrag),K(i,"touchcancel",this._disableDelayedDrag),K(i,"pointerup",this._disableDelayedDrag),K(i,"pointercancel",this._disableDelayedDrag),K(i,"mousemove",this._delayedDragTouchMoveHandler),K(i,"touchmove",this._delayedDragTouchMoveHandler),K(i,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(i,n){n=n||i.pointerType=="touch"&&i,!this.nativeDraggable||n?this.options.supportPointer?Q(document,"pointermove",this._onTouchMove):n?Q(document,"touchmove",this._onTouchMove):Q(document,"mousemove",this._onTouchMove):(Q(R,"dragend",this),Q(ie,"dragstart",this._onDragStart));try{document.selection?At(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(a){}},_dragStarted:function(i,n){if(Je=!1,ie&&R){be("dragStarted",this,{evt:n}),this.nativeDraggable&&Q(document,"dragover",Zr);var a=this.options;!i&&xe(R,a.dragClass,!1),xe(R,a.ghostClass,!0),U.active=this,i&&this._appendGhost(),me({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ke){this._lastX=ke.clientX,this._lastY=ke.clientY,qn();for(var i=document.elementFromPoint(ke.clientX,ke.clientY),n=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(ke.clientX,ke.clientY),i!==n);)n=i;if(R.parentNode[ye]._isOutsideThisEl(i),n)do{if(n[ye]){var a=void 0;if(a=n[ye]._onDragOver({clientX:ke.clientX,clientY:ke.clientY,target:i,rootEl:n}),a&&!this.options.dragoverBubble)break}i=n}while(n=Ln(n));$n()}},_onTouchMove:function(i){if(Be){var n=this.options,a=n.fallbackTolerance,t=n.fallbackOffset,s=i.touches?i.touches[0]:i,r=Y&&tt(Y,!0),o=Y&&r&&r.a,u=Y&&r&&r.d,f=wt&&de&&rn(de),w=(s.clientX-Be.clientX+t.x)/(o||1)+(f?f[0]-ii[0]:0)/(o||1),b=(s.clientY-Be.clientY+t.y)/(u||1)+(f?f[1]-ii[1]:0)/(u||1);if(!U.active&&!Je){if(a&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<a)return;this._onDragStart(i,!0)}if(Y){r?(r.e+=w-(ei||0),r.f+=b-(ti||0)):r={a:1,b:0,c:0,d:1,e:w,f:b};var m="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");q(Y,"webkitTransform",m),q(Y,"mozTransform",m),q(Y,"msTransform",m),q(Y,"transform",m),ei=w,ti=b,ke=s}i.cancelable&&i.preventDefault()}},_appendGhost:function(){if(!Y){var i=this.options.fallbackOnBody?document.body:ie,n=ce(R,!0,wt,!0,i),a=this.options;if(wt){for(de=i;q(de,"position")==="static"&&q(de,"transform")==="none"&&de!==document;)de=de.parentNode;de!==document.body&&de!==document.documentElement?(de===document&&(de=De()),n.top+=de.scrollTop,n.left+=de.scrollLeft):de=De(),ii=rn(de)}Y=R.cloneNode(!0),xe(Y,a.ghostClass,!1),xe(Y,a.fallbackClass,!0),xe(Y,a.dragClass,!0),q(Y,"transition",""),q(Y,"transform",""),q(Y,"box-sizing","border-box"),q(Y,"margin",0),q(Y,"top",n.top),q(Y,"left",n.left),q(Y,"width",n.width),q(Y,"height",n.height),q(Y,"opacity","0.8"),q(Y,"position",wt?"absolute":"fixed"),q(Y,"zIndex","100000"),q(Y,"pointerEvents","none"),U.ghost=Y,i.appendChild(Y),q(Y,"transform-origin",an/parseInt(Y.style.width)*100+"% "+on/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(i,n){var a=this,t=i.dataTransfer,s=a.options;if(be("dragStart",this,{evt:i}),U.eventCanceled){this._onDrop();return}be("setupClone",this),U.eventCanceled||(se=Hn(R),se.removeAttribute("id"),se.draggable=!1,se.style["will-change"]="",this._hideClone(),xe(se,this.options.chosenClass,!1),U.clone=se),a.cloneId=At(function(){be("clone",a),!U.eventCanceled&&(a.options.removeCloneOnHide||ie.insertBefore(se,R),a._hideClone(),me({sortable:a,name:"clone"}))}),!n&&xe(R,s.dragClass,!0),n?(Rt=!0,a._loopId=setInterval(a._emulateDragOver,50)):(K(document,"mouseup",a._onDrop),K(document,"touchend",a._onDrop),K(document,"touchcancel",a._onDrop),t&&(t.effectAllowed="move",s.setData&&s.setData.call(a,t,R)),Q(document,"drop",a),q(R,"transform","translateZ(0)")),Je=!0,a._dragStartId=At(a._dragStarted.bind(a,n,i)),Q(document,"selectstart",a),at=!0,window.getSelection().removeAllRanges(),ct&&q(document.body,"user-select","none")},_onDragOver:function(i){var n=this.el,a=i.target,t,s,r,o=this.options,u=o.group,f=U.active,w=bt===u,b=o.sort,m=ue||f,p,g=this,c=!1;if(fi)return;function v(I,z){be(I,g,Oe({evt:i,isOwner:w,axis:p?"vertical":"horizontal",revert:r,dragRect:t,targetRect:s,canSort:b,fromSortable:m,target:a,completed:l,onMove:function(B,N){return xt(ie,n,R,t,B,ce(B),i,N)},changed:d},z))}function h(){v("dragOverAnimationCapture"),g.captureAnimationState(),g!==m&&m.captureAnimationState()}function l(I){return v("dragOverCompleted",{insertion:I}),I&&(w?f._hideClone():f._showClone(g),g!==m&&(xe(R,ue?ue.options.ghostClass:f.options.ghostClass,!1),xe(R,o.ghostClass,!0)),ue!==g&&g!==U.active?ue=g:g===U.active&&ue&&(ue=null),m===g&&(g._ignoreWhileAnimating=a),g.animateAll(function(){v("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(a===R&&!R.animated||a===n&&!a.animated)&&(Qe=null),!o.dragoverBubble&&!i.rootEl&&a!==document&&(R.parentNode[ye]._isOutsideThisEl(i.target),!I&&qe(i)),!o.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),c=!0}function d(){Se=_e(R),Re=_e(R,o.draggable),me({sortable:g,name:"change",toEl:n,newIndex:Se,newDraggableIndex:Re,originalEvent:i})}if(i.preventDefault!==void 0&&i.cancelable&&i.preventDefault(),a=Te(a,o.draggable,n,!0),v("dragOver"),U.eventCanceled)return c;if(R.contains(i.target)||a.animated&&a.animatingX&&a.animatingY||g._ignoreWhileAnimating===a)return l(!1);if(Rt=!1,f&&!o.disabled&&(w?b||(r=ae!==ie):ue===this||(this.lastPutMode=bt.checkPull(this,f,R,i))&&u.checkPut(this,f,R,i))){if(p=this._getDirection(i,a)==="vertical",t=ce(R),v("dragOverValid"),U.eventCanceled)return c;if(r)return ae=ie,h(),this._hideClone(),v("revert"),U.eventCanceled||(Ue?ie.insertBefore(R,Ue):ie.appendChild(R)),l(!0);var x=Ti(n,o.draggable);if(!x||na(i,p,this)&&!x.animated){if(x===R)return l(!1);if(x&&n===i.target&&(a=x),a&&(s=ce(a)),xt(ie,n,R,t,a,s,i,!!a)!==!1)return h(),x&&x.nextSibling?n.insertBefore(R,x.nextSibling):n.appendChild(R),ae=n,d(),l(!0)}else if(x&&ia(i,p,this)){var _=it(n,0,o,!0);if(_===R)return l(!1);if(a=_,s=ce(a),xt(ie,n,R,t,a,s,i,!1)!==!1)return h(),n.insertBefore(R,_),ae=n,d(),l(!0)}else if(a.parentNode===n){s=ce(a);var k=0,y,C=R.parentNode!==n,S=!Qr(R.animated&&R.toRect||t,a.animated&&a.toRect||s,p),T=p?"top":"left",E=sn(a,"top","top")||sn(R,"top","top"),A=E?E.scrollTop:void 0;Qe!==a&&(y=s[T],ht=!1,yt=!S&&o.invertSwap||C),k=sa(i,a,s,p,S?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,yt,Qe===a);var P;if(k!==0){var D=_e(R);do D-=k,P=ae.children[D];while(P&&(q(P,"display")==="none"||P===Y))}if(k===0||P===a)return l(!1);Qe=a,dt=k;var O=a.nextElementSibling,M=!1;M=k===1;var L=xt(ie,n,R,t,a,s,i,M);if(L!==!1)return(L===1||L===-1)&&(M=L===1),fi=!0,setTimeout(ta,30),h(),M&&!O?n.appendChild(R):a.parentNode.insertBefore(R,M?O:a),E&&Nn(E,0,A-E.scrollTop),ae=R.parentNode,y!==void 0&&!yt&&(It=Math.abs(y-ce(a)[T])),d(),l(!0)}if(n.contains(R))return l(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){K(document,"mousemove",this._onTouchMove),K(document,"touchmove",this._onTouchMove),K(document,"pointermove",this._onTouchMove),K(document,"dragover",qe),K(document,"mousemove",qe),K(document,"touchmove",qe)},_offUpEvents:function(){var i=this.el.ownerDocument;K(i,"mouseup",this._onDrop),K(i,"touchend",this._onDrop),K(i,"pointerup",this._onDrop),K(i,"pointercancel",this._onDrop),K(i,"touchcancel",this._onDrop),K(document,"selectstart",this)},_onDrop:function(i){var n=this.el,a=this.options;if(Se=_e(R),Re=_e(R,a.draggable),be("drop",this,{evt:i}),ae=R&&R.parentNode,Se=_e(R),Re=_e(R,a.draggable),U.eventCanceled){this._nulling();return}Je=!1,yt=!1,ht=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),di(this.cloneId),di(this._dragStartId),this.nativeDraggable&&(K(document,"drop",this),K(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ct&&q(document.body,"user-select",""),q(R,"transform",""),i&&(at&&(i.cancelable&&i.preventDefault(),!a.dropBubble&&i.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(ie===ae||ue&&ue.lastPutMode!=="clone")&&se&&se.parentNode&&se.parentNode.removeChild(se),R&&(this.nativeDraggable&&K(R,"dragend",this),ni(R),R.style["will-change"]="",at&&!Je&&xe(R,ue?ue.options.ghostClass:this.options.ghostClass,!1),xe(R,this.options.chosenClass,!1),me({sortable:this,name:"unchoose",toEl:ae,newIndex:null,newDraggableIndex:null,originalEvent:i}),ie!==ae?(Se>=0&&(me({rootEl:ae,name:"add",toEl:ae,fromEl:ie,originalEvent:i}),me({sortable:this,name:"remove",toEl:ae,originalEvent:i}),me({rootEl:ae,name:"sort",toEl:ae,fromEl:ie,originalEvent:i}),me({sortable:this,name:"sort",toEl:ae,originalEvent:i})),ue&&ue.save()):Se!==Ze&&Se>=0&&(me({sortable:this,name:"update",toEl:ae,originalEvent:i}),me({sortable:this,name:"sort",toEl:ae,originalEvent:i})),U.active&&((Se==null||Se===-1)&&(Se=Ze,Re=ft),me({sortable:this,name:"end",toEl:ae,originalEvent:i}),this.save()))),this._nulling()},_nulling:function(){be("nulling",this),ie=R=ae=Y=Ue=se=Et=Ne=Be=ke=at=Se=Re=Ze=ft=Qe=dt=ue=bt=U.dragged=U.ghost=U.clone=U.active=null,Ht.forEach(function(i){i.checked=!0}),Ht.length=ei=ti=0},handleEvent:function(i){switch(i.type){case"drop":case"dragend":this._onDrop(i);break;case"dragenter":case"dragover":R&&(this._onDragOver(i),ea(i));break;case"selectstart":i.preventDefault();break}},toArray:function(){for(var i=[],n,a=this.el.children,t=0,s=a.length,r=this.options;t<s;t++)n=a[t],Te(n,r.draggable,this.el,!1)&&i.push(n.getAttribute(r.dataIdAttr)||aa(n));return i},sort:function(i,n){var a={},t=this.el;this.toArray().forEach(function(s,r){var o=t.children[r];Te(o,this.options.draggable,t,!1)&&(a[s]=o)},this),n&&this.captureAnimationState(),i.forEach(function(s){a[s]&&(t.removeChild(a[s]),t.appendChild(a[s]))}),n&&this.animateAll()},save:function(){var i=this.options.store;i&&i.set&&i.set(this)},closest:function(i,n){return Te(i,n||this.options.draggable,this.el,!1)},option:function(i,n){var a=this.options;if(n===void 0)return a[i];var t=gt.modifyOption(this,i,n);typeof t<"u"?a[i]=t:a[i]=n,i==="group"&&Bn(a)},destroy:function(){be("destroy",this);var i=this.el;i[ye]=null,K(i,"mousedown",this._onTapStart),K(i,"touchstart",this._onTapStart),K(i,"pointerdown",this._onTapStart),this.nativeDraggable&&(K(i,"dragover",this),K(i,"dragenter",this)),Array.prototype.forEach.call(i.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Nt.splice(Nt.indexOf(this.el),1),this.el=i=null},_hideClone:function(){if(!Ne){if(be("hideClone",this),U.eventCanceled)return;q(se,"display","none"),this.options.removeCloneOnHide&&se.parentNode&&se.parentNode.removeChild(se),Ne=!0}},_showClone:function(i){if(i.lastPutMode!=="clone"){this._hideClone();return}if(Ne){if(be("showClone",this),U.eventCanceled)return;R.parentNode==ie&&!this.options.group.revertClone?ie.insertBefore(se,R):Ue?ie.insertBefore(se,Ue):ie.appendChild(se),this.options.group.revertClone&&this.animate(R,se),q(se,"display",""),Ne=!1}}};function ea(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function xt(e,i,n,a,t,s,r,o){var u,f=e[ye],w=f.options.onMove,b;return window.CustomEvent&&!je&&!mt?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=i,u.from=e,u.dragged=n,u.draggedRect=a,u.related=t||i,u.relatedRect=s||ce(i),u.willInsertAfter=o,u.originalEvent=r,e.dispatchEvent(u),w&&(b=w.call(f,u,r)),b}function ni(e){e.draggable=!1}function ta(){fi=!1}function ia(e,i,n){var a=ce(it(n.el,0,n.options,!0)),t=Fn(n.el,n.options,Y),s=10;return i?e.clientX<t.left-s||e.clientY<a.top&&e.clientX<a.right:e.clientY<t.top-s||e.clientY<a.bottom&&e.clientX<a.left}function na(e,i,n){var a=ce(Ti(n.el,n.options.draggable)),t=Fn(n.el,n.options,Y),s=10;return i?e.clientX>t.right+s||e.clientY>a.bottom&&e.clientX>a.left:e.clientY>t.bottom+s||e.clientX>a.right&&e.clientY>a.top}function sa(e,i,n,a,t,s,r,o){var u=a?e.clientY:e.clientX,f=a?n.height:n.width,w=a?n.top:n.left,b=a?n.bottom:n.right,m=!1;if(!r){if(o&&It<f*t){if(!ht&&(dt===1?u>w+f*s/2:u<b-f*s/2)&&(ht=!0),ht)m=!0;else if(dt===1?u<w+It:u>b-It)return-dt}else if(u>w+f*(1-t)/2&&u<b-f*(1-t)/2)return ra(i)}return m=m||r,m&&(u<w+f*s/2||u>b-f*s/2)?u>w+f/2?1:-1:0}function ra(e){return _e(R)<_e(e)?1:-1}function aa(e){for(var i=e.tagName+e.className+e.src+e.href+e.textContent,n=i.length,a=0;n--;)a+=i.charCodeAt(n);return a.toString(36)}function oa(e){Ht.length=0;for(var i=e.getElementsByTagName("input"),n=i.length;n--;){var a=i[n];a.checked&&Ht.push(a)}}function At(e){return setTimeout(e,0)}function di(e){return clearTimeout(e)}Ut&&Q(document,"touchmove",function(e){(U.active||Je)&&e.cancelable&&e.preventDefault()});U.utils={on:Q,off:K,css:q,find:jn,is:function(i,n){return!!Te(i,n,i,!1)},extend:qr,throttle:Rn,closest:Te,toggleClass:xe,clone:Hn,index:_e,nextTick:At,cancelNextTick:di,detectDirection:Wn,getChild:it,expando:ye};U.get=function(e){return e[ye]};U.mount=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];i[0].constructor===Array&&(i=i[0]),i.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(U.utils=Oe(Oe({},U.utils),a.utils)),gt.mount(a)})};U.create=function(e,i){return new U(e,i)};U.version=Wr;var le=[],ot,hi,pi=!1,si,ri,Ft,lt;function la(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this))}return e.prototype={dragStarted:function(n){var a=n.originalEvent;this.sortable.nativeDraggable?Q(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Q(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Q(document,"touchmove",this._handleFallbackAutoScroll):Q(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var a=n.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):(K(document,"pointermove",this._handleFallbackAutoScroll),K(document,"touchmove",this._handleFallbackAutoScroll),K(document,"mousemove",this._handleFallbackAutoScroll)),cn(),Pt(),$r()},nulling:function(){Ft=hi=ot=pi=lt=si=ri=null,le.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,a){var t=this,s=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,o=document.elementFromPoint(s,r);if(Ft=n,a||this.options.forceAutoScrollFallback||mt||je||ct){ai(n,this.options,o,a);var u=He(o,!0);pi&&(!lt||s!==si||r!==ri)&&(lt&&cn(),lt=setInterval(function(){var f=He(document.elementFromPoint(s,r),!0);f!==u&&(u=f,Pt()),ai(n,t.options,f,a)},10),si=s,ri=r)}else{if(!this.options.bubbleScroll||He(o,!0)===De()){Pt();return}ai(n,this.options,He(o,!1),!1)}}},Le(e,{pluginName:"scroll",initializeByDefault:!0})}function Pt(){le.forEach(function(e){clearInterval(e.pid)}),le=[]}function cn(){clearInterval(lt)}var ai=Rn(function(e,i,n,a){if(i.scroll){var t=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,r=i.scrollSensitivity,o=i.scrollSpeed,u=De(),f=!1,w;hi!==n&&(hi=n,Pt(),ot=i.scroll,w=i.scrollFn,ot===!0&&(ot=He(n,!0)));var b=0,m=ot;do{var p=m,g=ce(p),c=g.top,v=g.bottom,h=g.left,l=g.right,d=g.width,x=g.height,_=void 0,k=void 0,y=p.scrollWidth,C=p.scrollHeight,S=q(p),T=p.scrollLeft,E=p.scrollTop;p===u?(_=d<y&&(S.overflowX==="auto"||S.overflowX==="scroll"||S.overflowX==="visible"),k=x<C&&(S.overflowY==="auto"||S.overflowY==="scroll"||S.overflowY==="visible")):(_=d<y&&(S.overflowX==="auto"||S.overflowX==="scroll"),k=x<C&&(S.overflowY==="auto"||S.overflowY==="scroll"));var A=_&&(Math.abs(l-t)<=r&&T+d<y)-(Math.abs(h-t)<=r&&!!T),P=k&&(Math.abs(v-s)<=r&&E+x<C)-(Math.abs(c-s)<=r&&!!E);if(!le[b])for(var D=0;D<=b;D++)le[D]||(le[D]={});(le[b].vx!=A||le[b].vy!=P||le[b].el!==p)&&(le[b].el=p,le[b].vx=A,le[b].vy=P,clearInterval(le[b].pid),(A!=0||P!=0)&&(f=!0,le[b].pid=setInterval((function(){a&&this.layer===0&&U.active._onTouchMove(Ft);var O=le[this.layer].vy?le[this.layer].vy*o:0,M=le[this.layer].vx?le[this.layer].vx*o:0;typeof w=="function"&&w.call(U.dragged.parentNode[ye],M,O,e,Ft,le[this.layer].el)!=="continue"||Nn(le[this.layer].el,M,O)}).bind({layer:b}),24))),b++}while(i.bubbleScroll&&m!==u&&(m=He(m,!1)));pi=f}},30),Un=function(i){var n=i.originalEvent,a=i.putSortable,t=i.dragEl,s=i.activeSortable,r=i.dispatchSortableEvent,o=i.hideGhostForTarget,u=i.unhideGhostForTarget;if(n){var f=a||s;o();var w=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,b=document.elementFromPoint(w.clientX,w.clientY);u(),f&&!f.el.contains(b)&&(r("spill"),this.onSpill({dragEl:t,putSortable:a}))}};function Ei(){}Ei.prototype={startIndex:null,dragStart:function(i){var n=i.oldDraggableIndex;this.startIndex=n},onSpill:function(i){var n=i.dragEl,a=i.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var t=it(this.sortable.el,this.startIndex,this.options);t?this.sortable.el.insertBefore(n,t):this.sortable.el.appendChild(n),this.sortable.animateAll(),a&&a.animateAll()},drop:Un};Le(Ei,{pluginName:"revertOnSpill"});function Ii(){}Ii.prototype={onSpill:function(i){var n=i.dragEl,a=i.putSortable,t=a||this.sortable;t.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),t.animateAll()},drop:Un};Le(Ii,{pluginName:"removeOnSpill"});U.mount(new la);U.mount(Ii,Ei);const Dt={SUGGESTION:"suggestion",SORTABLE:"sortable"},ca='<svg class="glyph" width="15" height="14" viewBox="0 0 15 14" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h15v2H0V0zm0 6h15v2H0V6zm0 6h15v2H0v-2z" fill="#000" fill-rule="evenodd"/></svg>',ua='<svg class="glyph" width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path fill="#000" d="M14.213 1.485L12.8.071 7.142 5.728 1.485.07.071 1.485l5.657 5.657L.07 12.8l1.414 1.414 5.657-5.657 5.657 5.657 1.414-1.414-5.657-5.657z" fill-rule="evenodd"/></svg>',un=e=>Ys(e,{modifierClasses:"-username",metadataFormat:Vs.USERNAME}),oi=(e,i,n)=>i===Dt.SORTABLE?['<div class="person-block team-member js-team-member" data-person-id="'.concat(e.id,'">'),'<div class="handle js-handle">',"".concat(ca),"</div>","".concat(un(e)),'<input type="hidden" name="teamMemberPersonIds" value="'.concat(e.id,'"/>'),'<div class="actions">','<div class="action -remove">','<button type="button" data-js-trigger="remove">','<span class="label _sr-only">Remove</span>',"".concat(ua),"</button>","</div>","</div>","</div>"].join("\n"):['<div class="suggestion person-block'.concat(n?" -disabled":"",'" data-person-id="').concat(e.id,'">'),"".concat(un(e)),"</div>"].join("\n");_i.registerPlugin(Ci,Bs);const mi="team-member-manager",$e={DISABLED:"-disabled",EXPANDED:"-expanded",TEAM_MEMBER:"team-member",TEAM_MEMBER_HIGHLIGHT:"-highlight",TEAM_MEMBER_HIGHLIGHT_TRANSITION_OUT:"-highlight-transition-out-active",MEMBERLIST_OVERFLOW:"-overflow"},li={PERSON_ID:"person-id"},fa={CHANGE:"change",DISABLE:"disable",ENABLE:"enable"},da={searchInputSelector:"#person-search",memberListData:[],endpoint:"foo?q="};class ha extends zs{constructor(n,a={}){super();ne(this,"_populateMemberList",n=>{const a=n.map(t=>oi(t,Dt.SORTABLE)).join("");this.memberList.insertAdjacentHTML("beforeend",a)});ne(this,"updateMemberList",n=>{const a=this.getSortedMembers();!!a.length?(this.memberList.removeAttribute("hidden"),this.emptyMemberListFallback.setAttribute("hidden","")):(this.memberList.setAttribute("hidden",""),this.emptyMemberListFallback.removeAttribute("hidden"));const s=this.membersScroller.scrollHeight>this.memberList.offsetHeight;this.membersScroller.classList.toggle("-has-no".concat($e.MEMBERLIST_OVERFLOW),!s),this.emit(fa.CHANGE,a)});ne(this,"getSortedMembers",()=>this.memberListSortableInstance.toArray().map(n=>Number(n)));ne(this,"isTeamMemberById",n=>this.getSortedMembers().indexOf(n)>-1);ne(this,"_scrollMemberIntoView",function(n){const t=function(s,r,o){return r<o?r/o*s:s};return new Promise(s=>{const r=this.membersScroller.scrollHeight-this.membersScroller.offsetHeight,o=Math.min(n.offsetTop-this.membersScroller.offsetTop,r),u=Math.abs(this.membersScroller.scrollTop-o),f=t(.5,u,this.membersScroller.offsetHeight);f===0?s():this._timeline.clear().eventCallback("onComplete",null).to(this.membersScroller,f,{scrollTo:{y:o,autoKill:!1},ease:Ye.easeOut,onComplete:()=>{s(this._timeline)}})})});ne(this,"_highlightNewMember",n=>{n.classList.add($e.TEAM_MEMBER_HIGHLIGHT,$e.TEAM_MEMBER_HIGHLIGHT_TRANSITION_OUT);const{onTransitionEnd:s}=$s({duration:2e3,propertyName:"backgroundColor",target:n});this._scrollMemberIntoView(n).then(()=>{n.offsetWidth,n.classList.remove($e.TEAM_MEMBER_HIGHLIGHT),s.then(()=>{n.classList.remove($e.TEAM_MEMBER_HIGHLIGHT_TRANSITION_OUT)})})});ne(this,"addMember",n=>{if(this.isTeamMemberById(n.id))return;const a=oi(n,Dt.SORTABLE);this.memberList.insertAdjacentHTML("beforeend",a),this._highlightNewMember(this.memberList.lastChild),this.updateMemberList()});ne(this,"_getPersonIdFromElement",n=>Number(n.dataset["".concat(Xs(li.PERSON_ID))]));ne(this,"_onMemberListRemoveTriggerClick",n=>{if(!Array.from(this.memberList.querySelectorAll('[data-js-trigger="remove"]')).find(u=>u===n.target||u.contains(n.target)))return;n.preventDefault();const r=n.target.closest(".js-".concat($e.TEAM_MEMBER)),o=this._getPersonIdFromElement(r);this.removeTeamMemberById(o)});ne(this,"removeTeamMemberById",n=>{const a=this.personAutocompleteInstance.typeahead.menu._getSelectables().get().find(t=>this._getPersonIdFromElement(t)===n);this.personAutocompleteInstance.typeahead.menu.enableSelectable($(a)),this.memberList.querySelector("[data-".concat(li.PERSON_ID,'="').concat(n,'"]')).remove(),this.updateMemberList()});ne(this,"_onInputInitialFocus",n=>{this.el.addEventListener(qs,a=>{a.target===this.el.querySelector(":scope > .js-frame")&&a.propertyName==="padding-top"&&this.updateMemberList()},{once:!0}),this.el.classList.add($e.EXPANDED)});ne(this,"_onTypeaheadAutocomplete",(n,a,t)=>{this.addMember(a)});this.$el=n,this.el=n[0],this.options=yn({},da,a,bn(this.$el,mi)),this._timeline=new pt({autoRemoveChildren:!0}),this.membersScroller=this.el.querySelector(".js-members-scrollable"),this.memberList=this.el.querySelector("[data-js-sortable]"),this.emptyMemberListFallback=this.el.querySelector(".js-empty-member-list-fallback"),this._populateMemberList(this.options.memberListData),this.memberListSortableInstance=new U(this.memberList,{dataIdAttr:"data-".concat(li.PERSON_ID),handle:".js-handle",direction:"vertical",ghostClass:"-ghost",chosenClass:"-chosen",dragClass:"-drag",onSort:this.updateMemberList}),this.updateMemberList(),this.memberList.addEventListener("click",this._onMemberListRemoveTriggerClick),this.searchInput=this.el.querySelector(this.options.searchInputSelector),this.spinner=this.el.querySelector("[data-js-spinner]"),this.inputResetTrigger=this.el.querySelector('[data-js-trigger="reset"]'),this.personAutocompleteInstance=new Us(this.searchInput,{spinner:this.spinner,inputResetTrigger:this.inputResetTrigger,endpoint:this.options.endpoint,templates:{suggestion:t=>oi(t,Dt.SUGGESTION,this.isTeamMemberById(t.id))}}),this.searchInput.addEventListener("focus",this._onInputInitialFocus,{once:!0}),this.$searchInput=$(this.searchInput),this.$searchInput.on("typeahead:autocomplete typeahead:select",this._onTypeaheadAutocomplete)}}function pa(e){const i=document.querySelector(".js-change-password-form");if(!i)return;const n=i.querySelector('button[type="submit"]');$(n).data("ajax-data",()=>new URLSearchParams(new FormData(i)).toString()).on("ajax-success",(a,t,s,r)=>{t.messages&&e.showMessages(t.result?"success":"error",t.messages),t.errorCodes.length&&t.errorCodes.includes("update.user.password.successful")&&i.reset()})}class ma{constructor(i,n){const a=i.querySelector('[name="emailAddress"]');let t=a.dataset.originalValue;delete a.dataset.originalValue,Object.defineProperties(this,{el:{value:i},input:{value:a},value:{get:()=>this.input.value},originalValue:{get:()=>t,set:s=>{t=s}}})}hasValueChanged(){return this.value!==this.originalValue}}_i.registerPlugin(Ci);const Yn={BEGINREMOVAL:"begindeletion"};class Vn{constructor(i,n={}){ne(this,"_onPanelTriggerClick",i=>{i.preventDefault(),this.toggle()});ne(this,"_setExpanded",(i=!0)=>{this.panelTrigger.setAttribute("aria-expanded",i)});ne(this,"_onSubmit",i=>this.isBusy?(i.preventDefault(),!1):(this.submit(),i.preventDefault(),!1));ne(this,"_doAjaxSubmission",i=>{const n={url:this.form.action,type:this.form.method,data:i,traditional:!0};return this._doAjaxAsDeferred(n)});ne(this,"submit",()=>{if(this.isBusy)return;this._submitActivityButtonInstance.toggle(!0);const i=new URLSearchParams(new FormData(this.form)).toString();this._doAjaxSubmission(i).fail((n,a,t)=>{this._submitActivityButtonInstance.toggle(!1)}).done((n,a,t)=>{t.status===204?this.remove():n&&n.result?this.remove():this._submitActivityButtonInstance.toggle(!1)}).always((n,a,t)=>{})});Object.defineProperties(this,{el:{value:i},id:{get:()=>this.el.id},panelTrigger:{get:()=>this.el.querySelector("button[aria-controls][aria-expanded]")},panelBody:{get:()=>document.getElementById(this.panelTrigger.getAttribute("aria-controls"))},isExpanded:{get:()=>this.panelTrigger.getAttribute("aria-expanded")==="true"},submitTrigger:{get:()=>this.form.querySelector('button[type="submit"]')},isBusy:{get:()=>this._submitActivityButtonInstance.isBusy},form:{get:()=>this.panelBody}}),this.panelTrigger.addEventListener("click",this._onPanelTriggerClick),this._submitActivityButtonInstance=new Ks(this.submitTrigger,{}),this.form.addEventListener("submit",this._onSubmit)}toggle(){this._setExpanded(!this.isExpanded),this.isExpanded&&this._open()}_open(){return this.panelBody.tabIndex=0,this.panelBody.focus({preventScroll:!0}),this.panelBody.addEventListener("blur",i=>{i.target.removeAttribute("tabIndex")},{once:!0}),new Promise(i=>{new pt().from(this.panelBody,et.IN,{height:0,ease:Ye.easeOut,clearProps:"height",onComplete:()=>{Qs(this.panelBody,{block:"center"}),i()}},0).from(this.panelBody,et.IN_LONG,{opacity:0,ease:Ye.easeOut,clearProps:"all"},.125)})}remove(){const i=new Promise(n=>{const a=et.OUT,t=a*(1/3),s=a-t;new pt().to(this.el,a,{scale:1.5,ease:Ws.easeIn.config(1)},0).to(this.el,t,{opacity:0,ease:Ye.easeOut},s).eventCallback("onComplete",()=>{n(),this.destroy()})});return Ae(Yn.BEGINREMOVAL,this.el,{onComplete:i}),i}destroy(){this._submitActivityButtonInstance.destroy(),this.el.remove()}}Object.assign(Vn.prototype,Os);_i.registerPlugin(Ci);const va="external-connection-list",ba={listitemsSelector:".listitem"};class ya{constructor(i,n={}){ne(this,"_onExternalConnectionBegindeletion",i=>{const n=i.currentTarget;n.style.height="".concat(n.getBoundingClientRect().height,"px"),i.detail.onComplete.then(()=>{this.externalConnectionInstances.size<=1&&this._showEmptyFrame(),new pt().to(n,et.OUT_SHORT,{height:0,marginTop:0,ease:Ye.easeOut,onComplete:()=>{this._removeExternalConnectionInstance(n)}})}).catch(()=>{})});const a={...ba,...n};Object.defineProperties(this,{el:{value:i}}),this.externalConnectionInstances=new Map,Array.from(this.el.querySelectorAll(":scope > ".concat(a.listitemsSelector))).forEach(t=>{const s=t.querySelector(".js-external-connection"),r=new Vn(s);this.externalConnectionInstances.set(t,r),t.addEventListener(Yn.BEGINREMOVAL,this._onExternalConnectionBegindeletion)})}_removeExternalConnectionInstance(i){this.externalConnectionInstances.delete(i),i.remove()}_showEmptyFrame(){const i=this.el.querySelector(".js-listitem-empty");i.removeAttribute("hidden"),new pt().from(i,et.IN,{height:0,ease:Ye.easeOut,clearProps:"all"},0).from(i.children,et.IN_LONG,{opacity:0,ease:Ye.easeOut,clearProps:"all"},.125)}}function wa(e){const i=document.querySelector(".js-".concat(va));i&&new ya(i)}$(function(){if($(".js-update-screen").length){let m=function(g){$("#stores .js-service-brand[data-id="+g+"]").removeClass("-selected"),n.children(".service[data-id="+g+"]").remove(),$("#stores").trigger("ajax-action")},p=function(){var g=$(".js-favorite-services-locale"),c=$(".js-locale-menu"),v=c.find(".js-locale-link"),h=c.find(".js-close-localemenu"),l=g.data("locale"),d=!1,x=$(".js-brands-by-locale");x&&x.append(c);function _(){var S=g.position(),T=0,E=S.top+g.height()+T;g.addClass("-open"),x&&x.addClass("-localeopen"),c.css({top:E}).show(),d=!0,$(window).on("click.localemenu",function(A){var P=$(A.target).is(".locale-menu *, .locale-menu"),D=$(A.target).is(".locale-selector *, .locale-selector");!P&&!D&&k()})}function k(){g.removeClass("-open"),x&&x.removeClass("-localeopen"),c.hide(),d=!1,$(window).off("click.localemenu")}g.bind("click",function(S){S.preventDefault(),d?k():_()}),h.bind("click",function(S){S.preventDefault(),d&&k()}),v.on("click",function(S){S.preventDefault();var T=$(this),E=T.data("locale"),A=T.find("img").attr("src"),P=T.data("name");if(k(),E!==l){g.find(".js-locale-title").text(P);var D=g.find(".js-flag");D.attr("src",A),v.parent().removeClass("-selected"),T.parent().addClass("-selected"),$.cookie("availabilityLocale",E,{expires:365,path:"/"}),l=E,$(".js-brands-list").removeClass("-selected").filter("[data-locale="+E+"]").addClass("-selected")}});var y=$.cookie("availabilityLocale");if(y&&y!==l){var C=v.filter("[data-locale="+y+"]");C&&C.trigger("click")}};var e=document.documentElement.classList.contains("context-client-app"),i=$("#user-update");e||(bxd.initUsernameChecker(i.find("input[name='username']"),i.find(".check-container")),i.on("ajax-success",function(g,c,v,h){c.result&&c.usernameChanged&&window.location.reload(!0)})),Gs(window.bxd);const o=i.find(".js-".concat(mi));if(o.length){const g=new ha(o,{});o.data(mi,g),i.protectUnsavedChanges({reset:!0})}pa(window.bxd),wa();const u=i[0].querySelector(".js-email-address-field"),f=u&&new ma(u),w=i[0].querySelector('input[name="password"]'),b=i[0].querySelector('input[name="authenticationCode"]');i.on("submit",function(g){if(f&&w.value===""&&f.hasValueChanged()){g.stopImmediatePropagation(),g.preventDefault();const c=new xn({description:"Please enter your password to change your email&nbsp;address.",fields:[{type:"totp",options:{output:!!b}}],actions:[{label:"Save Changes"}]},window.bxd);c.status.then(({password:v,authenticationCode:h})=>{c.hide(),w.value=v,b&&(b.value=h),i.trigger("submit")},()=>{})}}).on("ajax-success",function(g,c,v,h){c.result&&(f&&(f.originalValue=f.value),person&&(person.showAdultContent=!!c.showAdultContent),c.facebookPage&&$("input[name='facebookPage']").val(c.facebookPage),c.instagramPage&&$("input[name='instagramPage']").val(c.instagramPage),c.tiktokPage&&$("input[name='tiktokPage']").val(c.tiktokPage),c.imdbPage&&$("input[name='imdbPage']").val(c.imdbPage),c.youtubePage&&$("input[name='youtubePage']").val(c.youtubePage),c.blueskyPage&&$("input[name='blueskyPage']").val(c.blueskyPage),c.threadsPage&&$("input[name='threadsPage']").val(c.threadsPage)),i.find(".form-row.-error").removeClass("-error"),c.errorFields&&c.errorFields.forEach(l=>{i.find('input[name="'.concat(l,'"],textarea[name="').concat(l,'"]')).one("keypress",function(d){$(this).closest(".form-row").removeClass("-error")}).closest(".form-row").addClass("-error")})}).on("ajax-complete",function(g){w&&(w.value=""),b&&(b.value=""),i.protectUnsavedChanges({reset:!0})}),$("#connections li.external-service").bind("refresh",function(g){$(this).load(baseURL+"/user/ajax/connections-"+$(this).data("type")+"/",function(){$(this).trigger("reloaded")}),bxd.dismissMessages()}),$(document).on("click","#connections .remove",function(g){g.preventDefault();var c=$(this);c.hasClass("ajax-working")||bxd.dismissMessages(function(){var v=c.data("confirm");if(typeof v>"u"||window.confirm(v.replace(/\\n/g,"\n"))){c.addClass("ajax-working");var h=c.parents("li"),l=c,d=new rr({lines:10,length:4,width:2,radius:3,color:"#fff",speed:1,shadow:!1});$.ajax({url:c.data("action"),data:{__csrf:supermodelCSRF},type:"POST",beforeSend:function(){d.spin(l[0])},success:function(){c.removeClass("ajax-working"),d.stop(),h.trigger("refresh"),$("#connections ."+c.data("detail-container")).trigger("refresh")},error:function(){c.removeClass("ajax-working"),d.stop(),bxd.showMessages("error",["Failed to unlink your account."])}})}})}),$(".js-toggle-list input[type=checkbox]").each(function(){var g=$(this);g.data("ajax-data",function(){var c={};return c[g.attr("name")]=g.is(":checked"),c}),g.bind("ajax-success",function(c,v,h,l){v.messages&&bxd.showMessages(v.result?"success":"error",v.messages);for(var d in v){var x=$(".js-toggle-list input[type=checkbox][name="+d+"]");x.length&&x.prop("checked",v[d])}}),g.bind("ajax-error",function(c,v){bxd.showMessages("error",v)})}).change(function(){$(this).trigger("ajax-action")});var n=$(".js-favorite-services-list"),a=$(".js-favorite-services-panel"),t=$(".js-no-favorite-services");a.hasClass("-empty")||t.hide(),$("#stores").bind("ajax-success",function(g,c,v,h){c.messages&&bxd.showMessages(c.result?"success":"error",c.messages),$("#frm-primary-letterboxd-video-store").val(c.primaryLetterboxdVideoStore),$("#frm-primary-itunes-store").val(c.primaryItunesStore),$("#frm-secondary-itunes-store").val(c.secondaryItunesStore),$("#frm-primary-amazon-store").val(c.primaryAmazonStore),$("#frm-secondary-amazon-store").val(c.secondaryAmazonStore)}).bind("ajax-error",function(g,c){bxd.showMessages("error",c)}).data("ajax-data",function(){var g={};g.serviceIds=[],$("#stores").find("select:not(.js-hmv)").each(function(){g.serviceIds.push($(this).val())}),$("#stores").find("select.js-hmv").each(function(){let v=$(this).val();v==="true"?g.hmv=!0:v==="false"&&(g.hmv=!1)});var c=n.children(".service");return c.length?(c.each(function(){g.serviceIds.push($(this).data("id"))}),a.removeClass("-empty"),t.hide()):(a.addClass("-empty"),t.show()),g}).on("change","select",function(){$("#stores").trigger("ajax-action")}).on("click",".js-service-brand",function(g){if(!$(g.target).hasClass("cataloglink")){g.preventDefault();var c=$(this),v=c.data("id");if(c.hasClass("-selected"))m(v);else{c.addClass("-selected");var h=c.data("name"),l=c.data("icon"),d=c.data("shortname"),x='<p class="service" data-id="'+v+'">';x+='<span class="label"><span class="brand"><img src="'+l+'" width="24" height="24" title="'+h+'" alt="'+h+'" class="js-squircle-mask" /></span>',x+='<span class="title">'+h+" ("+d+')</span></span><a href class="remove js-remove-favorite-service">(Remove)</a></p>';var _=$(x);n.append(_),bxd.layout(_)}$("#stores").trigger("ajax-action")}}),n.on("click",".service",function(g){g.preventDefault();var c=$(this).data("id");$(g.target).hasClass("js-remove-favorite-service")&&($("#stores .js-service-brand[data-id="+c+"]").removeClass("-selected"),n.children(".service[data-id="+c+"]").remove(),$("#stores").trigger("ajax-action"))}),$(".js-favorite-services-locale").length&&p();var s={href:$("a.export-data-link").attr("href")+"#modal",overlayClose:!1,fixed:!0,onComplete:function(){$(".export-data-button").on("click",function(g){g.preventDefault();var c=$(this).attr("href");$("a.export-data-link").colorbox.close(),bxd.showMessages("success","Your export is being prepared. Please leave this window open, your download will begin shortly"),setTimeout(function(){location.href=c},300)})}};renderMobile&&(s.width="100%",s.initialWidth="288px",s.initialHeight="200px",s.transition="fade",s.speed=0),$("a.export-data-link").colorbox(s);var r={href:$(".disable-account-link").data("action-url")+"#modal",fixed:!0,overlayClose:!1,innerWidth:660,onComplete:function(){bxd.layout($("#modal")),$(".disable-account-link").colorbox.resize(),$(".disable-account-button").data("ajax-data",function(){return $("#disable-account-form").serialize()}).bind("ajax-success",function(g,c,v,h){if(c.messages&&bxd.showMessages(c.result?"success":"error",c.messages),c.result){$(this).closest("article").html('<section class="registration-complete body-text -hero"><p>Deactivating your account please wait.</p></section>'),$(".disable-account-link").colorbox.resize();let l=baseURL+"/farewell";c.token&&(l=l+"?hash="+encodeURIComponent(c.token)),setTimeout(function(){location.href=l},2e3)}})}};renderMobile&&(r.width="100%",r.initialWidth="288px",r.initialHeight="200px",r.transition="fade",r.speed=0),$(".disable-account-link").colorbox(r),$("#check .username-edit, #check-locked .username-locked").on("click",function(g){g.preventDefault(),$(".frm-reg-username").trigger("click")}),$(".frm-reg-username").on("click",function(g){var c=$(this);if(c.is(":disabled"))if(c.data("can-enable")&&$("#check .username-edit").length){var v={html:"<div class='modal-legacy signup-modal'><article><h1>Changing your username</h1><p class='body-text -light'>"+c.data("disabled-text")+"</p></article></div>",width:"520px",fixed:!0,overlayClose:!1,onClosed:function(){c.prop("disabled",!1),c.focus(),c.select(),$("#check").html("")}};renderMobile&&(v.width="100%",v.initialWidth="288px",v.initialHeight="200px",v.transition="fade",v.speed=0),$.colorbox(v)}else bxd.showMessages("warning",c.data("disabled-text"),{sticky:!0,messageId:"locked-username",dismissExistingMessages:!0})}),$("#frm-pronoun, #frm-reg-username, #frm-family-name, #frm-given-name").on("change keyup",function(){var g=$("#frm-pronoun").find("option:selected").data("pronoun-possessive"),c=($("#frm-given-name").val()+" "+$("#frm-family-name").val()).trim();c.length===0&&(c=($("#frm-reg-username").val()||person.username).trim()),$("#pronoun-possessive").text(g),$("#pronoun-name").text(c)})}});const xa="view";Promise.all([wn,Si()]).then(([,e])=>{ci(xa)});$(function(){document.body.classList.contains("view")&&(cs(document.body),document.querySelectorAll(".js-".concat(qt)).forEach(e=>{new $t(e)}))});$(function(){var e=$("#frm-watchlist-autocomplete");if(e.length){var i=$("body");i.addClass("my-watchlist").removeClass("wide"),$(".js-watchlist-content").data("num-entries")===0&&i.addClass("empty-watchlist");var n=null;e.autocomplete(e.data("url"),$.extend({},bxd.autocompleteConfig,{width:228})).result(function(s,r,o){$.ajax({url:r.watchlistAction,data:{__csrf:supermodelCSRF},type:"POST",dataType:"json",success:function(u,f,w){u.csrf!==null&&u.csrf!==void 0&&(supermodelCSRF=u.csrf),u.messages&&(bxd.showMessages(u.result?"success":"error",u.messages),$("#frm-watchlist-autocomplete").val(""),u.errorCodes.indexOf("film.added.to.watchlist")>-1&&(n=$.get($(".js-watchlist-content").data("path")).done(function(b,m,p){if(p===n){var g=$(b).find(".js-watchlist-main-content"),c=$(".js-watchlist-main-content");$(".twipsy").remove(),c.replaceWith(g),bxd.layout(g),i.removeClass("empty-watchlist")}})))},error:function(u,f,w){bxd.showMessages("error",["Sorry, we couldnt add the film to your watchlist. Please try again later."])}})}),$("body").click(function(s){!Ot(s,e)&&!Ot(s,$(".ac_results"))&&setTimeout(function(){e.trigger("close")},300)}),$(window).resize(function(){e.trigger("close")});const a=()=>document.querySelector(".js-watchlist-count").textContent,t=document.querySelector('[data-js-trigger="clear-watchlist"]');t&&t.addEventListener("click",s=>{const r=document.getElementById(s.currentTarget.dataset.formId),o=r.querySelector('input[name="__csrf"]'),u=r.querySelector('input[name="password"]'),f=r.querySelector('input[name="authenticationCode"]');s.preventDefault(),s.stopPropagation();const w=new xn({description:"You are about to remove all ".concat(a(),' from your watchlist. We strongly recommend <a href="').concat(s.currentTarget.dataset.exportUrl,'" download>downloading a CSV export</a> of your watchlist before proceeding, as&nbsp;<em>there is no undo</em>.'),fields:[{type:"totp",options:{output:!!f}}],actions:[{label:"Clear Watchlist"}]},window.bxd);w.status.then(({password:b,authenticationCode:m})=>{window.bxd.setDocumentBusyness(!0),w.hide(),u.value=b,f&&(f.value=m),o.value=window.supermodelCSRF,r.submit()},()=>{})})}});(function(){class e extends F.Component{constructor(n){super(n),this.myDOMNode=F.createRef()}componentDidMount(){$(this.myDOMNode.current).find(".js-tooltip").twipsy({offset:"-8",placement:"above",template:'<div class="twipsy-inner -mainnav"></div>'})}render(){var n=F.createElement(globals.comps.UserMenuComponent,{key:"userMenu"}),a=[],t=[];renderMobile?a.push(n):t.push(n);for(var s=0;s<mainMenu.length;s++){var r=mainMenu[s],o=person.loggedIn&&r.hideWhenSignedIn||!person.loggedIn&&r.hideWhenNotSignedIn;if(!o){var u=F.createElement("li",{key:r.id,className:"navitem "+r.cssClassCode+(r.selected?" -selected":"")},F.createElement("a",{href:r.url,className:"navlink has-icon"+(r.tooltip?" js-tooltip":""),title:r.tooltip||void 0},F.createElement("span",{className:"label"},r.name)));!renderMobile||r.showInMainNavForMobile?t.push(u):a.push(u)}}renderMobile&&t.push(F.createElement("li",{className:"navitem -mobilemenutoggle",id:"mobile-menu-toggle",key:"mobile-menu-toggle"},F.createElement("a",{className:"replace",href:"#"},"Open/Close menu"))),t.push(F.createElement("li",{className:"navitem -search js-nav-search-toggle",key:"nav-search"},F.createElement("a",{href:"#",className:"replace"})));var f;a.length&&(f=F.createElement("nav",{id:"mobile-nav"},F.createElement("ul",null,a)));var w=F.createElement("nav",{className:"main-nav"},F.createElement("ul",{className:"navitems"},t));return F.createElement("div",{ref:this.myDOMNode},f,w)}}globals.comps||(globals.comps={}),globals.comps.NavComponent=e})();(function(){class e extends F.Component{render(){if(person.loggedIn){var n,a,t,s;return person.hasHqRole&&(t=F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/stories/"},"Stories"))),person.hasMemberStatistics&&(n=F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/stats/"},"Stats"))),person.canHaveHqDashboard&&(s=F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/backstage/"},"Backstage"))),person.showVideoStore&&(a=F.createElement("li",{className:"divider -twocolumns"},F.createElement("a",{href:baseURL+"/video-store/library"},"Video Store"))),F.createElement("li",{className:"navitem nav-account js-nav-account"},F.createElement("a",{href:"#",className:"has-icon toggle-menu"},F.createElement("span",{className:"avatar -a24","data-js-user-avatar":!0},F.createElement("img",{src:person.avatarURL24,alt:person.username,width:"24",height:"24"})),person.username),F.createElement("ul",{className:"subnav"},F.createElement("li",{className:"divider"},F.createElement("a",{href:baseURL+"/"},"Home")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/"},"Profile")),t,F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/films/"},"Films")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/films/diary/"},"Diary")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/films/reviews/"},"Reviews")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/watchlist/"},"Watchlist")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/lists/"},"Lists")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/likes/"},"Likes")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/tags/"},"Tags")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/"+person.username+"/following/"},"Network")),n,a,F.createElement("li",{className:"divider"},F.createElement("a",{href:baseURL+"/settings/"},"Settings")),F.createElement("li",null,F.createElement("a",{href:baseURL+"/settings/subscriptions/"},"Subscriptions")),s,F.createElement("li",null,F.createElement("a",{id:"sign-out",href:"#",className:"ajax-click-action","data-action":baseURL+"/user/logout.do"},"Sign Out"))))}else return null}}globals.comps||(globals.comps={}),globals.comps.UserMenuComponent=e})();window.isTouchOnly=!1;window&&window.matchMedia&&(window.matchMedia("(any-pointer: coarse)").matches&&(window.isTouchOnly=!0),matchMedia("(hover: none)").matches||(window.isTouchOnly=!1),window.isTouchOnly?document.documentElement.className+=" has-touch":document.documentElement.className+=" has-no-touch");window.Bloodhound=hr;window.Imager=oe;window.tagAutocompleter=Tn;export{_a as __vite_legacy_guard};
